import{_ as C,b as l,e as t,t as o,F as y,p as b,r as p,c as w,C as M,u as P,o as c,h}from"./index-DyVFTtEu.js";import{u as A}from"./media-CmLEr1y8.js";const T={name:"Statistics",setup(){const m=P(),s=A(),_=p(!1),a=p(""),S=w(()=>{const v=s.mediaData,n={totalItems:v.length,totalCollections:0,totalPlaytime:0,avgRating:0,categoryDistribution:{},ratingDistribution:{},platformDistribution:{},genreDistribution:{},recentActivity:[],airingSeries:[]};let x=0,u=0;return v.forEach(e=>{const f=e.category||"unknown";if(n.categoryDistribution[f]=(n.categoryDistribution[f]||0)+1,e.rating&&e.rating>0){const g=Math.floor(e.rating);n.ratingDistribution[g]=(n.ratingDistribution[g]||0)+1,x+=e.rating,u++}if(e.platforms&&e.category==="game"&&e.platforms.split(",").map(r=>r.trim()).filter(r=>r).forEach(r=>{n.platformDistribution[r]=(n.platformDistribution[r]||0)+1}),e.genre&&(e.category==="series"||e.category==="movie")&&e.genre.split(",").map(r=>r.trim()).filter(r=>r).forEach(r=>{n.genreDistribution[r]=(n.genreDistribution[r]||0)+1}),e.spielzeit&&e.spielzeit>0&&(n.totalPlaytime+=e.spielzeit),e.category==="series"&&e.isAiring===!0&&n.airingSeries.push({title:e.title,nextSeason:e.nextSeason,nextSeasonRelease:e.nextSeasonRelease}),e.discovered){const g=new Date(e.discovered),r=new Date;r.setDate(r.getDate()-30),g>=r&&n.recentActivity.push({title:e.title,category:e.category,discovered:e.discovered})}}),u>0&&(n.avgRating=(x/u).toFixed(1)),n.totalPlaytime=Math.round(n.totalPlaytime/60),n.recentActivity.sort((e,f)=>new Date(f.discovered)-new Date(e.discovered)),n}),D=()=>{},i=()=>{},d=()=>{m.push("/")},I=()=>{m.push("/profile")},k=async()=>{_.value=!0,a.value="";try{await s.loadMedia()}catch{a.value="Failed to refresh statistics"}finally{_.value=!1}},R=v=>v?new Date(v).toLocaleDateString():"";return M(async()=>{await k()}),{loading:_,error:a,statistics:S,toggleSidebar:D,toggleMobileSidebar:i,navigateToLibrary:d,navigateToProfile:I,refreshStatistics:k,formatDate:R}}},L={class:"vue-app"},F={id:"sidebar",class:"sidebar"},z={class:"sidebar-content"},B={class:"sidebar-section"},E={class:"sidebar-nav"},N={class:"main-content"},G={class:"main-header"},V={class:"header-left"},j={class:"header-right"},q={class:"content-area"},H={class:"statistics-container"},J={class:"statistics-header"},K={class:"refresh-controls"},O={key:0,class:"loading"},Q={key:1,class:"error"},U={key:2,class:"statistics-content"},W={class:"stats-summary"},X={class:"summary-card"},Y={class:"summary-number"},Z={class:"summary-card"},$={class:"summary-number"},tt={class:"summary-card"},st={class:"summary-number"},it={class:"summary-card"},at={class:"summary-number"},et={class:"chart-container"},ot={class:"category-stats"},rt={class:"category-name"},nt={class:"category-bar"},lt={class:"category-count"},ct={class:"chart-container"},dt={class:"rating-stats"},vt={class:"rating-stars"},gt={class:"rating-bar"},yt={class:"rating-count"},bt={class:"chart-container"},_t={class:"platform-stats"},ft={class:"platform-name"},ht={class:"platform-bar"},mt={class:"platform-count"},ut={class:"chart-container"},St={class:"genre-stats"},Dt={class:"genre-name"},kt={class:"genre-bar"},xt={class:"genre-count"},pt={class:"chart-container"},It={class:"recent-activity"},Rt={class:"activity-title"},Ct={class:"activity-category"},wt={class:"activity-date"},Mt={class:"chart-container"},Pt={class:"airing-series"},At={class:"airing-title"},Tt={class:"airing-next"},Lt={class:"airing-date"};function Ft(m,s,_,a,S,D){return c(),l("div",L,[t("aside",F,[t("div",{class:"sidebar-header",onClick:s[0]||(s[0]=(...i)=>a.toggleSidebar&&a.toggleSidebar(...i))},[...s[7]||(s[7]=[t("h2",null,"Media Library",-1),t("button",{class:"sidebar-toggle"},"☰",-1)])]),t("div",z,[t("div",B,[s[11]||(s[11]=t("h3",null,"Navigation",-1)),t("nav",E,[t("button",{class:"nav-btn",onClick:s[1]||(s[1]=(...i)=>a.navigateToLibrary&&a.navigateToLibrary(...i))},[...s[8]||(s[8]=[t("span",{class:"nav-icon"},"📚",-1),t("span",{class:"nav-text"},"Library",-1)])]),s[10]||(s[10]=t("button",{class:"nav-btn active"},[t("span",{class:"nav-icon"},"📊"),t("span",{class:"nav-text"},"Statistics")],-1)),t("button",{class:"nav-btn",onClick:s[2]||(s[2]=(...i)=>a.navigateToProfile&&a.navigateToProfile(...i))},[...s[9]||(s[9]=[t("span",{class:"nav-icon"},"👤",-1),t("span",{class:"nav-text"},"Profile",-1)])])])])])]),t("div",N,[t("header",G,[t("div",V,[t("button",{class:"mobile-sidebar-toggle",onClick:s[3]||(s[3]=(...i)=>a.toggleMobileSidebar&&a.toggleMobileSidebar(...i))},"☰"),s[12]||(s[12]=t("h1",{class:"page-title"},"Statistics",-1))]),t("div",j,[t("button",{class:"refresh-stats-btn",onClick:s[4]||(s[4]=(...i)=>a.refreshStatistics&&a.refreshStatistics(...i)),title:"Refresh statistics"},[...s[13]||(s[13]=[t("span",{class:"refresh-icon"},"🔄",-1)])])])]),t("main",q,[t("div",H,[t("div",J,[s[14]||(s[14]=t("h1",null,"📊 Media Library Statistics",-1)),s[15]||(s[15]=t("p",null,"Übersicht über deine Media Collection",-1)),t("div",K,[t("button",{class:"refresh-btn",onClick:s[5]||(s[5]=(...i)=>a.refreshStatistics&&a.refreshStatistics(...i))},"🔄 Refresh Statistics")])]),a.loading?(c(),l("div",O,[...s[16]||(s[16]=[t("p",null,"Lade Statistiken...",-1)])])):a.error?(c(),l("div",Q,[t("p",null,o(a.error),1),t("button",{onClick:s[6]||(s[6]=(...i)=>a.refreshStatistics&&a.refreshStatistics(...i))},"Retry")])):(c(),l("div",U,[t("div",W,[t("div",X,[t("div",Y,o(a.statistics.totalItems),1),s[17]||(s[17]=t("div",{class:"summary-label"},"Total Items",-1))]),t("div",Z,[t("div",$,o(a.statistics.totalCollections),1),s[18]||(s[18]=t("div",{class:"summary-label"},"Collections",-1))]),t("div",tt,[t("div",st,o(a.statistics.totalPlaytime)+"h",1),s[19]||(s[19]=t("div",{class:"summary-label"},"Total Playtime",-1))]),t("div",it,[t("div",at,o(a.statistics.avgRating),1),s[20]||(s[20]=t("div",{class:"summary-label"},"Avg Rating",-1))])]),t("div",et,[s[21]||(s[21]=t("h3",{class:"chart-title"},"📈 Category Distribution",-1)),t("div",ot,[(c(!0),l(y,null,b(a.statistics.categoryDistribution,(i,d)=>(c(),l("div",{key:d,class:"category-stat"},[t("div",rt,o(d),1),t("div",nt,[t("div",{class:"category-fill",style:h({width:`${i/a.statistics.totalItems*100}%`})},null,4)]),t("div",lt,o(i)+" ("+o((i/a.statistics.totalItems*100).toFixed(1))+"%)",1)]))),128))])]),t("div",ct,[s[22]||(s[22]=t("h3",{class:"chart-title"},"⭐ Rating Distribution",-1)),t("div",dt,[(c(!0),l(y,null,b(a.statistics.ratingDistribution,(i,d)=>(c(),l("div",{key:d,class:"rating-stat"},[t("div",vt,o("★".repeat(parseInt(d)))+o("☆".repeat(5-parseInt(d))),1),t("div",gt,[t("div",{class:"rating-fill",style:h({width:`${i/a.statistics.totalItems*100}%`})},null,4)]),t("div",yt,o(i)+" ("+o((i/a.statistics.totalItems*100).toFixed(1))+"%)",1)]))),128))])]),t("div",bt,[s[23]||(s[23]=t("h3",{class:"chart-title"},"🎮 Platform Distribution",-1)),t("div",_t,[(c(!0),l(y,null,b(a.statistics.platformDistribution,(i,d)=>(c(),l("div",{key:d,class:"platform-stat"},[t("div",ft,o(d),1),t("div",ht,[t("div",{class:"platform-fill",style:h({width:`${i/a.statistics.totalItems*100}%`})},null,4)]),t("div",mt,o(i)+" ("+o((i/a.statistics.totalItems*100).toFixed(1))+"%)",1)]))),128))])]),t("div",ut,[s[24]||(s[24]=t("h3",{class:"chart-title"},"🎭 Top Genres",-1)),t("div",St,[(c(!0),l(y,null,b(a.statistics.genreDistribution,(i,d)=>(c(),l("div",{key:d,class:"genre-stat"},[t("div",Dt,o(d),1),t("div",kt,[t("div",{class:"genre-fill",style:h({width:`${i/a.statistics.totalItems*100}%`})},null,4)]),t("div",xt,o(i)+" ("+o((i/a.statistics.totalItems*100).toFixed(1))+"%)",1)]))),128))])]),t("div",pt,[s[25]||(s[25]=t("h3",{class:"chart-title"},"📅 Recent Activity",-1)),t("div",It,[(c(!0),l(y,null,b(a.statistics.recentActivity,i=>(c(),l("div",{key:i.title,class:"activity-item"},[t("div",Rt,o(i.title),1),t("div",Ct,o(i.category),1),t("div",wt,o(a.formatDate(i.discovered)),1)]))),128))])]),t("div",Mt,[s[26]||(s[26]=t("h3",{class:"chart-title"},"📺 Currently Airing Series",-1)),t("div",Pt,[(c(!0),l(y,null,b(a.statistics.airingSeries,i=>(c(),l("div",{key:i.title,class:"airing-item"},[t("div",At,o(i.title),1),t("div",Tt,"Next: Season "+o(i.nextSeason),1),t("div",Lt,o(i.nextSeasonRelease?a.formatDate(i.nextSeasonRelease):"TBA"),1)]))),128))])])]))])])])])}const Et=C(T,[["render",Ft],["__scopeId","data-v-81c984c3"]]);export{Et as default};
