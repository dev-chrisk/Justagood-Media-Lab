import{d as Ue,r as h,u as We,c as F,_ as V,a as d,b as s,e as v,t as m,n as H,o as i,f as ze,w as Z,g as G,h as T,v as ie,i as L,F as $,j as ee,k as Pe,m as Be,l as Ge,p as Le,q as Oe,s as qe,x as je,y as W,z as Y,A as N,B as He,C as Ke}from"./index-D9jyHus0.js";import{u as Qe}from"./media---LqbMD9.js";import{R as Xe,L as Je,M as Ye,S as Ze}from"./RegisterModal-BcfstEny.js";const Ee=Ue("message",()=>{const n=h(!1),e=h("info"),l=h(""),t=h(""),r=h("");function c(k){e.value=k.type||"info",l.value=k.title||"",t.value=k.message||"",r.value=k.details||"",n.value=!0}function o(k,A="Success",p=""){c({type:"success",title:A,message:k,details:p})}function u(k,A="Error",p=""){c({type:"error",title:A,message:k,details:p})}function R(k,A="Warning",p=""){c({type:"warning",title:A,message:k,details:p})}function U(k,A="Info",p=""){c({type:"info",title:A,message:k,details:p})}function C(){n.value=!1,setTimeout(()=>{e.value="info",l.value="",t.value="",r.value=""},300)}return{show:n,type:e,title:l,message:t,details:r,showMessage:c,showSuccess:o,showError:u,showWarning:R,showInfo:U,closeMessage:C}}),Ne=Ue("confirm",()=>{const n=h(!1),e=h("Confirm Action"),l=h(""),t=h(null);function r(u){return new Promise(R=>{e.value=u.title||"Confirm Action",l.value=u.message||"",n.value=!0,t.value=R})}function c(){t.value&&(t.value(!0),t.value=null),n.value=!1}function o(){t.value&&(t.value(!1),t.value=null),n.value=!1}return{show:n,title:e,message:l,showConfirm:r,confirm:c,cancel:o}}),Ve=Ue("input",()=>{const n=h(!1),e=h("Input Required"),l=h(""),t=h(""),r=h("text"),c=h(""),o=h(null);function u(C){return new Promise(k=>{e.value=C.title||"Input Required",l.value=C.message||"",t.value=C.placeholder||"",r.value=C.inputType||"text",c.value=C.defaultValue||"",n.value=!0,o.value=k})}function R(C){o.value&&(o.value(C),o.value=null),n.value=!1}function U(){o.value&&(o.value(null),o.value=null),n.value=!1}return{show:n,title:e,message:l,placeholder:t,inputType:r,defaultValue:c,showInput:u,confirm:R,cancel:U}});function $e(){const n=We(),e=Qe(),l=Ee(),t=Ne(),r=Ve(),c=h(!1),o=h(!1),u=h(!1),R=h(!1),U=h(!1),C=h(!1),k=h(!1),A=h(!1),p=h(!1),w=h(null),y=h(8),D=h("order_asc"),E=h(null),a=[{key:"game",name:"Games",icon:"🎮"},{key:"series",name:"Series",icon:"📺"},{key:"movie",name:"Movies",icon:"🎬"},{key:"watchlist",name:"Watchlist",icon:"❤️"}],b=F(()=>n.isLoggedIn),_=F(()=>n.userName),P=F(()=>e.currentCategory),O=F({get:()=>e.searchQuery,set:g=>e.setSearchQuery(g)}),z=F(()=>e.categoryCounts),re=F(()=>e.loading),de=F(()=>e.error),ce=F(()=>{const g=[...e.filteredMedia],[f,M]=D.value.split("_");return g.sort((I,S)=>{let B=I[f],x=S[f];return f==="order"&&(B=I.__order||0,x=S.__order||0),typeof B=="string"&&(B=B.toLowerCase(),x=x.toLowerCase()),M==="asc"?B>x?1:-1:B<x?1:-1})}),ue=F(()=>ce.value),me=F(()=>{if(!e||!e.mediaData)return[];const g=new Set;return e.mediaData.forEach(f=>{f.platforms&&f.platforms.split(",").forEach(M=>g.add(M.trim()))}),Array.from(g).sort()}),ge=F(()=>{if(!e||!e.mediaData)return[];const g=new Set;return e.mediaData.forEach(f=>{f.genre&&f.genre.split(",").forEach(M=>g.add(M.trim()))}),Array.from(g).sort()}),fe=()=>{c.value=!c.value},te=()=>{o.value=!o.value},ve=()=>{o.value=!1},ye=g=>{e.setCategory(g),o.value=!1},he=()=>{e.setSearchQuery("")},pe=(g,f)=>{f?e.addFilter({type:"platform",value:g}):e.removeFilter({type:"platform",value:g})},we=(g,f)=>{f?e.addFilter({type:"genre",value:g}):e.removeFilter({type:"genre",value:g})},be=g=>{w.value=g,U.value=!0},oe=()=>{U.value=!1,w.value=null},se=()=>{k.value=!1},Ie=async g=>{try{const f=await e.batchAddMediaItems(g);if(f.success){const{created:M,failed:I}=f.stats;let S=`Successfully added ${M} items`;I>0&&(S+=` (${I} failed)`),l.showSuccess(S,"Bulk Add Successful")}se()}catch(f){console.error("Bulk add failed:",f),l.showError("Failed to add items: "+(f.message||"Unknown error"),"Bulk Add Failed")}},Se=async g=>{w.value?await e.updateMediaItem(w.value.id,g):await e.addMediaItem(g),oe()},q=async g=>{await e.deleteMediaItem(g.id)},ke=async()=>{await n.logout(),await j()},j=async()=>{await e.loadMedia()},Ce=()=>{C.value=!C.value},_e=()=>{if(C.value=!1,!b.value){l.showWarning("Bitte loggen Sie sich ein, um neue Items hinzuzufügen.","Login erforderlich");return}w.value=null,U.value=!0},Me=()=>{if(C.value=!1,!b.value){l.showWarning("Bitte loggen Sie sich ein, um diese Funktion zu nutzen.","Login erforderlich");return}k.value=!0},Te=()=>{if(C.value=!1,!b.value){l.showWarning("Bitte loggen Sie sich ein, um diese Funktion zu nutzen.","Login erforderlich");return}A.value=!0},xe=()=>{if(C.value=!1,!b.value){l.showWarning("Bitte loggen Sie sich ein, um diese Funktion zu nutzen.","Login erforderlich");return}l.showInfo("API Import feature coming soon!","Feature in Entwicklung")},Ae=()=>{if(C.value=!1,!b.value){l.showWarning("Bitte loggen Sie sich ein, um diese Funktion zu nutzen.","Login erforderlich");return}le()},K=g=>{const f=a.find(M=>M.key===g);return f?f.name:g},De=async()=>{const g=K(P.value),f=z.value[P.value]||0;if(f===0){l.showInfo("No items to delete in this category.","Nothing to Delete");return}const M=`Are you sure you want to delete ALL ${f} items in "${g}"?

This action cannot be undone!`;if(await t.showConfirm({title:"Delete All Items",message:M}))try{const B=((e==null?void 0:e.mediaData)||[]).filter(x=>P.value==="watchlist"?x.category==="watchlist"||x.isNew===!0:x.category===P.value).map(x=>x.id);await e.batchDeleteMediaItems(B),await j(),l.showSuccess(`Successfully deleted ${f} items from "${g}"`,"Items Deleted")}catch(S){console.error("Error deleting items:",S),l.showError("Error occurred while deleting items. Please try again.","Delete Failed")}},Re=g=>{const f=g.split(`
`).map(x=>x.trim()).filter(x=>x.length>0);if(f.length===0){l.showWarning("Die TXT-Datei ist leer oder enthält keine gültigen Einträge.","Leere Datei");return}const I=e.filteredMedia.map(x=>x.title.toLowerCase().trim()),S=f.filter(x=>{const X=x.toLowerCase().trim();return!I.some(J=>J.includes(X)||X.includes(J))}),B=f.filter(x=>{const X=x.toLowerCase().trim();return I.some(J=>J.includes(X)||X.includes(J))});E.value={totalInFile:f.length,missingItems:S,existingItems:B,currentCategory:P.value,categoryName:K(P.value)},A.value=!1,p.value=!0},Fe=()=>{E.value=null,p.value=!1},le=async()=>{const g=(e==null?void 0:e.mediaData)||[];if(g.length===0){l.showInfo("Keine Media Items zum Exportieren gefunden.","Nichts zu exportieren");return}const f=await r.showInput({title:"Export Format wählen",message:`1 = CSV
2 = JSON
3 = Beide

Geben Sie die Nummer ein:`,placeholder:"1",defaultValue:"1"});if(!f||!["1","2","3"].includes(f))return;const M=new Date().toISOString().split("T")[0];(f==="1"||f==="3")&&ne(g,M),(f==="2"||f==="3")&&ae(g,M),l.showSuccess(`Collection mit ${g.length} Items wurde erfolgreich exportiert!`,"Export erfolgreich")},ne=(g,f)=>{const I=[["Titel","Kategorie","Release","Rating","Platforms","Genre","Spielzeit","Status","Beschreibung"].join(","),...g.map(S=>[`"${(S.title||"").replace(/"/g,'""')}"`,`"${(S.category||S.category_name||"Unbekannt").replace(/"/g,'""')}"`,`"${S.release||""}"`,`"${S.rating||""}"`,`"${(S.platforms||"").replace(/"/g,'""')}"`,`"${(S.genre||"").replace(/"/g,'""')}"`,`"${S.spielzeit||""}"`,`"${S.isAiring?"Airing":"Abgeschlossen"}"`,`"${(S.description||"").replace(/"/g,'""')}"`].join(","))].join(`
`);Q(I,`media_collection_${f}.csv`,"text/csv;charset=utf-8;")},ae=(g,f)=>{const M={exportDate:new Date().toISOString(),totalItems:g.length,categories:[...new Set(g.map(I=>I.category||I.category_name||"Unbekannt"))],items:g.map(I=>({id:I.id,title:I.title||"",category:I.category||I.category_name||"Unbekannt",release:I.release||"",rating:I.rating||null,platforms:I.platforms||"",genre:I.genre||"",spielzeit:I.spielzeit||null,status:I.isAiring?"Airing":"Abgeschlossen",description:I.description||"",isNew:I.isNew||!1,nextSeason:I.nextSeason||null,discovered:I.discovered||null}))};Q(JSON.stringify(M,null,2),`media_collection_${f}.json`,"application/json;charset=utf-8;")},Q=(g,f,M)=>{const I=new Blob([g],{type:M}),S=document.createElement("a"),B=URL.createObjectURL(I);S.setAttribute("href",B),S.setAttribute("download",f),S.style.visibility="hidden",document.body.appendChild(S),S.click(),document.body.removeChild(S),URL.revokeObjectURL(B)};return{sidebarCollapsed:c,mobileSidebarOpen:o,showLoginModal:u,showRegisterModal:R,showEditModal:U,showFloatingMenu:C,showBulkAddModal:k,showTxtImportModal:A,showTxtImportResults:p,editingItem:w,gridColumns:y,sortBy:D,categories:a,txtImportResults:E,isLoggedIn:b,userName:_,currentCategory:P,searchQuery:O,categoryCounts:z,loading:re,error:de,paginatedMedia:ue,platforms:me,genres:ge,toggleSidebar:fe,toggleMobileSidebar:te,closeMobileSidebar:ve,setCategory:ye,clearSearch:he,togglePlatformFilter:pe,toggleGenreFilter:we,editItem:be,closeEditModal:oe,closeBulkAddModal:se,handleBulkAddItems:Ie,handleSaveItem:Se,handleDeleteItem:q,logout:ke,loadMedia:j,toggleFloatingMenu:Ce,addNewItem:_e,bulkAddItems:Me,importFromTxt:Te,importFromAPI:xe,createCollection:Ae,exportMediaCollection:le,exportAsCSV:ne,exportAsJSON:ae,downloadFile:Q,deleteAllInCategory:De,getCategoryDisplayName:K,processTxtContent:Re,closeTxtImportResults:Fe}}const et={name:"MediaItem",props:{item:{type:Object,required:!0}},emits:["edit"],computed:{showWatchlistTag(){return this.item.category==="watchlist"||this.item.isNew===!0},isWatchlistItem(){return this.item.category==="watchlist"||this.item.isNew===!0}},methods:{getImageUrl(n){return n.startsWith("http")||n.startsWith("/")?n:n.startsWith("images_downloads/")?`/storage/${n}`:`/storage/${n}`},handleImageError(n){var e;n.target.style.display="none",(e=n.target.nextElementSibling)==null||e.classList.add("show")},formatDate(n){return n?new Date(n).toLocaleDateString():""},editItem(){this.$emit("edit",this.item)},getWatchlistReleaseStatus(){if(!this.item.release)return"";const n=new Date(this.item.release),e=new Date;e.setHours(0,0,0,0),n.setHours(0,0,0,0);const l=n.getTime()-e.getTime(),t=Math.ceil(l/(1e3*3600*24));if(t>0)return t===1?"Tomorrow!":t<=7?`${t} days left`:t<=30?`${t} days left`:`${Math.ceil(t/30)} months left`;if(t===0)return"Released today!";{const r=this.getTypeTagText().toLowerCase();return r==="game"?"Unplayed yet":r==="series"||r==="movie"?"Unwatched yet":"Unconsumed yet"}},getWatchlistReleaseStatusClass(){if(!this.item.release)return"";const n=new Date(this.item.release),e=new Date;e.setHours(0,0,0,0),n.setHours(0,0,0,0);const l=n.getTime()-e.getTime(),t=Math.ceil(l/(1e3*3600*24));return t>0?"countdown":t===0?"released-today":"unconsumed"},getTypeTagText(){var e,l,t;const n=this.item.watchlistType||this.item.watchlist_type;if(n)return n.charAt(0).toUpperCase()+n.slice(1);if(this.item.genre){const r=this.item.genre.toLowerCase();if(r.includes("game")||r.includes("gaming")||(e=this.item.platforms)!=null&&e.toLowerCase().includes("steam")||(l=this.item.platforms)!=null&&l.toLowerCase().includes("ps")||(t=this.item.platforms)!=null&&t.toLowerCase().includes("xbox"))return"Game";if(r.includes("series")||r.includes("tv")||r.includes("episode")||this.item.isAiring)return"Series";if(r.includes("movie")||r.includes("film")||r.includes("cinema"))return"Movie"}if(this.item.platforms){const r=this.item.platforms.toLowerCase();if(r.includes("steam")||r.includes("ps")||r.includes("xbox")||r.includes("nintendo")||r.includes("pc"))return"Game";if(r.includes("netflix")||r.includes("hulu")||r.includes("disney")||r.includes("hbo"))return"Series";if(r.includes("cinema")||r.includes("theater"))return"Movie"}return"Media"},getTypeTagClass(){return`type-${this.getTypeTagText().toLowerCase()}`}}},tt={class:"media-image"},ot=["src","alt"],st={key:1,class:"no-image"},lt={class:"media-info"},nt={class:"media-title"},at={class:"media-meta"},it={key:0,class:"media-release"},rt={key:1},dt={key:1,class:"media-rating"},ct={key:0,class:"media-platforms"},ut={key:1,class:"media-genre"},mt={key:2,class:"media-airing"},gt={key:0},ft={key:3,class:"watchlist-type-tag"};function vt(n,e,l,t,r,c){return i(),d("div",{class:"media-item",onClick:e[1]||(e[1]=(...o)=>c.editItem&&c.editItem(...o))},[s("div",tt,[l.item.path?(i(),d("img",{key:0,src:c.getImageUrl(l.item.path),alt:l.item.title,onError:e[0]||(e[0]=(...o)=>c.handleImageError&&c.handleImageError(...o))},null,40,ot)):(i(),d("div",st,[...e[2]||(e[2]=[s("span",{class:"no-image-icon"},"📁",-1)])]))]),s("div",lt,[s("h3",nt,m(l.item.title),1),s("div",at,[l.item.release?(i(),d("span",it,[c.isWatchlistItem&&l.item.release?(i(),d("span",{key:0,class:H(c.getWatchlistReleaseStatusClass())},m(c.getWatchlistReleaseStatus()),3)):(i(),d("span",rt,m(c.formatDate(l.item.release)),1))])):v("",!0),l.item.rating?(i(),d("span",dt,m("★".repeat(Math.max(0,Math.min(5,Math.floor(l.item.rating)))))+m("☆".repeat(Math.max(0,5-Math.max(0,Math.min(5,Math.floor(l.item.rating)))))),1)):v("",!0)]),l.item.platforms?(i(),d("div",ct,m(l.item.platforms),1)):v("",!0),l.item.genre?(i(),d("div",ut,m(l.item.genre),1)):v("",!0),l.item.isAiring?(i(),d("div",mt,[e[3]||(e[3]=s("span",{class:"airing-badge"},"Airing",-1)),l.item.nextSeason?(i(),d("span",gt,"S"+m(l.item.nextSeason),1)):v("",!0)])):v("",!0),c.showWatchlistTag?(i(),d("div",ft,[s("span",{class:H(["type-tag",c.getTypeTagClass()])},m(c.getTypeTagText()),3)])):v("",!0)]),e[4]||(e[4]=s("div",{class:"edit-indicator"},[s("span",{class:"edit-icon"},"✏️")],-1))])}const yt=V(et,[["render",vt],["__scopeId","data-v-8b0d95a6"]]),ht={name:"FloatingActionButton",props:{showMenu:{type:Boolean,default:!1},showDeleteAll:{type:Boolean,default:!1},categoryName:{type:String,default:""},itemCount:{type:Number,default:0}},emits:["toggleMenu","addNewItem","bulkAddItems","importFromTxt","importFromAPI","createCollection","deleteAllInCategory"]},pt={class:"floating-actions"},wt={class:"menu-text"},bt={class:"item-count-badge"};function It(n,e,l,t,r,c){return i(),d("div",pt,[s("div",{class:H(["floating-menu",{show:l.showMenu}])},[s("button",{class:"floating-menu-item",onClick:e[0]||(e[0]=o=>n.$emit("addNewItem"))},[...e[7]||(e[7]=[s("span",{class:"menu-icon"},"➕",-1),s("span",{class:"menu-text"},"Add Item",-1)])]),s("button",{class:"floating-menu-item",onClick:e[1]||(e[1]=o=>n.$emit("bulkAddItems"))},[...e[8]||(e[8]=[s("span",{class:"menu-icon"},"📦",-1),s("span",{class:"menu-text"},"Bulk Add",-1)])]),s("button",{class:"floating-menu-item",onClick:e[2]||(e[2]=o=>n.$emit("importFromTxt"))},[...e[9]||(e[9]=[s("span",{class:"menu-icon"},"📄",-1),s("span",{class:"menu-text"},"Import from TXT",-1)])]),s("button",{class:"floating-menu-item",onClick:e[3]||(e[3]=o=>n.$emit("importFromAPI"))},[...e[10]||(e[10]=[s("span",{class:"menu-icon"},"🌐",-1),s("span",{class:"menu-text"},"Import from API",-1)])]),s("button",{class:"floating-menu-item",onClick:e[4]||(e[4]=o=>n.$emit("createCollection"))},[...e[11]||(e[11]=[s("span",{class:"menu-icon"},"📚",-1),s("span",{class:"menu-text"},"Create Collection",-1)])]),l.showDeleteAll&&l.itemCount>0?(i(),d("button",{key:0,class:"floating-menu-item delete-all-item",onClick:e[5]||(e[5]=o=>n.$emit("deleteAllInCategory"))},[e[12]||(e[12]=s("span",{class:"menu-icon"},"🗑️",-1)),s("span",wt,"Delete All "+m(l.categoryName),1),s("span",bt,"("+m(l.itemCount)+")",1)])):v("",!0)],2),s("button",{class:"floating-add-btn",onClick:e[6]||(e[6]=o=>n.$emit("toggleMenu"))},m(l.showMenu?"✕":"+"),1)])}const St=V(ht,[["render",It],["__scopeId","data-v-19731834"]]),kt={name:"EditModal",props:{item:{type:Object,default:null},currentCategory:{type:String,default:"watchlist"}},emits:["close","save","delete"],setup(n,{emit:e}){const l=h(!1),t=h(""),r=h([]),c=h(null),o=ze({category:"watchlist",title:"",release:"",rating:"",count:"",platforms:"",genre:"",link:"",path:"",discovered:"",spielzeit:"",isAiring:!1,nextSeason:"",nextSeasonRelease:"",imageUrl:"",watchlistType:""}),u=F(()=>!!n.item),R=F(()=>o.category==="game"),U=F(()=>o.category==="series"),C=F(()=>o.category==="watchlist");Z(()=>n.item,a=>{a?Object.keys(o).forEach(b=>{o[b]=a[b]||""}):Object.keys(o).forEach(b=>{b==="category"?o[b]=n.currentCategory||"watchlist":o[b]=""})},{immediate:!0}),Z(()=>n.currentCategory,a=>{!n.item&&a&&(o.category=a)});const k=async()=>{if(!o.title){t.value="Title is required";return}if(o.category==="watchlist"&&!o.watchlistType){t.value="Please select a type for watchlist items";return}if(o.category==="watchlist"&&!o.release){t.value="Release date is required for watchlist items";return}l.value=!0,t.value="";try{const a={...o};a.imageUrl&&a.imageUrl.trim()?a.path=a.imageUrl:(a.imageUrl=null,a.path=null),Object.keys(a).forEach(b=>{a[b]===""&&b!=="watchlistType"&&(a[b]=null)}),a.rating&&(a.rating=parseFloat(a.rating)),a.count&&(a.count=parseInt(a.count)),a.spielzeit&&(a.spielzeit=parseInt(a.spielzeit)),a.nextSeason&&(a.nextSeason=parseInt(a.nextSeason)),e("save",a)}catch(a){t.value=a.message||"Failed to save item"}finally{l.value=!1}},A=()=>{e("close")};return{form:o,loading:l,error:t,apiResults:r,isEditing:u,isGame:R,isSeries:U,isWatchlist:C,handleSave:k,closeModal:A,deleteItem:()=>{e("delete",n.item),A()},searchApi:async()=>{if(o.category==="watchlist"){r.value=[];return}if(c.value&&clearTimeout(c.value),!o.title||o.title.length<3){r.value=[];return}c.value=setTimeout(async()=>{try{const a=await Be.searchApi(o.title,o.category,10);a&&a.length>0?r.value=a.map(b=>({title:b.title,release:b.release,genre:b.overview||"",platforms:b.platforms||"",link:b.link||"",imageUrl:b.image||"",rating:b.rating||"",apiSource:b.api_source||"",id:b.id||""})):r.value=[{title:`"${o.title}" - Keine Ergebnisse gefunden`,release:"",genre:"Bitte manuell ausfüllen",isPlaceholder:!0}]}catch(a){console.error("API search failed:",a),r.value=[{title:`"${o.title}" - API nicht verfügbar`,release:"",genre:"Bitte manuell ausfüllen",isPlaceholder:!0}]}},500)},selectApiResult:async a=>{if(a.isPlaceholder){r.value=[];return}o.title=a.title,a.release&&(o.release=a.release),a.platforms&&(o.platforms=a.platforms),a.genre&&(o.genre=a.genre),a.link&&(o.link=a.link),a.rating&&(o.rating=a.rating),a.imageUrl?(o.imageUrl=a.imageUrl,o.path=a.imageUrl):(o.imageUrl="",o.path=""),r.value=[]},formatDate:a=>a?new Date(a).toLocaleDateString():"",getReleasePreview:()=>{var O;if(!o.release)return"";const a=new Date(o.release),b=new Date;b.setHours(0,0,0,0),a.setHours(0,0,0,0);const _=a.getTime()-b.getTime(),P=Math.ceil(_/(1e3*3600*24));if(P>0)return P===1?"Tomorrow!":P<=7?`${P} days left`:P<=30?`${P} days left`:`${Math.ceil(P/30)} months left`;if(P===0)return"Released today!";{const z=((O=o.watchlistType)==null?void 0:O.toLowerCase())||"media";return z==="game"?"Unplayed yet":z==="series"||z==="movie"?"Unwatched yet":"Unconsumed yet"}}}}},Ct={class:"form-header"},_t={class:"form-group category-group"},Mt={class:"form-group title-group"},Tt={class:"search-container"},xt=["placeholder","disabled"],At={key:0,class:"search-results"},Dt=["onClick"],Rt={class:"result-thumbnail"},Ft=["src","alt"],Pt={key:1,class:"no-image"},Ut={class:"result-content"},Bt={class:"result-title"},Lt={class:"result-meta"},Et={key:0},Nt={key:1},Vt={key:2,class:"rating"},Wt={class:"form-row"},zt={class:"form-group"},Gt={for:"release"},Ot={key:0,class:"required"},qt=["required"],jt={key:0,class:"field-hint"},Ht={key:1,class:"release-preview"},Kt={class:"form-group"},Qt={class:"form-row"},Xt={class:"form-group"},Jt={class:"form-group"},Yt={class:"form-row"},Zt={class:"form-group"},$t={class:"form-group"},eo={key:0,class:"form-row"},to={class:"form-group"},oo={key:0,class:"field-error"},so={class:"form-row"},lo={class:"form-group"},no={class:"form-group"},ao={key:1,class:"form-row"},io={class:"form-group"},ro={key:2,class:"form-row"},co={class:"form-group"},uo={key:0,class:"form-group"},mo={key:3,class:"form-row"},go={class:"form-group"},fo={class:"form-row"},vo={class:"form-group"},yo={key:4,class:"error-message"},ho={class:"modal-buttons"},po=["disabled"],wo=["disabled"],bo=["disabled"],Io=["disabled"];function So(n,e,l,t,r,c){return i(),d("div",{class:"modal",onClick:e[22]||(e[22]=(...o)=>t.closeModal&&t.closeModal(...o))},[s("div",{class:"modal-content",onClick:e[21]||(e[21]=G(()=>{},["stop"]))},[s("h2",null,m(t.isEditing?"Edit Item":"Add Item"),1),s("form",{onSubmit:e[20]||(e[20]=G((...o)=>t.handleSave&&t.handleSave(...o),["prevent"]))},[s("div",Ct,[s("div",_t,[e[24]||(e[24]=s("label",{for:"category"},"Category:",-1)),T(s("select",{id:"category","onUpdate:modelValue":e[0]||(e[0]=o=>t.form.category=o),required:""},[...e[23]||(e[23]=[s("option",{value:"watchlist"},"Watchlist",-1),s("option",{value:"game"},"Game",-1),s("option",{value:"series"},"Series",-1),s("option",{value:"movie"},"Movie",-1)])],512),[[ie,t.form.category]])]),s("div",Mt,[e[25]||(e[25]=s("label",{for:"title"},"Title:",-1)),s("div",Tt,[T(s("input",{type:"text",id:"title","onUpdate:modelValue":e[1]||(e[1]=o=>t.form.title=o),onInput:e[2]||(e[2]=(...o)=>t.searchApi&&t.searchApi(...o)),required:"",placeholder:t.isWatchlist?"Manuell eingeben (keine API-Suche)":"Enter title",disabled:t.loading},null,40,xt),[[L,t.form.title]]),t.apiResults.length>0?(i(),d("div",At,[(i(!0),d($,null,ee(t.apiResults,o=>(i(),d("div",{key:o.title,class:"search-result-item",onClick:u=>t.selectApiResult(o)},[s("div",Rt,[o.imageUrl?(i(),d("img",{key:0,src:o.imageUrl,alt:o.title},null,8,Ft)):(i(),d("div",Pt,[s("span",null,m(o.title.charAt(0).toUpperCase()),1)]))]),s("div",Ut,[s("div",Bt,m(o.title),1),s("div",Lt,[o.release?(i(),d("span",Et,m(t.formatDate(o.release)),1)):v("",!0),o.genre?(i(),d("span",Nt,m(o.genre),1)):v("",!0),o.rating?(i(),d("span",Vt,"⭐ "+m(o.rating),1)):v("",!0)])])],8,Dt))),128))])):v("",!0)])])]),s("div",Wt,[s("div",zt,[s("label",Gt,[Pe(m(t.isWatchlist?"Release Date:":"Release:")+" ",1),t.isWatchlist?(i(),d("span",Ot,"*")):v("",!0)]),T(s("input",{type:"date",id:"release","onUpdate:modelValue":e[3]||(e[3]=o=>t.form.release=o),required:t.isWatchlist},null,8,qt),[[L,t.form.release]]),t.isWatchlist?(i(),d("div",jt," 📅 Set the release date to track countdown or status ")):v("",!0),t.isWatchlist&&t.form.release?(i(),d("div",Ht,[e[26]||(e[26]=s("strong",null,"Preview:",-1)),Pe(" "+m(t.getReleasePreview()),1)])):v("",!0)]),s("div",Kt,[e[27]||(e[27]=s("label",{for:"rating"},"Rating:",-1)),T(s("input",{type:"number",id:"rating","onUpdate:modelValue":e[4]||(e[4]=o=>t.form.rating=o),step:"0.1",min:"0",max:"10",placeholder:"0-10"},null,512),[[L,t.form.rating]])])]),s("div",Qt,[s("div",Xt,[e[28]||(e[28]=s("label",{for:"views"},"Views:",-1)),T(s("input",{type:"number",id:"views","onUpdate:modelValue":e[5]||(e[5]=o=>t.form.count=o),min:"0",placeholder:"0"},null,512),[[L,t.form.count]])]),s("div",Jt,[e[29]||(e[29]=s("label",{for:"discovered"},"Discovered:",-1)),T(s("input",{type:"date",id:"discovered","onUpdate:modelValue":e[6]||(e[6]=o=>t.form.discovered=o)},null,512),[[L,t.form.discovered]])])]),s("div",Yt,[s("div",Zt,[e[30]||(e[30]=s("label",{for:"platforms"},"Platforms:",-1)),T(s("input",{type:"text",id:"platforms","onUpdate:modelValue":e[7]||(e[7]=o=>t.form.platforms=o),placeholder:"PC, PS5, Xbox"},null,512),[[L,t.form.platforms]])]),s("div",$t,[e[31]||(e[31]=s("label",{for:"genre"},"Genre:",-1)),T(s("input",{type:"text",id:"genre","onUpdate:modelValue":e[8]||(e[8]=o=>t.form.genre=o),placeholder:"Action, Adventure, RPG"},null,512),[[L,t.form.genre]])])]),t.form.category==="watchlist"?(i(),d("div",eo,[s("div",to,[e[33]||(e[33]=s("label",{for:"watchlistType"},[Pe("Type: "),s("span",{class:"required"},"*")],-1)),T(s("select",{id:"watchlistType","onUpdate:modelValue":e[9]||(e[9]=o=>t.form.watchlistType=o)},[...e[32]||(e[32]=[s("option",{value:""},"Select Type",-1),s("option",{value:"game"},"Game",-1),s("option",{value:"series"},"Series",-1),s("option",{value:"movie"},"Movie",-1)])],512),[[ie,t.form.watchlistType]]),t.form.category==="watchlist"&&!t.form.watchlistType?(i(),d("div",oo," Please select a type for watchlist items ")):v("",!0)])])):v("",!0),s("div",so,[s("div",lo,[e[34]||(e[34]=s("label",{for:"link"},"Link:",-1)),T(s("input",{type:"url",id:"link","onUpdate:modelValue":e[10]||(e[10]=o=>t.form.link=o),placeholder:"https://..."},null,512),[[L,t.form.link]])]),s("div",no,[e[35]||(e[35]=s("label",{for:"path"},"Image Path:",-1)),T(s("input",{type:"text",id:"path","onUpdate:modelValue":e[11]||(e[11]=o=>t.form.path=o),placeholder:"images/movies/filename.jpg"},null,512),[[L,t.form.path]])])]),t.isGame?(i(),d("div",ao,[s("div",io,[e[36]||(e[36]=s("label",{for:"playtime"},"Playtime (Minutes):",-1)),T(s("input",{type:"number",id:"playtime","onUpdate:modelValue":e[12]||(e[12]=o=>t.form.spielzeit=o),min:"0",placeholder:"0"},null,512),[[L,t.form.spielzeit]])])])):v("",!0),t.isSeries?(i(),d("div",ro,[s("div",co,[e[38]||(e[38]=s("label",{for:"isAiring"},"Status:",-1)),T(s("select",{id:"isAiring","onUpdate:modelValue":e[13]||(e[13]=o=>t.form.isAiring=o)},[...e[37]||(e[37]=[s("option",{value:!1},"Finished",-1),s("option",{value:!0},"Airing",-1)])],512),[[ie,t.form.isAiring]])]),t.form.isAiring?(i(),d("div",uo,[e[39]||(e[39]=s("label",{for:"nextSeason"},"Next Season:",-1)),T(s("input",{type:"number",id:"nextSeason","onUpdate:modelValue":e[14]||(e[14]=o=>t.form.nextSeason=o),min:"1",placeholder:"1"},null,512),[[L,t.form.nextSeason]])])):v("",!0)])):v("",!0),t.form.isAiring?(i(),d("div",mo,[s("div",go,[e[40]||(e[40]=s("label",{for:"nextSeasonRelease"},"Next Season Release:",-1)),T(s("input",{type:"date",id:"nextSeasonRelease","onUpdate:modelValue":e[15]||(e[15]=o=>t.form.nextSeasonRelease=o)},null,512),[[L,t.form.nextSeasonRelease]])])])):v("",!0),s("div",fo,[s("div",vo,[e[41]||(e[41]=s("label",{for:"imageUrl"},"Image URL (optional):",-1)),T(s("input",{type:"text",id:"imageUrl","onUpdate:modelValue":e[16]||(e[16]=o=>t.form.imageUrl=o),placeholder:"https://... or leave empty for API images"},null,512),[[L,t.form.imageUrl]])])]),t.error?(i(),d("div",yo,m(t.error),1)):v("",!0),s("div",ho,[s("button",{type:"submit",disabled:t.loading},m(t.loading?"Saving...":"Save"),9,po),s("button",{type:"button",onClick:e[17]||(e[17]=(...o)=>t.closeModal&&t.closeModal(...o)),disabled:t.loading}," Cancel ",8,wo),t.isEditing?(i(),d("button",{key:0,type:"button",onClick:e[18]||(e[18]=(...o)=>t.deleteItem&&t.deleteItem(...o)),disabled:t.loading,class:"delete-btn"}," Delete ",8,bo)):v("",!0),s("button",{type:"button",onClick:e[19]||(e[19]=(...o)=>t.handleSave&&t.handleSave(...o)),disabled:t.loading,class:"check-btn",title:"Add to list"}," ✓ ",8,Io)])],32)])])}const ko=V(kt,[["render",So],["__scopeId","data-v-8697f561"]]),Co={name:"BulkAddModal",props:{show:{type:Boolean,default:!1},currentCategory:{type:String,default:""}},emits:["close","save"],setup(n,{emit:e}){const l=h(!1),t=h(null),r=h(0),c=h([]),o=h(!1),u=h({category:"",itemsText:"",defaultRating:null,defaultPlatforms:"",defaultGenre:""}),R=F(()=>{if(!u.value.itemsText||!u.value.itemsText.trim())return[];const p=u.value.itemsText.split(`
`).map(w=>w.trim()).filter(w=>w.length>0).map(w=>{const y=w.split("|").map(D=>D.trim());return{searchTerm:y[0]||"",additionalInfo:y[1]||null}});return c.value&&c.value.length>0?p.map((w,y)=>{const D=c.value[y];return{searchTerm:w.searchTerm,additionalInfo:w.additionalInfo,title:(D==null?void 0:D.title)||w.searchTerm,apiData:D||null,hasApiData:!!D}}):p.map(w=>({searchTerm:w.searchTerm,additionalInfo:w.additionalInfo,title:w.searchTerm,apiData:null,hasApiData:!1}))}),U=F(()=>u.value.category&&u.value.itemsText.trim()&&R.value&&R.value.length>0&&!o.value),C=()=>{e("close")},k=async()=>{if(!(!u.value.category||!u.value.itemsText||!u.value.itemsText.trim())){o.value=!0,r.value=0,c.value=[],t.value=null;try{const p=u.value.itemsText.split(`
`).map(y=>y.trim()).filter(y=>y.length>0).map(y=>y.split("|")[0].trim()),w=[];for(let y=0;y<p.length;y++){const D=p[y];r.value=Math.round((y+1)/p.length*100);try{const E=await Be.searchApi(D,u.value.category,1);if(E&&E.length>0){const a=E[0];w.push({title:a.title,release:a.release,rating:a.rating?Math.round(a.rating):null,platforms:a.platforms||u.value.defaultPlatforms,genre:a.genre||u.value.defaultGenre,link:a.link,path:a.image,external_id:a.id,api_source:a.api_source})}else w.push({title:D,release:null,rating:u.value.defaultRating,platforms:u.value.defaultPlatforms,genre:u.value.defaultGenre,link:null,path:null,external_id:null,api_source:null})}catch(E){console.warn(`Search failed for "${D}":`,E),w.push({title:D,release:null,rating:u.value.defaultRating,platforms:u.value.defaultPlatforms,genre:u.value.defaultGenre,link:null,path:null,external_id:null,api_source:null})}await new Promise(E=>setTimeout(E,200))}c.value=w||[]}catch(p){t.value="Failed to search API data: "+(p.message||"Unknown error"),console.error("API search error:",p)}finally{o.value=!1,r.value=100}}},A=async()=>{if(!(!U.value||!R.value)){l.value=!0,t.value=null;try{const p=R.value.map(w=>{const y=w.apiData;return{title:w.title,category:u.value.category,release:(y==null?void 0:y.release)||null,rating:(y==null?void 0:y.rating)||u.value.defaultRating||null,platforms:(y==null?void 0:y.platforms)||u.value.defaultPlatforms||null,genre:(y==null?void 0:y.genre)||u.value.defaultGenre||null,link:(y==null?void 0:y.link)||null,path:(y==null?void 0:y.path)||null,external_id:(y==null?void 0:y.external_id)||null,count:0,is_airing:!1,spielzeit:0}});e("save",p),u.value={category:"",itemsText:"",defaultRating:null,defaultPlatforms:"",defaultGenre:""},c.value=[]}catch(p){t.value=p.message||"Failed to add items",console.error("Bulk add error:",p)}finally{l.value=!1}}};return Z([()=>u.value.category,()=>u.value.itemsText],([p,w])=>{p&&w&&w.trim()&&!o.value&&setTimeout(()=>{u.value.category===p&&u.value.itemsText===w&&!o.value&&k()},1e3)}),Z(()=>n.show,p=>{p&&n.currentCategory?u.value.category=n.currentCategory:p||(u.value={category:"",itemsText:"",defaultRating:null,defaultPlatforms:"",defaultGenre:""},c.value=[],t.value=null,o.value=!1,r.value=0)}),{loading:l,error:t,bulkData:u,previewItems:R,canSave:U,closeModal:C,searchApiData:k,saveBulkItems:A,isSearching:o,searchProgress:r}}},_o={class:"modal-header"},Mo={class:"modal-body"},To={class:"bulk-add-form"},xo={class:"form-group"},Ao={class:"form-group"},Do={class:"form-group"},Ro={class:"form-group"},Fo={class:"form-group"},Po={key:0,class:"search-progress"},Uo={class:"progress-bar"},Bo={class:"progress-text"},Lo={key:1,class:"preview-section"},Eo={class:"preview-list"},No={class:"item-main"},Vo={class:"item-title"},Wo={key:0,class:"api-badge"},zo={key:1,class:"manual-badge"},Go={key:0,class:"item-info"},Oo={key:1,class:"item-details"},qo={key:0,class:"item-release"},jo={key:1,class:"item-rating"},Ho={key:2,class:"item-genre"},Ko={key:0,class:"preview-more"},Qo={class:"modal-footer"},Xo=["disabled"],Jo={key:0},Yo={key:1},Zo={key:2};function $o(n,e,l,t,r,c){return l.show?(i(),d("div",{key:0,class:"modal-overlay",onClick:e[9]||(e[9]=(...o)=>t.closeModal&&t.closeModal(...o))},[s("div",{class:"modal-content",onClick:e[8]||(e[8]=G(()=>{},["stop"]))},[s("div",_o,[e[10]||(e[10]=s("h2",null,"Bulk Add Items",-1)),s("button",{class:"close-btn",onClick:e[0]||(e[0]=(...o)=>t.closeModal&&t.closeModal(...o))},"✕")]),s("div",Mo,[s("div",To,[s("div",xo,[e[12]||(e[12]=s("label",{for:"category"},"Category *",-1)),T(s("select",{id:"category","onUpdate:modelValue":e[1]||(e[1]=o=>t.bulkData.category=o),required:""},[...e[11]||(e[11]=[Ge('<option value="" data-v-782abca6>Select Category</option><option value="game" data-v-782abca6>Game</option><option value="series" data-v-782abca6>Series</option><option value="movie" data-v-782abca6>Movie</option><option value="watchlist" data-v-782abca6>Watchlist</option>',5)])],512),[[ie,t.bulkData.category]])]),s("div",Ao,[e[13]||(e[13]=s("label",{for:"items-text"},"Items (one per line) *",-1)),T(s("textarea",{id:"items-text","onUpdate:modelValue":e[2]||(e[2]=o=>t.bulkData.itemsText=o),placeholder:`Enter items one per line, for example:
The Witcher 3
Cyberpunk 2077
Red Dead Redemption 2`,rows:"10",required:""},null,512),[[L,t.bulkData.itemsText]]),e[14]||(e[14]=s("small",{class:"help-text"},"Enter one item per line. The system will automatically search the API for each title and use the official names, images, and details. You can add additional info using: Title | Additional Info",-1))]),s("div",Do,[e[15]||(e[15]=s("label",{for:"default-rating"},"Default Rating",-1)),T(s("input",{id:"default-rating","onUpdate:modelValue":e[3]||(e[3]=o=>t.bulkData.defaultRating=o),type:"number",min:"0",max:"10",step:"0.1",placeholder:"Optional rating for all items"},null,512),[[L,t.bulkData.defaultRating,void 0,{number:!0}]])]),s("div",Ro,[e[16]||(e[16]=s("label",{for:"default-platforms"},"Default Platforms",-1)),T(s("input",{id:"default-platforms","onUpdate:modelValue":e[4]||(e[4]=o=>t.bulkData.defaultPlatforms=o),type:"text",placeholder:"e.g., PC, PS5, Xbox"},null,512),[[L,t.bulkData.defaultPlatforms]])]),s("div",Fo,[e[17]||(e[17]=s("label",{for:"default-genre"},"Default Genre",-1)),T(s("input",{id:"default-genre","onUpdate:modelValue":e[5]||(e[5]=o=>t.bulkData.defaultGenre=o),type:"text",placeholder:"e.g., Action, Adventure, RPG"},null,512),[[L,t.bulkData.defaultGenre]])])]),t.isSearching?(i(),d("div",Po,[s("div",Uo,[s("div",{class:"progress-fill",style:Le({width:t.searchProgress+"%"})},null,4)]),s("span",Bo,"Searching API for "+m(t.previewItems?t.previewItems.length:0)+" items... "+m(t.searchProgress)+"%",1)])):v("",!0),t.previewItems&&t.previewItems.length>0&&!t.isSearching?(i(),d("div",Lo,[s("h3",null,"Preview ("+m(t.previewItems.length)+" items)",1),s("div",Eo,[(i(!0),d($,null,ee(t.previewItems.slice(0,10),(o,u)=>(i(),d("div",{key:u,class:H(["preview-item",{"has-api-data":o.hasApiData}])},[s("div",No,[s("span",Vo,m(o.title),1),o.hasApiData?(i(),d("span",Wo,"✓ API")):(i(),d("span",zo,"Manual"))]),o.additionalInfo?(i(),d("div",Go," | "+m(o.additionalInfo),1)):v("",!0),o.apiData?(i(),d("div",Oo,[o.apiData.release?(i(),d("small",qo,m(o.apiData.release),1)):v("",!0),o.apiData.rating?(i(),d("small",jo,"⭐ "+m(o.apiData.rating),1)):v("",!0),o.apiData.genre?(i(),d("small",Ho,m(o.apiData.genre),1)):v("",!0)])):v("",!0)],2))),128)),t.previewItems&&t.previewItems.length>10?(i(),d("div",Ko," ... and "+m(t.previewItems.length-10)+" more items ",1)):v("",!0)])])):v("",!0)]),s("div",Qo,[s("button",{class:"btn btn-secondary",onClick:e[6]||(e[6]=(...o)=>t.closeModal&&t.closeModal(...o))},"Cancel"),s("button",{class:"btn btn-primary",onClick:e[7]||(e[7]=(...o)=>t.saveBulkItems&&t.saveBulkItems(...o)),disabled:!t.canSave||t.loading},[t.loading?(i(),d("span",Jo,"Adding "+m(t.previewItems?t.previewItems.length:0)+" items...",1)):t.isSearching?(i(),d("span",Yo,"Searching API...")):(i(),d("span",Zo,"Add "+m(t.previewItems?t.previewItems.length:0)+" Items",1))],8,Xo)])])])):v("",!0)}const es=V(Co,[["render",$o],["__scopeId","data-v-782abca6"]]),ts={name:"TxtImportModal",props:{show:{type:Boolean,default:!1}},emits:["close","fileProcessed"],methods:{handleFileUpload(n){const e=n.target.files[0];if(!e)return;if(!e.name.toLowerCase().endsWith(".txt")){alert("Bitte wählen Sie eine .txt Datei aus.");return}const l=new FileReader;l.onload=t=>{const r=t.target.result;this.$emit("fileProcessed",r)},l.readAsText(e,"UTF-8")}}},os={class:"file-upload-area"},ss={class:"modal-buttons"};function ls(n,e,l,t,r,c){return l.show?(i(),d("div",{key:0,class:"modal",onClick:e[3]||(e[3]=o=>n.$emit("close"))},[s("div",{class:"modal-content",onClick:e[2]||(e[2]=G(()=>{},["stop"]))},[e[5]||(e[5]=s("h2",null,"📄 Import from TXT File",-1)),e[6]||(e[6]=s("p",null,"Wählen Sie eine .txt Datei mit einer Liste von Titeln aus, um zu prüfen, welche Items in der aktuellen Kategorie fehlen.",-1)),s("div",os,[s("input",{type:"file",id:"txtFileInput",accept:".txt",onChange:e[0]||(e[0]=(...o)=>c.handleFileUpload&&c.handleFileUpload(...o)),style:{display:"none"}},null,32),e[4]||(e[4]=s("label",{for:"txtFileInput",class:"file-upload-label"},[s("span",{class:"upload-icon"},"📁"),s("span",{class:"upload-text"},"TXT-Datei auswählen"),s("span",{class:"upload-hint"},"Eine .txt Datei mit einer Liste von Titeln")],-1))]),s("div",ss,[s("button",{type:"button",onClick:e[1]||(e[1]=o=>n.$emit("close"))}," Cancel ")])])])):v("",!0)}const ns=V(ts,[["render",ls],["__scopeId","data-v-d761bd17"]]),as={name:"TxtImportResultsModal",props:{show:{type:Boolean,default:!1},results:{type:Object,default:null}},emits:["close"]},is={class:"results-summary"},rs={class:"summary-item"},ds={class:"summary-value"},cs={class:"summary-item"},us={class:"summary-value"},ms={class:"summary-item"},gs={class:"summary-value existing"},fs={class:"summary-item"},vs={class:"summary-value missing"},ys={key:0,class:"missing-items"},hs={class:"items-list"},ps={key:1,class:"existing-items"},ws={class:"items-list"},bs={class:"modal-buttons"};function Is(n,e,l,t,r,c){return l.show&&l.results?(i(),d("div",{key:0,class:"modal",onClick:e[2]||(e[2]=o=>n.$emit("close"))},[s("div",{class:"modal-content results-modal",onClick:e[1]||(e[1]=G(()=>{},["stop"]))},[e[7]||(e[7]=s("h2",null,"📊 TXT Import Ergebnisse",-1)),s("div",is,[s("div",rs,[e[3]||(e[3]=s("span",{class:"summary-label"},"Kategorie:",-1)),s("span",ds,m(l.results.categoryName),1)]),s("div",cs,[e[4]||(e[4]=s("span",{class:"summary-label"},"Titel in Datei:",-1)),s("span",us,m(l.results.totalInFile),1)]),s("div",ms,[e[5]||(e[5]=s("span",{class:"summary-label"},"Bereits vorhanden:",-1)),s("span",gs,m(l.results.existingItems.length),1)]),s("div",fs,[e[6]||(e[6]=s("span",{class:"summary-label"},"Fehlende Titel:",-1)),s("span",vs,m(l.results.missingItems.length),1)])]),l.results.missingItems.length>0?(i(),d("div",ys,[s("h3",null,"❌ Fehlende Titel ("+m(l.results.missingItems.length)+"):",1),s("div",hs,[(i(!0),d($,null,ee(l.results.missingItems,(o,u)=>(i(),d("div",{key:u,class:"missing-item"},m(o),1))),128))])])):v("",!0),l.results.existingItems.length>0?(i(),d("div",ps,[s("h3",null,"✅ Bereits vorhanden ("+m(l.results.existingItems.length)+"):",1),s("div",ws,[(i(!0),d($,null,ee(l.results.existingItems,(o,u)=>(i(),d("div",{key:u,class:"existing-item"},m(o),1))),128))])])):v("",!0),s("div",bs,[s("button",{type:"button",onClick:e[0]||(e[0]=o=>n.$emit("close"))}," Schließen ")])])])):v("",!0)}const Ss=V(as,[["render",Is],["__scopeId","data-v-ec385b83"]]),ks={name:"LoadingSpinner",props:{loading:{type:Boolean,default:!0},message:{type:String,default:"Loading..."}}},Cs={key:0,class:"loading-spinner"},_s={key:0};function Ms(n,e,l,t,r,c){return l.loading?(i(),d("div",Cs,[e[0]||(e[0]=s("div",{class:"spinner"},null,-1)),l.message?(i(),d("p",_s,m(l.message),1)):v("",!0)])):v("",!0)}const Ts=V(ks,[["render",Ms],["__scopeId","data-v-b6e4a334"]]),xs={name:"MessageBox",props:{show:{type:Boolean,default:!1},type:{type:String,default:"info",validator:n=>["success","error","warning","info"].includes(n)},title:{type:String,default:""},message:{type:String,required:!0},details:{type:String,default:""}},emits:["close"],setup(n,{emit:e}){const l=()=>{e("close")},t=F(()=>{switch(n.type){case"success":return"✅";case"error":return"❌";case"warning":return"⚠️";case"info":return"ℹ️";default:return"ℹ️"}}),r=F(()=>`message-${n.type}`);return{closeMessage:l,icon:t,messageType:r}}},As={class:"message-header"},Ds={class:"message-icon"},Rs={class:"message-title"},Fs={class:"message-body"},Ps={key:0,class:"message-details"},Us={class:"message-footer"};function Bs(n,e,l,t,r,c){return l.show?(i(),d("div",{key:0,class:"message-overlay",onClick:e[3]||(e[3]=(...o)=>t.closeMessage&&t.closeMessage(...o))},[s("div",{class:H(["message-box",t.messageType]),onClick:e[2]||(e[2]=G(()=>{},["stop"]))},[s("div",As,[s("span",Ds,m(t.icon),1),s("h3",Rs,m(l.title),1),s("button",{class:"close-btn",onClick:e[0]||(e[0]=(...o)=>t.closeMessage&&t.closeMessage(...o))},"✕")]),s("div",Fs,[s("p",null,m(l.message),1),l.details?(i(),d("div",Ps,[s("pre",null,m(l.details),1)])):v("",!0)]),s("div",Us,[s("button",{class:"btn btn-primary",onClick:e[1]||(e[1]=(...o)=>t.closeMessage&&t.closeMessage(...o))},"OK")])],2)])):v("",!0)}const Ls=V(xs,[["render",Bs],["__scopeId","data-v-b9a64791"]]),Es={name:"ConfirmDialog",props:{show:{type:Boolean,default:!1},title:{type:String,default:"Confirm Action"},message:{type:String,required:!0}},emits:["confirm","close"],setup(n,{emit:e}){const l=()=>{e("close")};return{closeDialog:l,confirmAction:()=>{e("confirm"),l()}}}},Ns={class:"confirm-header"},Vs={class:"confirm-title"},Ws={class:"confirm-body"},zs={class:"confirm-footer"};function Gs(n,e,l,t,r,c){return l.show?(i(),d("div",{key:0,class:"confirm-overlay",onClick:e[4]||(e[4]=(...o)=>t.closeDialog&&t.closeDialog(...o))},[s("div",{class:"confirm-dialog",onClick:e[3]||(e[3]=G(()=>{},["stop"]))},[s("div",Ns,[s("h3",Vs,m(l.title),1),s("button",{class:"close-btn",onClick:e[0]||(e[0]=(...o)=>t.closeDialog&&t.closeDialog(...o))},"✕")]),s("div",Ws,[s("p",null,m(l.message),1)]),s("div",zs,[s("button",{class:"btn btn-secondary",onClick:e[1]||(e[1]=(...o)=>t.closeDialog&&t.closeDialog(...o))},"Cancel"),s("button",{class:"btn btn-danger",onClick:e[2]||(e[2]=(...o)=>t.confirmAction&&t.confirmAction(...o))},"Confirm")])])])):v("",!0)}const Os=V(Es,[["render",Gs],["__scopeId","data-v-4e246554"]]),qs={name:"InputDialog",props:{show:{type:Boolean,default:!1},title:{type:String,default:"Input Required"},message:{type:String,required:!0},placeholder:{type:String,default:""},inputType:{type:String,default:"text"},defaultValue:{type:String,default:""}},emits:["confirm","close"],setup(n,{emit:e}){const l=h(""),t=h(null),r=()=>{e("close")},c=()=>{e("confirm",l.value),r()};return Z(()=>n.show,async o=>{o&&(l.value=n.defaultValue,await je(),t.value&&(t.value.focus(),t.value.select()))}),{inputValue:l,inputRef:t,closeDialog:r,confirmAction:c}}},js={class:"input-header"},Hs={class:"input-title"},Ks={class:"input-body"},Qs={class:"input-message"},Xs=["type","placeholder"],Js={class:"input-footer"};function Ys(n,e,l,t,r,c){return l.show?(i(),d("div",{key:0,class:"input-overlay",onClick:e[6]||(e[6]=(...o)=>t.closeDialog&&t.closeDialog(...o))},[s("div",{class:"input-dialog",onClick:e[5]||(e[5]=G(()=>{},["stop"]))},[s("div",js,[s("h3",Hs,m(l.title),1),s("button",{class:"close-btn",onClick:e[0]||(e[0]=(...o)=>t.closeDialog&&t.closeDialog(...o))},"✕")]),s("div",Ks,[s("p",Qs,m(l.message),1),T(s("input",{"onUpdate:modelValue":e[1]||(e[1]=o=>t.inputValue=o),type:l.inputType,placeholder:l.placeholder,class:"input-field",onKeyup:e[2]||(e[2]=qe((...o)=>t.confirmAction&&t.confirmAction(...o),["enter"])),ref:"inputRef"},null,40,Xs),[[Oe,t.inputValue]])]),s("div",Js,[s("button",{class:"btn btn-secondary",onClick:e[3]||(e[3]=(...o)=>t.closeDialog&&t.closeDialog(...o))},"Cancel"),s("button",{class:"btn btn-primary",onClick:e[4]||(e[4]=(...o)=>t.confirmAction&&t.confirmAction(...o))},"OK")])])])):v("",!0)}const Zs=V(qs,[["render",Ys],["__scopeId","data-v-9afbdbc1"]]),$s={name:"MediaLibrary",components:{MediaItem:yt,Sidebar:Ze,MainHeader:Ye,FloatingActionButton:St,LoginModal:Je,RegisterModal:Xe,EditModal:ko,BulkAddModal:es,TxtImportModal:ns,TxtImportResultsModal:Ss,LoadingSpinner:Ts,MessageBox:Ls,ConfirmDialog:Os,InputDialog:Zs},setup(){const n=Ke(),e=Ee(),l=Ne(),t=Ve(),{sidebarCollapsed:r,mobileSidebarOpen:c,showLoginModal:o,showRegisterModal:u,showEditModal:R,showFloatingMenu:U,showBulkAddModal:C,showTxtImportModal:k,showTxtImportResults:A,editingItem:p,gridColumns:w,sortBy:y,categories:D,txtImportResults:E,isLoggedIn:a,userName:b,currentCategory:_,searchQuery:P,categoryCounts:O,loading:z,error:re,paginatedMedia:de,platforms:ce,genres:ue,toggleSidebar:me,toggleMobileSidebar:ge,closeMobileSidebar:fe,setCategory:te,clearSearch:ve,togglePlatformFilter:ye,toggleGenreFilter:he,editItem:pe,closeEditModal:we,closeBulkAddModal:be,handleBulkAddItems:oe,handleSaveItem:se,handleDeleteItem:Ie,logout:Se,loadMedia:q,toggleFloatingMenu:ke,addNewItem:j,bulkAddItems:Ce,importFromTxt:_e,importFromAPI:Me,createCollection:Te,exportMediaCollection:xe,exportAsCSV:Ae,exportAsJSON:K,downloadFile:De,deleteAllInCategory:Re,getCategoryDisplayName:Fe,processTxtContent:le,closeTxtImportResults:ne}=$e(),ae=()=>{n.push("/statistics"),c.value=!1},Q=()=>{n.push("/calendar"),c.value=!1},g=()=>{n.push("/profile"),c.value=!1},f=B=>{te(B),j()},M=()=>{o.value=!1,u.value=!0},I=()=>{o.value=!1,q()},S=()=>{u.value=!1,q()};return He(async()=>{try{await q()}catch(B){console.error("Error during initialization:",B)}}),{sidebarCollapsed:r,mobileSidebarOpen:c,showLoginModal:o,showRegisterModal:u,showEditModal:R,showFloatingMenu:U,showBulkAddModal:C,showTxtImportModal:k,showTxtImportResults:A,editingItem:p,gridColumns:w,sortBy:y,categories:D,txtImportResults:E,isLoggedIn:a,userName:b,currentCategory:_,searchQuery:P,categoryCounts:O,loading:z,error:re,paginatedMedia:de,platforms:ce,genres:ue,toggleSidebar:me,toggleMobileSidebar:ge,closeMobileSidebar:fe,setCategory:te,clearSearch:ve,navigateToStatistics:ae,navigateToCalendar:Q,navigateToProfile:g,addItemFromSidebar:f,togglePlatformFilter:ye,toggleGenreFilter:he,editItem:pe,switchToRegister:M,handleLoginSuccess:I,handleRegisterSuccess:S,closeEditModal:we,closeBulkAddModal:be,handleBulkAddItems:oe,handleSaveItem:se,handleDeleteItem:Ie,logout:Se,loadMedia:q,toggleFloatingMenu:ke,addNewItem:j,bulkAddItems:Ce,importFromTxt:_e,importFromAPI:Me,createCollection:Te,exportMediaCollection:xe,exportAsCSV:Ae,exportAsJSON:K,downloadFile:De,deleteAllInCategory:Re,getCategoryDisplayName:Fe,processTxtContent:le,closeTxtImportResults:ne,messageStore:e,confirmStore:l,inputStore:t}}},el={class:"vue-app"},tl={class:"main-content"},ol={class:"content-area"},sl={key:1,class:"error"};function ll(n,e,l,t,r,c){const o=N("Sidebar"),u=N("MainHeader"),R=N("LoadingSpinner"),U=N("MediaItem"),C=N("LoginModal"),k=N("RegisterModal"),A=N("EditModal"),p=N("BulkAddModal"),w=N("TxtImportModal"),y=N("TxtImportResultsModal"),D=N("FloatingActionButton"),E=N("MessageBox"),a=N("ConfirmDialog"),b=N("InputDialog");return i(),d("div",el,[s("div",{class:H(["mobile-overlay",{show:t.mobileSidebarOpen}]),onClick:e[0]||(e[0]=(..._)=>t.closeMobileSidebar&&t.closeMobileSidebar(..._))},null,2),W(o,{collapsed:t.sidebarCollapsed,"mobile-open":t.mobileSidebarOpen,"is-logged-in":t.isLoggedIn,"user-name":t.userName,"current-category":t.currentCategory,"category-counts":t.categoryCounts,platforms:t.platforms,genres:t.genres,categories:t.categories,onToggle:t.toggleSidebar,onSetCategory:t.setCategory,onNavigateToStatistics:t.navigateToStatistics,onNavigateToCalendar:t.navigateToCalendar,onNavigateToProfile:t.navigateToProfile,onTogglePlatformFilter:t.togglePlatformFilter,onToggleGenreFilter:t.toggleGenreFilter,onAddItem:t.addItemFromSidebar,onShowLogin:e[1]||(e[1]=_=>t.showLoginModal=!0),onShowRegister:e[2]||(e[2]=_=>t.showRegisterModal=!0),onLogout:t.logout},null,8,["collapsed","mobile-open","is-logged-in","user-name","current-category","category-counts","platforms","genres","categories","onToggle","onSetCategory","onNavigateToStatistics","onNavigateToCalendar","onNavigateToProfile","onTogglePlatformFilter","onToggleGenreFilter","onAddItem","onLogout"]),s("div",tl,[W(u,{"search-query":t.searchQuery,"onUpdate:searchQuery":e[3]||(e[3]=_=>t.searchQuery=_),"grid-columns":t.gridColumns,"onUpdate:gridColumns":e[4]||(e[4]=_=>t.gridColumns=_),"sort-by":t.sortBy,"onUpdate:sortBy":e[5]||(e[5]=_=>t.sortBy=_),onToggleMobileSidebar:t.toggleMobileSidebar,onClearSearch:t.clearSearch},null,8,["search-query","grid-columns","sort-by","onToggleMobileSidebar","onClearSearch"]),s("main",ol,[t.loading?(i(),Y(R,{key:0,message:"Loading media data..."})):t.error?(i(),d("div",sl,[s("p",null,m(t.error),1),s("button",{onClick:e[6]||(e[6]=(..._)=>t.loadMedia&&t.loadMedia(..._))},"Retry")])):(i(),d("div",{key:2,class:"grid",style:Le({gridTemplateColumns:`repeat(${t.gridColumns}, 1fr)`})},[(i(!0),d($,null,ee(t.paginatedMedia,_=>(i(),Y(U,{key:_.id,item:_,onEdit:t.editItem},null,8,["item","onEdit"]))),128))],4))])]),t.showLoginModal?(i(),Y(C,{key:0,onClose:e[7]||(e[7]=_=>t.showLoginModal=!1),onSuccess:t.handleLoginSuccess,onSwitchToRegister:t.switchToRegister},null,8,["onSuccess","onSwitchToRegister"])):v("",!0),t.showRegisterModal?(i(),Y(k,{key:1,onClose:e[8]||(e[8]=_=>t.showRegisterModal=!1),onSuccess:t.handleRegisterSuccess},null,8,["onSuccess"])):v("",!0),t.showEditModal?(i(),Y(A,{key:2,item:t.editingItem,"current-category":t.currentCategory,onClose:t.closeEditModal,onSave:t.handleSaveItem,onDelete:t.handleDeleteItem},null,8,["item","current-category","onClose","onSave","onDelete"])):v("",!0),W(p,{show:t.showBulkAddModal,"current-category":t.currentCategory,onClose:t.closeBulkAddModal,onSave:t.handleBulkAddItems},null,8,["show","current-category","onClose","onSave"]),W(w,{show:t.showTxtImportModal,onClose:e[9]||(e[9]=_=>t.showTxtImportModal=!1),onFileProcessed:t.processTxtContent},null,8,["show","onFileProcessed"]),W(y,{show:t.showTxtImportResults,results:t.txtImportResults,onClose:t.closeTxtImportResults},null,8,["show","results","onClose"]),W(D,{"show-menu":t.showFloatingMenu,"show-delete-all":t.isLoggedIn&&t.currentCategory!=="all"&&t.categoryCounts[t.currentCategory]>0,"category-name":t.getCategoryDisplayName(t.currentCategory),"item-count":t.categoryCounts[t.currentCategory]||0,onToggleMenu:t.toggleFloatingMenu,onAddNewItem:t.addNewItem,onBulkAddItems:t.bulkAddItems,onImportFromTxt:t.importFromTxt,onImportFromApi:t.importFromAPI,onCreateCollection:t.createCollection,onDeleteAllInCategory:t.deleteAllInCategory},null,8,["show-menu","show-delete-all","category-name","item-count","onToggleMenu","onAddNewItem","onBulkAddItems","onImportFromTxt","onImportFromApi","onCreateCollection","onDeleteAllInCategory"]),W(E,{show:t.messageStore.show,type:t.messageStore.type,title:t.messageStore.title,message:t.messageStore.message,details:t.messageStore.details,onClose:t.messageStore.closeMessage},null,8,["show","type","title","message","details","onClose"]),W(a,{show:t.confirmStore.show,title:t.confirmStore.title,message:t.confirmStore.message,onConfirm:t.confirmStore.confirm,onClose:t.confirmStore.cancel},null,8,["show","title","message","onConfirm","onClose"]),W(b,{show:t.inputStore.show,title:t.inputStore.title,message:t.inputStore.message,placeholder:t.inputStore.placeholder,"input-type":t.inputStore.inputType,"default-value":t.inputStore.defaultValue,onConfirm:t.inputStore.confirm,onClose:t.inputStore.cancel},null,8,["show","title","message","placeholder","input-type","default-value","onConfirm","onClose"])])}const rl=V($s,[["render",ll],["__scopeId","data-v-7117637d"]]);export{rl as default};
