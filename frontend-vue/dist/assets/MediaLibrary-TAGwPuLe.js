import{A as Kt,d as We,r as k,w as Ee,c as F,m as re,u as Zt,a as He,_ as ae,b as f,e as s,f as S,F as te,g as se,t as p,n as z,o as g,h as ce,i as ve,j as le,k as Be,l as Xt,T as $t,p as Ge,q as Fe,s as A,v as E,x as st,y as we,z as ft,B as ht,C as Pe,D as Ye,E as es,G as ts,H as ss}from"./index-B5Fmfz4J.js";class as{constructor(){this.isConnected={value:!1},this.listeners=new Map,this.pollingInterval=null,this.lastUpdate=null,this.pollingIntervalMs=2e4}getApiBaseUrl(){return Kt.BASE_URL}connect(){if(this.pollingInterval)return;const e=localStorage.getItem("authToken"),o=localStorage.getItem("currentUser");!e||!o||(this.isConnected.value=!0,this.lastUpdate=new Date,this.pollingInterval=setInterval(()=>{this.checkForUpdates()},this.pollingIntervalMs))}async checkForUpdates(){try{const e=localStorage.getItem("authToken"),o=localStorage.getItem("currentUser");if(!e||!o)return;const t=this.getApiBaseUrl(),i=await fetch(`${t}/api/media`,{headers:{Authorization:`Bearer ${e}`,"Content-Type":"application/json"}});if(!i.ok){if(i.status===401){this.disconnect();return}throw new Error(`HTTP error! status: ${i.status}`)}const u=await i.json();u&&u.length>0&&this.listeners.forEach((d,m)=>{try{d({type:"media_updated",items:u,count:u.length,timestamp:new Date().toISOString()})}catch{}}),this.lastUpdate=new Date}catch{}}addListener(e,o){this.listeners.set(e,o)}removeListener(e){this.listeners.delete(e)}disconnect(){this.pollingInterval&&(clearInterval(this.pollingInterval),this.pollingInterval=null),this.isConnected.value=!1}destroy(){this.disconnect(),this.listeners.clear()}}const et=new as,qe=We("media",()=>{const n=()=>{try{return localStorage.getItem("currentCategory")||"game"}catch(l){return console.error("Failed to load current category from localStorage:",l),"game"}},e=l=>{try{localStorage.setItem("currentCategory",l)}catch(r){console.error("Failed to save current category to localStorage:",r)}},o=()=>{try{return localStorage.getItem("searchQuery")||""}catch(l){return console.error("Failed to load search query from localStorage:",l),""}},t=l=>{try{localStorage.setItem("searchQuery",l)}catch(r){console.error("Failed to save search query to localStorage:",r)}},i=k(c()),u=k(n()),d=k(o()),m=k(null),h=k([]),_=k([]),T=k(!1),I=k(null),D=k(!1);Ee(u,l=>{e(l)},{immediate:!1}),Ee(d,l=>{t(l)},{immediate:!1});function c(){try{const l=localStorage.getItem("authToken"),r=localStorage.getItem("currentUser");if(!l||!r){const y=localStorage.getItem("mediaData");return y?JSON.parse(y):[]}return[]}catch(l){return console.error("Failed to load media from storage:",l),[]}}function V(){try{const l=localStorage.getItem("authToken"),r=localStorage.getItem("currentUser");(!l||!r)&&localStorage.setItem("mediaData",JSON.stringify(i.value))}catch(l){console.error("Failed to save media to storage:",l)}}const oe=F(()=>i.value.length),H=F(()=>{const l={};return i.value.forEach(r=>{const y=r.category||"unknown";l[y]=(l[y]||0)+1}),l}),me=F(()=>{let l=[...i.value];if(u.value&&u.value!=="all"&&(l=l.filter(r=>u.value==="watchlist"?r.category==="watchlist"||r.isNew===!0:r.category===u.value)),h.value&&h.value.length>0&&(l=l.filter(r=>{if(!r.genre)return!1;const y=r.genre.split(",").map(a=>a.trim().toLowerCase());return h.value.some(a=>y.some(w=>w.includes(a.toLowerCase())))})),_.value&&_.value.length>0&&(l=l.filter(r=>{if(!r.genre)return!0;const y=r.genre.split(",").map(a=>a.trim().toLowerCase());return!_.value.some(a=>y.some(w=>w.includes(a.toLowerCase())))})),d.value){const r=d.value.toLowerCase();l=l.filter(y=>{var a,w,C,G;return((a=y.title)==null?void 0:a.toLowerCase().includes(r))||((w=y.description)==null?void 0:w.toLowerCase().includes(r))||((C=y.genre)==null?void 0:C.toLowerCase().includes(r))||((G=y.platforms)==null?void 0:G.toLowerCase().includes(r))})}return l});async function Z(){var l,r;T.value=!0,I.value=null;try{const y=localStorage.getItem("authToken"),a=localStorage.getItem("currentUser");if(y&&a)try{const w=await re.getMedia();i.value=w||[]}catch(w){console.warn("API load failed for logged in user:",w),i.value=[]}else{const w=c();if(w.length>0)i.value=w;else{const C=await re.getMedia();i.value=C||[],V()}}}catch(y){I.value=((r=(l=y.response)==null?void 0:l.data)==null?void 0:r.message)||y.message||"Failed to load media data",console.error("Failed to load media:",y)}finally{T.value=!1}}function ue(l){u.value=l}function v(l){d.value=l}function N(l){m.value=l}function X(){m.value=null}function Te(l){h.value=l}function Me(){h.value=[]}function ie(l){_.value=l}function ke(){_.value=[]}function Se(l){const r=[..._.value],y=r.indexOf(l);y>-1?r.splice(y,1):r.push(l),_.value=r}function $(){D.value=!D.value}function O(l){D.value=l}async function K(l,r){try{const y=localStorage.getItem("authToken"),a=localStorage.getItem("currentUser");if(y&&a)try{await re.updateMediaItem(l,{personal_rating:r});const w=i.value.findIndex(C=>C.id===l);return w!==-1&&(i.value[w].personal_rating=r),!0}catch(w){throw console.error("API rating update failed:",w),w}else{const w=i.value.findIndex(C=>C.id===l);if(w!==-1)return i.value[w].personal_rating=r,V(),!0;throw new Error("Media item not found")}}catch(y){throw console.error("Failed to update rating:",y),y}}async function Q(l,r=!1){var y,a,w;I.value=null;try{const C=localStorage.getItem("authToken"),G=localStorage.getItem("currentUser");if(C&&G)try{const ne=await re.addMediaItem(l);if(!r)await Z();else{const de={...ne,__order:i.value.length};i.value.push(de)}return ne}catch(ne){if(((y=ne.response)==null?void 0:y.status)===409&&((w=(a=ne.response)==null?void 0:a.data)!=null&&w.duplicate)){const de=new Error(ne.response.data.error||"Ein Eintrag mit diesem Titel und dieser Kategorie existiert bereits.");throw de.isDuplicate=!0,de}throw I.value=ne.message||"Failed to add media item",console.error("API save failed for logged in user:",ne),ne}else{const ne={id:Date.now(),...l,__order:i.value.length};return i.value.push(ne),V(),ne}}catch(C){throw C}}async function fe(l,r){I.value=null,console.log("üîç ULTRA DEBUG - Store updateMediaItem called with:",{id:l,watchlist_release_date:r.watchlist_release_date,next_season_release:r.next_season_release,watchlist_number:r.watchlist_number,is_airing:r.is_airing,type_watchlist:typeof r.watchlist_release_date,type_next:typeof r.next_season_release,type_watchlist_number:typeof r.watchlist_number,is_null_watchlist:r.watchlist_release_date===null,is_null_next:r.next_season_release===null,is_null_watchlist_number:r.watchlist_number===null,is_undefined_watchlist:r.watchlist_release_date===void 0,is_undefined_next:r.next_season_release===void 0,is_undefined_watchlist_number:r.watchlist_number===void 0,is_empty_watchlist:r.watchlist_release_date==="",is_empty_next:r.next_season_release==="",is_empty_watchlist_number:r.watchlist_number==="",FULL_ITEM_DATA:r});try{const y=localStorage.getItem("authToken"),a=localStorage.getItem("currentUser");if(y&&a)try{console.log("üîç ULTRA DEBUG - Store calling API updateMediaItem with:",{id:l,watchlist_release_date:r.watchlist_release_date,next_season_release:r.next_season_release,watchlist_number:r.watchlist_number,type_watchlist:typeof r.watchlist_release_date,type_next:typeof r.next_season_release,type_watchlist_number:typeof r.watchlist_number,is_null_watchlist:r.watchlist_release_date===null,is_null_next:r.next_season_release===null,is_null_watchlist_number:r.watchlist_number===null,is_undefined_watchlist:r.watchlist_release_date===void 0,is_undefined_next:r.next_season_release===void 0,is_undefined_watchlist_number:r.watchlist_number===void 0,FULL_ITEM_DATA:r});const w=await re.updateMediaItem(l,r);return console.log("üîç COMPREHENSIVE DEBUG - Store API updateMediaItem returned:",w),await Z(),w}catch(w){throw console.error("API update failed for logged in user:",w),w}else{const w=i.value.findIndex(C=>C.id===l);if(w!==-1)return i.value[w]={...i.value[w],...r},V(),i.value[w];throw new Error("Media item not found")}}catch(y){throw y.isDuplicate||(I.value=y.message||"Failed to update media item"),y}}async function he(l){var r;try{const y=localStorage.getItem("authToken"),a=localStorage.getItem("currentUser");if(y&&a)try{return await re.deleteMediaItem(l),await Z(),!0}catch(w){if(((r=w.response)==null?void 0:r.status)===404||w.isNotFound)return await Z(),!0;throw console.error("API delete failed for logged in user:",w),w}else{const w=i.value.findIndex(C=>C.id===l);if(w!==-1)return i.value.splice(w,1),V(),!0;throw new Error("Media item not found")}}catch(y){throw I.value=y.message||"Failed to delete media item",y}}async function ye(l){try{const r=localStorage.getItem("authToken"),y=localStorage.getItem("currentUser");if(r&&y)try{const a=await re.batchAddMediaItems(l);return await Z(),a}catch(a){throw console.error("API batch add failed for logged in user:",a),a}else{const a=l.map((w,C)=>({id:Date.now()+C,...w,__order:i.value.length+C}));return i.value.push(...a),V(),{success:!0,stats:{created:a.length,failed:0,errors:[]}}}}catch(r){throw I.value=r.message||"Failed to add media items",r}}async function xe(l){try{const r=localStorage.getItem("authToken"),y=localStorage.getItem("currentUser");if(r&&y)try{return await re.batchDeleteMediaItems(l),await Z(),!0}catch(a){if(a.silent)return console.log("Silent batch delete error (some items may not exist):",a.message),await Z(),!0;throw console.error("API batch delete failed for logged in user:",a),a}else return i.value=i.value.filter(a=>!l.includes(a.id)),V(),!0}catch(r){throw r.silent||(I.value=r.message||"Failed to delete media items"),r}}async function Ie(){try{const l=localStorage.getItem("authToken"),r=localStorage.getItem("currentUser");l&&r?await re.saveMedia(i.value):V()}catch(l){console.error("Failed to save media:",l)}}function pe(){I.value=null}function Ce(l){if(console.log("Processing real-time update:",l),l.type==="media_updated"&&l.items)l.items.forEach(r=>{const y=i.value.findIndex(a=>a.id===r.id);y!==-1?i.value[y]={...i.value[y],...r}:i.value.push(r)});else if(l.action==="created"||l.action==="updated"){const r=l.item,y=i.value.findIndex(a=>a.id===r.id);y!==-1?i.value[y]={...i.value[y],...r}:i.value.push(r)}else if(l.action==="deleted"){const r=i.value.findIndex(y=>y.id===l.id);r!==-1&&i.value.splice(r,1)}V()}function ge(){const l=localStorage.getItem("authToken"),r=localStorage.getItem("currentUser");if(!l||!r){console.log("Skipping realtime initialization - user not authenticated");return}try{et.addListener("media-store",Ce),et.connect()}catch(y){console.error("Failed to initialize realtime updates:",y)}}function De(){et.removeListener("media-store")}return{mediaData:i,currentCategory:u,searchQuery:d,selectedGenre:m,selectedGenres:h,excludedGenres:_,loading:T,error:I,editMode:D,totalItems:oe,categoryCounts:H,filteredMedia:me,loadMedia:Z,setCategory:ue,setSearchQuery:v,setGenre:N,clearGenre:X,setGenres:Te,clearGenres:Me,setExcludedGenres:ie,clearExcludedGenres:ke,toggleGenreExclude:Se,toggleEditMode:$,setEditMode:O,updateItemRating:K,addMediaItem:Q,updateMediaItem:fe,deleteMediaItem:he,batchAddMediaItems:ye,batchDeleteMediaItems:xe,saveMedia:Ie,clearError:pe,initializeRealtimeUpdates:ge,cleanupRealtimeUpdates:De,resetMediaState:()=>{u.value="game",d.value="",localStorage.removeItem("currentCategory"),localStorage.removeItem("searchQuery")}}}),pt=We("message",()=>{const n=k(!1),e=k("info"),o=k(""),t=k(""),i=k("");function u(I){e.value=I.type||"info",o.value=I.title||"",t.value=I.message||"",i.value=I.details||"",n.value=!0}function d(I,D="Success",c=""){u({type:"success",title:D,message:I,details:c})}function m(I,D="Error",c=""){u({type:"error",title:D,message:I,details:c})}function h(I,D="Warning",c=""){u({type:"warning",title:D,message:I,details:c})}function _(I,D="Info",c=""){u({type:"info",title:D,message:I,details:c})}function T(){n.value=!1,setTimeout(()=>{e.value="info",o.value="",t.value="",i.value=""},300)}return{show:n,type:e,title:o,message:t,details:i,showMessage:u,showSuccess:d,showError:m,showWarning:h,showInfo:_,closeMessage:T}}),vt=We("confirm",()=>{const n=k(!1),e=k("Confirm Action"),o=k(""),t=k(null);function i(m){return new Promise(h=>{e.value=m.title||"Confirm Action",o.value=m.message||"",n.value=!0,t.value=h})}function u(){t.value&&(t.value(!0),t.value=null),n.value=!1}function d(){t.value&&(t.value(!1),t.value=null),n.value=!1}return{show:n,title:e,message:o,showConfirm:i,confirm:u,cancel:d}}),yt=We("input",()=>{const n=k(!1),e=k("Input Required"),o=k(""),t=k(""),i=k("text"),u=k(""),d=k(null);function m(T){return new Promise(I=>{e.value=T.title||"Input Required",o.value=T.message||"",t.value=T.placeholder||"",i.value=T.inputType||"text",u.value=T.defaultValue||"",n.value=!0,d.value=I})}function h(T){d.value&&(d.value(T),d.value=null),n.value=!1}function _(){d.value&&(d.value(null),d.value=null),n.value=!1}return{show:n,title:e,message:o,placeholder:t,inputType:i,defaultValue:u,showInput:m,confirm:h,cancel:_}}),bt=We("sidebar",()=>{const n=()=>{try{const c=localStorage.getItem("sidebarState");if(c)return{collapsed:JSON.parse(c).collapsed||!1,mobileOpen:!1}}catch(c){console.error("Failed to load sidebar state from localStorage:",c)}return{collapsed:!1,mobileOpen:!1}},e=c=>{try{localStorage.setItem("sidebarState",JSON.stringify({collapsed:c.collapsed}))}catch(V){console.error("Failed to save sidebar state to localStorage:",V)}},o=n(),t=k(o.collapsed),i=k(o.mobileOpen);Ee(t,c=>{e({collapsed:c,mobileOpen:i.value})},{immediate:!1});const u=()=>{t.value=!t.value},d=()=>{i.value=!i.value},m=()=>{i.value=!1},h=c=>{t.value=c},_=c=>{i.value=c},T=()=>{t.value=!1,i.value=!1,localStorage.removeItem("sidebarState")},I=F(()=>t.value),D=F(()=>i.value);return{collapsed:t,mobileOpen:i,toggleSidebar:u,toggleMobileSidebar:d,closeMobileSidebar:m,setCollapsed:h,setMobileOpen:_,resetSidebarState:T,isCollapsed:I,isMobileOpen:D}});function os(){const n=Zt(),e=He(),o=qe(),t=pt(),i=vt(),u=yt(),d=k(!1),m=k(!1),h=k(!1),_=k(!1),T=k(!1),I=k(!1),D=k(!1),c=k(null),V=()=>typeof window<"u"?window.innerWidth>768?8:3:8,oe=k(V()),me=k(typeof window<"u"&&localStorage.getItem("mediaLibrary_sortBy")||"order_asc"),Z=k(null),ue=x=>{const M=x.watchlist_release_date?new Date(x.watchlist_release_date):x.release?new Date(x.release):null;if(!M)return 1/0;const J=new Date,U=M.getTime()-J.getTime();return Math.ceil(U/(1e3*3600*24))},v=()=>{oe.value=V()};typeof window<"u"&&window.addEventListener("resize",v);const N=[{key:"game",name:"Games",icon:"üéÆ"},{key:"series",name:"Series",icon:"üì∫"},{key:"movie",name:"Movies",icon:"üé¨"},{key:"buecher",name:"B√ºcher",icon:"üìö"},{key:"watchlist",name:"Watchlist",icon:"‚ù§Ô∏è"}],X=F(()=>{try{return e.isLoggedIn}catch(x){return console.error("Error accessing authStore.isLoggedIn:",x),!1}}),Te=F(()=>{try{return e.userName}catch(x){return console.error("Error accessing authStore.userName:",x),""}}),Me=F(()=>{try{return e.isAdmin}catch(x){return console.error("Error accessing authStore.isAdmin:",x),!1}}),ie=F(()=>{try{return o.currentCategory}catch(x){return console.error("Error accessing mediaStore.currentCategory:",x),"game"}}),ke=F({get:()=>{try{return o.searchQuery}catch(x){return console.error("Error accessing mediaStore.searchQuery:",x),""}},set:x=>{try{o.setSearchQuery(x)}catch(M){console.error("Error setting mediaStore.searchQuery:",M)}}}),Se=F(()=>{try{return o.categoryCounts}catch(x){return console.error("Error accessing mediaStore.categoryCounts:",x),{}}}),$=F(()=>{try{return o.excludedGenres}catch(x){return console.error("Error accessing mediaStore.excludedGenres:",x),[]}}),O=F(()=>{try{return o.loading}catch(x){return console.error("Error accessing mediaStore.loading:",x),!1}}),K=F(()=>{try{return o.error}catch(x){return console.error("Error accessing mediaStore.error:",x),null}}),Q=F(()=>{try{const x=[...o.filteredMedia||[]],[M,J]=me.value.split("_");return x.sort((U,L)=>{let Y=U[M],W=L[M];return M==="order"?(Y=U.__order||0,W=L.__order||0):M==="airing"?(Y=U.is_airing?1:0,W=L.is_airing?1:0):M==="api_rating"?(Y=U.api_rating||U.rating||0,W=L.api_rating||L.rating||0):M==="personal_rating"?(Y=U.personal_rating||0,W=L.personal_rating||0):M==="release"?(Y=U.release?new Date(U.release).getTime():0,W=L.release?new Date(L.release).getTime():0):M==="title"?(Y=U.title||"",W=L.title||""):M==="days_left"&&(Y=ue(U),W=ue(L)),Y==null&&(Y=0),W==null&&(W=0),typeof Y=="string"&&(Y=Y.toLowerCase(),W=W.toLowerCase()),J==="asc"?Y>W?1:-1:Y<W?1:-1})}catch(x){return console.error("Error in sortedMedia computed:",x),[]}}),fe=F(()=>Q.value),he=x=>{o.setCategory(x),bt().closeMobileSidebar()},ye=()=>{o.setSearchQuery("")},xe=x=>{me.value=x,typeof window<"u"&&localStorage.setItem("mediaLibrary_sortBy",x)},Ie=x=>{c.value=x,h.value=!0},pe=()=>{h.value=!1,c.value=null},Ce=()=>{T.value=!1},ge=async x=>{console.log("handleBulkAddItems called but not used in new workflow")},De=async x=>{c.value?await o.updateMediaItem(c.value.id,x):await o.addMediaItem(x),pe()},Ae=async x=>{var M;try{await o.deleteMediaItem(x.id)}catch(J){((M=J.response)==null?void 0:M.status)!==404&&!J.silent&&(console.error("Delete failed:",J),t.showError("Failed to delete item: "+(J.message||"Unknown error"),"Delete Failed"))}},l=async()=>{await e.logout(),await r()},r=async()=>{try{await o.loadMedia()}catch(x){console.error("Error loading media:",x)}},y=()=>{_.value=!_.value},a=()=>{if(_.value=!1,!X.value){t.showWarning("Bitte loggen Sie sich ein, um neue Items hinzuzuf√ºgen.","Login erforderlich");return}c.value=null,h.value=!0},w=()=>{if(_.value=!1,!X.value){t.showWarning("Bitte loggen Sie sich ein, um diese Funktion zu nutzen.","Login erforderlich");return}T.value=!0},C=()=>{if(_.value=!1,!X.value){t.showWarning("Bitte loggen Sie sich ein, um diese Funktion zu nutzen.","Login erforderlich");return}I.value=!0},G=()=>{if(_.value=!1,!X.value){t.showWarning("Bitte loggen Sie sich ein, um diese Funktion zu nutzen.","Login erforderlich");return}t.showInfo("API Import feature coming soon!","Feature in Entwicklung")},ne=()=>{if(_.value=!1,!X.value){t.showWarning("Bitte loggen Sie sich ein, um diese Funktion zu nutzen.","Login erforderlich");return}Ve()},de=x=>{if(!x)return"Unknown";const M=N.find(J=>J.key===x);return M?M.name:x},Qe=async()=>{const x=de(ie.value),M=Se.value[ie.value]||0;if(M===0){t.showInfo("No items to delete in this category.","Nothing to Delete");return}const J=`Are you sure you want to delete ALL ${M} items in "${x}"?

This action cannot be undone!`;if(await i.showConfirm({title:"Delete All Items",message:J}))try{const Y=((o==null?void 0:o.mediaData)||[]).filter(W=>ie.value==="watchlist"?W.category==="watchlist"||W.isNew===!0:W.category===ie.value).map(W=>W.id);await o.batchDeleteMediaItems(Y),await r(),t.showSuccess(`Successfully deleted ${M} items from "${x}"`,"Items Deleted")}catch(L){console.error("Error deleting items:",L),L.silent?t.showSuccess(`Items deleted from "${x}" (some items may not have existed)`,"Items Deleted"):L.isNotFound?t.showWarning("Some items were not found and could not be deleted, but the operation completed.","Partial Success"):t.showError("Error occurred while deleting items. Please try again.","Delete Failed")}},Je=x=>{const M=x.split(`
`).map(W=>W.trim()).filter(W=>W.length>0);if(M.length===0){t.showWarning("Die TXT-Datei ist leer oder enth√§lt keine g√ºltigen Eintr√§ge.","Leere Datei");return}const U=o.filteredMedia.map(W=>W.title.toLowerCase().trim()),L=M.filter(W=>{const Ue=W.toLowerCase().trim();return!U.some(be=>be.includes(Ue)||Ue.includes(be))}),Y=M.filter(W=>{const Ue=W.toLowerCase().trim();return U.some(be=>be.includes(Ue)||Ue.includes(be))});Z.value={totalInFile:M.length,missingItems:L,existingItems:Y,currentCategory:ie.value,categoryName:de(ie.value)},I.value=!1,D.value=!0},Ke=()=>{Z.value=null,D.value=!1},Ve=async()=>{const x=(o==null?void 0:o.mediaData)||[];if(x.length===0){t.showInfo("Keine Media Items zum Exportieren gefunden.","Nichts zu exportieren");return}const M=await u.showInput({title:"Export Format w√§hlen",message:`1 = CSV
2 = JSON
3 = Beide

Geben Sie die Nummer ein:`,placeholder:"1",defaultValue:"1"});if(!M||!["1","2","3"].includes(M))return;const J=new Date().toISOString().split("T")[0];(M==="1"||M==="3")&&Oe(x,J),(M==="2"||M==="3")&&Le(x,J),t.showSuccess(`Collection mit ${x.length} Items wurde erfolgreich exportiert!`,"Export erfolgreich")},Oe=(x,M)=>{const U=[["Titel","Kategorie","Release","Rating","Platforms","Genre","Spielzeit","Status","Beschreibung"].join(","),...x.map(L=>[`"${(L.title||"").replace(/"/g,'""')}"`,`"${(L.category||L.category_name||"Unbekannt").replace(/"/g,'""')}"`,`"${L.release||""}"`,`"${L.rating||""}"`,`"${(L.platforms||"").replace(/"/g,'""')}"`,`"${(L.genre||"").replace(/"/g,'""')}"`,`"${L.spielzeit||""}"`,`"${L.isAiring?"Airing":"Abgeschlossen"}"`,`"${(L.description||"").replace(/"/g,'""')}"`].join(","))].join(`
`);Ne(U,`media_collection_${M}.csv`,"text/csv;charset=utf-8;")},Le=(x,M)=>{const J={exportDate:new Date().toISOString(),totalItems:x.length,categories:[...new Set(x.map(U=>U.category||U.category_name||"Unbekannt"))],items:x.map(U=>({id:U.id,title:U.title||"",category:U.category||U.category_name||"Unbekannt",release:U.release||"",rating:U.rating||null,platforms:U.platforms||"",genre:U.genre||"",spielzeit:U.spielzeit||null,status:U.isAiring?"Airing":"Abgeschlossen",description:U.description||"",isNew:U.isNew||!1,nextSeason:U.nextSeason||null,discovered:U.discovered||null}))};Ne(JSON.stringify(J,null,2),`media_collection_${M}.json`,"application/json;charset=utf-8;")},Ne=(x,M,J)=>{const U=new Blob([x],{type:J}),L=document.createElement("a"),Y=URL.createObjectURL(U);L.setAttribute("href",Y),L.setAttribute("download",M),L.style.visibility="hidden",document.body.appendChild(L),L.click(),document.body.removeChild(L),URL.revokeObjectURL(Y)};return{showLoginModal:d,showRegisterModal:m,showEditModal:h,showFloatingMenu:_,showBulkAddModal:T,showTxtImportModal:I,showTxtImportResults:D,editingItem:c,gridColumns:oe,sortBy:me,categories:N,txtImportResults:Z,isLoggedIn:X,isAdmin:Me,userName:Te,currentCategory:ie,searchQuery:ke,categoryCounts:Se,excludedGenres:$,loading:O,error:K,paginatedMedia:fe,setCategory:he,clearSearch:ye,updateSortBy:xe,editItem:Ie,closeEditModal:pe,closeBulkAddModal:Ce,handleBulkAddItems:ge,handleSaveItem:De,handleDeleteItem:Ae,logout:l,loadMedia:r,toggleFloatingMenu:y,addNewItem:a,bulkAddItems:w,importFromTxt:C,importFromAPI:G,createCollection:ne,exportMediaCollection:Ve,exportAsCSV:Oe,exportAsJSON:Le,downloadFile:Ne,deleteAllInCategory:Qe,getCategoryDisplayName:de,navigateToCalendar:()=>{he("calendar")},navigateToProfile:()=>{he("profile")},navigateToAdmin:()=>{console.log("üî• navigateToAdmin function called!"),console.log("üî• Router object:",n),console.log("üî• Pushing to /admin...");try{n.push("/admin"),console.log("üî• Successfully navigated to /admin!")}catch(x){console.error("üî• Error navigating to admin:",x)}},processTxtContent:Je,closeTxtImportResults:Ke,cleanup:()=>{typeof window<"u"&&window.removeEventListener("resize",v)},router:n}}const ns={name:"StarRating",props:{rating:{type:Number,default:0},editMode:{type:Boolean,default:!1},itemId:{type:[Number,String],required:!0}},emits:["rating-changed"],data(){return{currentRating:this.rating||0,hoverRating:0}},watch:{rating(n){this.currentRating=n||0}},methods:{handleStarClick(n){this.editMode&&(this.currentRating=n,this.showSuccessAnimation(),this.$emit("rating-changed",{itemId:this.itemId,rating:n}))},showSuccessAnimation(){const n=document.createElement("div");n.innerHTML="‚úì",n.style.cssText=`
        position: fixed;
        top: 50%;
        left: 50%;
        transform: translate(-50%, -50%);
        background: #4CAF50;
        color: white;
        padding: 8px 12px;
        border-radius: 50%;
        font-size: 16px;
        font-weight: bold;
        z-index: 10000;
        animation: successPulse 0.6s ease-out;
        pointer-events: none;
      `;const e=document.createElement("style");e.textContent=`
        @keyframes successPulse {
          0% { transform: translate(-50%, -50%) scale(0); opacity: 0; }
          50% { transform: translate(-50%, -50%) scale(1.2); opacity: 1; }
          100% { transform: translate(-50%, -50%) scale(1); opacity: 0; }
        }
      `,document.head.appendChild(e),document.body.appendChild(n),setTimeout(()=>{document.body.removeChild(n),document.head.removeChild(e)},600)},handleMouseEnter(n){this.editMode&&(this.hoverRating=n)},handleMouseLeave(){this.editMode&&(this.hoverRating=0)},clearRating(){this.editMode&&(this.currentRating=0,this.$emit("rating-changed",{itemId:this.itemId,rating:0}))}}},is={class:"stars-container"},ls=["onClick","onMouseenter","disabled","title"],rs={class:"star-number"},ds={key:0,class:"rating-info"},cs={class:"rating-text"};function us(n,e,o,t,i,u){return g(),f("div",{class:z(["star-rating",{"edit-mode":o.editMode}])},[s("div",is,[(g(),f(te,null,se(10,d=>s("button",{key:d,class:z(["star",{filled:d<=i.currentRating,hover:d<=i.hoverRating,"edit-mode":o.editMode}]),onClick:m=>u.handleStarClick(d),onMouseenter:m=>u.handleMouseEnter(d),onMouseleave:e[0]||(e[0]=(...m)=>u.handleMouseLeave&&u.handleMouseLeave(...m)),disabled:!o.editMode,title:o.editMode?`Rate ${d}/10`:`Current rating: ${i.currentRating}/10`},[e[2]||(e[2]=s("span",{class:"star-icon"},"‚òÖ",-1)),s("span",rs,p(d),1)],42,ls)),64))]),o.editMode&&i.currentRating>0?(g(),f("div",ds,[s("span",cs,p(i.currentRating)+"/10",1),s("button",{class:"clear-rating",onClick:e[1]||(e[1]=(...d)=>u.clearRating&&u.clearRating(...d)),title:"Clear rating"}," ‚úï ")])):S("",!0)],2)}const ms=ae(ns,[["render",us],["__scopeId","data-v-b5a8c120"]]),gs={name:"MediaItem",components:{StarRating:ms},props:{item:{type:Object,required:!0},editMode:{type:Boolean,default:!1}},emits:["edit","watchlist-toggled","show-message","rating-changed"],computed:{showWatchlistTag(){return this.item.category==="watchlist"||this.item.isNew===!0},isWatchlistItem(){return this.item.category==="watchlist"||this.item.isNew===!0},isSeries(){return this.item.category==="series"||this.item.watchlist_type==="series"},isInWatchlist(){return this.item.category==="watchlist"?!0:this.item.is_in_watchlist||!1},shouldShowHeartButton(){return this.isSeries}},methods:{getImageUrl(n){return n?n.startsWith("http")?n.startsWith("http://")?n.replace("http://","https://"):n:n.startsWith("/")?n:n.startsWith("storage/")?`/${n}`:`/${n}`:""},handleImageError(n){var e;n.target.style.display="none",(e=n.target.nextElementSibling)==null||e.classList.add("show")},formatDate(n){return n?new Date(n).toLocaleDateString():""},editItem(){this.editMode||this.$emit("edit",this.item)},handleRatingChanged(n){this.$emit("rating-changed",n)},openExtraLink(){this.item.extra_link&&window.open(this.item.extra_link,"_blank","noopener,noreferrer")},getStatusIcon(){switch(this.item.series_status){case"Ended":return"‚úÖ";case"Canceled":return"‚ùå";case"In Production":return"üîß";default:return"üì∫"}},getDaysLeftText(){if(!this.item.next_season_release)return"";const n=new Date(this.item.next_season_release),e=new Date,o=n.getTime()-e.getTime(),t=Math.ceil(o/(1e3*3600*24));return t>0?`${t} day${t>1?"s":""} left`:t===0?"Airs today!":`Aired ${Math.abs(t)} day${Math.abs(t)>1?"s":""} ago`},handleHeartClick(){console.log("üíñ Heart button clicked!"),console.log("üíñ Button visible:",this.isSeries&&this.item.is_airing),console.log("üíñ Series check:",this.isSeries),console.log("üíñ Airing check:",this.item.is_airing),this.toggleToWatchlist()},async toggleToWatchlist(){var n;try{console.log("üíñ Toggling series to watchlist:",this.item.title),console.log("üíñ Item details:",{id:this.item.id,title:this.item.title,category:this.item.category,is_airing:this.item.is_airing}),this.showHeartLoading();const e=await re.toggleSeriesToWatchlist(this.item.id);e.success?(console.log("üíñ Watchlist toggle successful:",e),this.showHeartSuccess(),this.$emit("watchlist-toggled",{seriesId:this.item.id,action:e.action,watchlistType:e.watchlist_type,seasonInfo:e.season_info,message:e.message})):(console.error("‚ùå Watchlist toggle failed:",e.error),this.$emit("show-message",{type:"error",text:e.error||"Failed to toggle watchlist"}))}catch(e){if(console.error("‚ùå Watchlist toggle error:",e),e.response&&e.response.status===400){const o=((n=e.response.data)==null?void 0:n.error)||"Only airing series can be added to watchlist";this.$emit("show-message",{type:"error",text:o})}else this.$emit("show-message",{type:"error",text:"Failed to toggle watchlist"})}},showHeartLoading(){const n=this.$el.querySelector(".heart-toggle-button");n&&(n.style.opacity="0.7",n.style.transform="scale(0.95)",n.style.transition="all 0.2s ease")},showHeartSuccess(){const n=this.$el.querySelector(".heart-toggle-button");n&&(n.style.background="rgba(40, 167, 69, 0.9)",n.style.transform="scale(1.1)",n.style.boxShadow="0 4px 15px rgba(40, 167, 69, 0.4)",setTimeout(()=>{n.style.background="rgba(0, 0, 0, 0.8)",n.style.transform="scale(1)",n.style.boxShadow="none"},600))},getWatchlistDaysLeft(){const n=this.item.watchlist_release_date?new Date(this.item.watchlist_release_date):this.item.release?new Date(this.item.release):null;if(!n)return"";const e=new Date,o=n.getTime()-e.getTime(),t=Math.ceil(o/(1e3*3600*24));return t>0?`${t} day${t>1?"s":""} left`:t===0?"Releases today!":`Released ${Math.abs(t)} day${Math.abs(t)>1?"s":""} ago`},getWatchlistReleaseStatus(){if(!this.item.release)return"";const n=new Date(this.item.release),e=new Date;e.setHours(0,0,0,0),n.setHours(0,0,0,0);const o=n.getTime()-e.getTime(),t=Math.ceil(o/(1e3*3600*24));if(t>0)return t===1?"Tomorrow!":t<=7?`${t} days left`:t<=30?`${t} days left`:`${Math.ceil(t/30)} months left`;if(t===0)return"Released today!";{const i=this.getTypeTagText().toLowerCase();return i==="game"?"Unplayed yet":i==="series"||i==="movie"?"Unwatched yet":i==="buecher"?"Unread yet":"Unconsumed yet"}},getWatchlistReleaseStatusClass(){if(!this.item.release)return"";const n=new Date(this.item.release),e=new Date;e.setHours(0,0,0,0),n.setHours(0,0,0,0);const o=n.getTime()-e.getTime(),t=Math.ceil(o/(1e3*3600*24));return t>0?"countdown":t===0?"released-today":"unconsumed"},getTypeTagText(){var e,o,t;const n=this.item.watchlistType||this.item.watchlist_type;if(n)return n.charAt(0).toUpperCase()+n.slice(1);if(this.item.genre){const i=this.item.genre.toLowerCase();if(i.includes("game")||i.includes("gaming")||(e=this.item.platforms)!=null&&e.toLowerCase().includes("steam")||(o=this.item.platforms)!=null&&o.toLowerCase().includes("ps")||(t=this.item.platforms)!=null&&t.toLowerCase().includes("xbox"))return"Game";if(i.includes("series")||i.includes("tv")||i.includes("episode")||this.item.isAiring)return"Series";if(i.includes("movie")||i.includes("film")||i.includes("cinema"))return"Movie";if(i.includes("book")||i.includes("literature")||i.includes("novel")||i.includes("author"))return"B√ºcher"}if(this.item.platforms){const i=this.item.platforms.toLowerCase();if(i.includes("steam")||i.includes("ps")||i.includes("xbox")||i.includes("nintendo")||i.includes("pc"))return"Game";if(i.includes("netflix")||i.includes("hulu")||i.includes("disney")||i.includes("hbo"))return"Series";if(i.includes("cinema")||i.includes("theater"))return"Movie";if(i.includes("book")||i.includes("kindle")||i.includes("audible")||i.includes("author"))return"B√ºcher"}return"Media"},getTypeTagClass(){return`type-${this.getTypeTagText().toLowerCase()}`},getNextSeasonCountdown(){if(!this.item.nextSeasonRelease)return"";const n=new Date(this.item.nextSeasonRelease),e=new Date;e.setHours(0,0,0,0),n.setHours(0,0,0,0);const o=n.getTime()-e.getTime(),t=Math.ceil(o/(1e3*3600*24));return t>0?t===1?"Tomorrow!":t<=7?`${t} days`:t<=30?`${t} days`:`${Math.ceil(t/30)} months`:t===0?"Today!":"Released"},getCategoryClass(){var e,o;const n=((e=this.item.category)==null?void 0:e.toLowerCase())||((o=this.item.category_name)==null?void 0:o.toLowerCase());return n==="movies"||n==="movie"?"category-movies":n==="books"||n==="buecher"||n==="book"?"category-books":n==="series"||n==="tv"||n==="serie"?"category-series":n==="games"||n==="game"||n==="spiele"?"category-games":n==="watchlist"?"category-watchlist":"category-default"},getCategoryIcon(){var e,o,t,i;if(this.isWatchlistItem){const u=this.item.watchlistType||this.item.watchlist_type;if(u){const d=u.toLowerCase();if(d==="movies"||d==="movie")return"üé¨";if(d==="books"||d==="buecher")return"üìö";if(d==="series"||d==="tv")return"üì∫";if(d==="games"||d==="game")return"üéÆ"}if(this.item.genre){const d=this.item.genre.toLowerCase();if(d.includes("game")||d.includes("gaming")||(e=this.item.platforms)!=null&&e.toLowerCase().includes("steam")||(o=this.item.platforms)!=null&&o.toLowerCase().includes("ps")||(t=this.item.platforms)!=null&&t.toLowerCase().includes("xbox"))return"üéÆ";if(d.includes("book")||d.includes("buecher"))return"üìö";if(d.includes("series")||d.includes("tv")||d.includes("tv show"))return"üì∫";if(d.includes("movie")||d.includes("film"))return"üé¨"}return"üìÅ"}const n=(i=this.item.category)==null?void 0:i.toLowerCase();return n==="movies"||n==="movie"?"üé¨":n==="books"||n==="buecher"?"üìö":n==="series"||n==="tv"?"üì∫":n==="games"||n==="game"?"üéÆ":"üìÅ"},getCategoryStyle(){var e;const n=(e=this.item.category)==null?void 0:e.toLowerCase();if(n==="games"||n==="game"){const o=this.item.rating||0;return this.getGameStyleByRating(o)}return{}},getGameStyleByRating(n){return n>=4.5?{"--game-primary":"#ffd700","--game-secondary":"#ffed4e","--game-accent":"#ff6b35","--game-glow":"0 0 20px rgba(255, 215, 0, 0.6)","--game-border":"3px solid #ffd700"}:n>=4?{"--game-primary":"#00d4ff","--game-secondary":"#e8f4fd","--game-accent":"#00ff88","--game-glow":"0 0 15px rgba(0, 212, 255, 0.5)","--game-border":"3px solid #00d4ff"}:n>=3.5?{"--game-primary":"#00ff88","--game-secondary":"#4caf50","--game-accent":"#8bc34a","--game-glow":"0 0 12px rgba(0, 255, 136, 0.4)","--game-border":"3px solid #00ff88"}:n>=3?{"--game-primary":"#ff9800","--game-secondary":"#ffc107","--game-accent":"#ff5722","--game-glow":"0 0 10px rgba(255, 152, 0, 0.3)","--game-border":"3px solid #ff9800"}:n>=2?{"--game-primary":"#ff5722","--game-secondary":"#f44336","--game-accent":"#d32f2f","--game-glow":"0 0 8px rgba(255, 87, 34, 0.3)","--game-border":"3px solid #ff5722"}:{"--game-primary":"#9e9e9e","--game-secondary":"#757575","--game-accent":"#616161","--game-glow":"0 0 5px rgba(158, 158, 158, 0.2)","--game-border":"3px solid #9e9e9e"}}}},fs={class:"media-image"},hs=["src","alt"],ps={key:1,class:"no-image"},vs={class:"no-image-icon"},ys={class:"media-info"},bs={class:"labels-container"},_s={key:0,class:"category-type-tag"},ws={key:1,class:"watchlist-tag new-season"},ks={key:2,class:"status-badge airing"},Ss={key:3,class:"status-badge finished"},xs={key:4,class:"season-info"},Is={key:5,class:"days-left"},Cs={key:6,class:"days-left"},Ds={class:"title-container"},As={class:"media-title"},Ts={class:"heart-text"},Ms={key:3,class:"star-rating-overlay"};function Rs(n,e,o,t,i,u){const d=le("StarRating");return g(),f("div",{class:z(["media-item",u.getCategoryClass()]),style:Be(u.getCategoryStyle()),onClick:e[4]||(e[4]=(...m)=>u.editItem&&u.editItem(...m))},[s("div",fs,[o.item.image_url||o.item.path?(g(),f("img",{key:0,src:u.getImageUrl(o.item.image_url||o.item.path),alt:o.item.title,onError:e[0]||(e[0]=(...m)=>u.handleImageError&&u.handleImageError(...m))},null,40,hs)):(g(),f("div",ps,[s("span",vs,p(u.getCategoryIcon()),1)]))]),s("div",ys,[s("div",bs,[u.isWatchlistItem&&u.getTypeTagText()?(g(),f("div",_s,p(u.getCategoryIcon()),1)):S("",!0),u.isWatchlistItem&&o.item.watchlist_series_type==="new_season"?(g(),f("div",ws," üì∫ "+p(o.item.watchlist_season_info||"New Season"),1)):S("",!0),u.isSeries&&!u.isWatchlistItem&&o.item.is_airing?(g(),f("div",ks," üî¥ Airing ")):u.isSeries&&!u.isWatchlistItem&&o.item.series_status?(g(),f("div",Ss,p(u.getStatusIcon())+" "+p(o.item.series_status),1)):S("",!0),u.isSeries&&o.item.is_airing&&o.item.next_season?(g(),f("div",xs," üì∫ S"+p(o.item.next_season),1)):S("",!0),u.isWatchlistItem&&o.item.release?(g(),f("div",Is," ‚è∞ "+p(u.getWatchlistDaysLeft()),1)):u.isSeries&&o.item.is_airing&&o.item.next_season_release?(g(),f("div",Cs," ‚è∞ "+p(u.getDaysLeftText()),1)):S("",!0)]),s("div",Ds,[s("h3",As,p(o.item.title),1)])]),u.isSeries&&!u.isWatchlistItem&&o.item.extra_link?(g(),f("div",{key:0,class:"series-extra-button",onClick:e[1]||(e[1]=ce((...m)=>u.openExtraLink&&u.openExtraLink(...m),["stop"]))},[...e[5]||(e[5]=[s("span",{class:"extra-link-icon"},"üîó",-1),s("span",{class:"extra-link-text"},"Extra Link",-1)])])):S("",!0),u.isWatchlistItem&&o.item.extra_link?(g(),f("div",{key:1,class:"watchlist-extra-button",onClick:e[2]||(e[2]=ce((...m)=>u.openExtraLink&&u.openExtraLink(...m),["stop"]))},[...e[6]||(e[6]=[s("span",{class:"extra-link-icon"},"üîó",-1),s("span",{class:"extra-link-text"},"Go to Link",-1)])])):S("",!0),u.shouldShowHeartButton?(g(),f("div",{key:2,class:"heart-toggle-button",onClick:e[3]||(e[3]=ce((...m)=>u.handleHeartClick&&u.handleHeartClick(...m),["stop"]))},[s("span",{class:z(["heart-icon",{active:u.isInWatchlist}])},p(u.isInWatchlist?"‚ù§Ô∏è":"ü§ç"),3),s("span",Ts,p(u.isInWatchlist?"In Watchlist":"Add to Watchlist"),1)])):S("",!0),o.editMode?(g(),f("div",Ms,[ve(d,{rating:o.item.personal_rating||0,"edit-mode":o.editMode,"item-id":o.item.id,onRatingChanged:u.handleRatingChanged},null,8,["rating","edit-mode","item-id","onRatingChanged"])])):S("",!0),e[7]||(e[7]=s("div",{class:"edit-indicator"},[s("span",{class:"edit-icon"},"‚úèÔ∏è")],-1))],6)}const Es=ae(gs,[["render",Rs],["__scopeId","data-v-09584710"]]),Us={name:"VersionInfo",data(){return{version:"1.0.0"}}},Bs={class:"version-info"},Ls={class:"version-label"};function Ps(n,e,o,t,i,u){return g(),f("div",Bs,[s("span",Ls,"Build #"+p(i.version),1)])}const Fs=ae(Us,[["render",Ps],["__scopeId","data-v-2d54e3c7"]]),Ns={name:"Sidebar",components:{VersionInfo:Fs},props:{collapsed:{type:Boolean,default:!1},mobileOpen:{type:Boolean,default:!1},isLoggedIn:{type:Boolean,default:!1},userName:{type:String,default:""},currentCategory:{type:String,default:"watchlist"},categoryCounts:{type:Object,default:()=>({})},categories:{type:Array,default:()=>[{key:"game",name:"Games",icon:"üéÆ"},{key:"series",name:"Series",icon:"üì∫"},{key:"movie",name:"Movies",icon:"üé¨"},{key:"buecher",name:"B√ºcher",icon:"üìö"},{key:"watchlist",name:"Watchlist",icon:"‚ù§Ô∏è"}]},selectedGenres:{type:Array,default:()=>[]},excludedGenres:{type:Array,default:()=>[]},genres:{type:Array,default:()=>[]},genreLoading:{type:Boolean,default:!1},genreError:{type:String,default:null}},emits:["toggle","setCategory","addItem","navigateToCalendar","navigateToProfile","showLogin","showRegister","logout","genres-updated","genres-excluded","genres-cleared","load-genres"],data(){return{showAllGenres:!1}},computed:{showGenreSection(){return this.currentCategory&&this.currentCategory!=="statistics"&&this.currentCategory!=="calendar"&&this.currentCategory!=="profile"},visibleGenres(){return this.showAllGenres||this.genres.length<=5?this.genres:this.genres.slice(0,5)},genreCheckboxStates(){return this.visibleGenres.map(n=>({...n,isIncluded:this.selectedGenres.includes(n.name),isExcluded:this.excludedGenres.includes(n.name)}))}},methods:{toggleGenreInclude(n){const e=[...this.selectedGenres],o=[...this.excludedGenres];if(e.includes(n)){const i=e.indexOf(n);e.splice(i,1)}else{e.push(n);const i=o.indexOf(n);i>-1&&o.splice(i,1)}this.$emit("genres-updated",e),this.$emit("genres-excluded",o)},toggleGenreExclude(n){const e=[...this.selectedGenres],o=[...this.excludedGenres];if(o.includes(n)){const i=o.indexOf(n);o.splice(i,1)}else{o.push(n);const i=e.indexOf(n);i>-1&&e.splice(i,1)}this.$emit("genres-updated",e),this.$emit("genres-excluded",o)},clearGenreFilter(){this.$emit("genres-cleared"),this.$emit("genres-excluded",[])},loadGenres(){this.$emit("load-genres")},toggleShowAllGenres(){this.showAllGenres=!this.showAllGenres}}},Gs={class:"sidebar-content"},Ws={class:"sidebar-section"},Vs={class:"sidebar-nav"},Os=["onClick"],js={class:"nav-icon"},zs={class:"nav-text"},Ys={class:"nav-count"},Hs=["onClick","title"],qs={key:0,class:"sidebar-section genre-section"},Qs={key:0,class:"genre-loading"},Js={key:1,class:"genre-error"},Ks={key:2,class:"genre-empty"},Zs=["title"],Xs={class:"genre-name"},$s={class:"genre-checkbox-label include-checkbox"},ea=["value","checked","onChange"],ta={class:"genre-checkbox-label exclude-checkbox"},sa=["value","checked","onChange"],aa={class:"genre-count"},oa=["title"],na={class:"sidebar-section"},ia={key:0,class:"auth-buttons"},la={key:1,class:"user-info"},ra={class:"user-profile"},da={class:"profile-details"},ca={class:"user-name"};function ua(n,e,o,t,i,u){const d=le("VersionInfo");return g(),f("aside",{id:"sidebar",class:z(["sidebar",{collapsed:o.collapsed,open:o.mobileOpen}])},[s("div",{class:"sidebar-header",onClick:e[0]||(e[0]=m=>n.$emit("toggle"))},[...e[11]||(e[11]=[s("h2",null,"Media Library",-1),s("button",{class:"sidebar-toggle"},"‚ò∞",-1)])]),s("div",Gs,[s("div",Ws,[e[16]||(e[16]=s("h3",null,"Browse",-1)),s("nav",Vs,[(g(!0),f(te,null,se(o.categories,m=>(g(),f("div",{key:m.key,class:"nav-item"},[s("button",{class:z(["nav-btn",{active:o.currentCategory===m.key}]),onClick:h=>n.$emit("setCategory",m.key)},[s("span",js,p(m.icon),1),s("span",zs,p(m.name),1),s("span",Ys,p(o.categoryCounts[m.key]||0),1)],10,Os),s("button",{class:"add-btn",onClick:h=>n.$emit("addItem",m.key),title:`Add ${m.name}`},[...e[12]||(e[12]=[s("span",{class:"add-icon"},"+",-1)])],8,Hs)]))),128)),s("button",{class:z(["nav-btn",{active:o.currentCategory==="statistics"}]),onClick:e[1]||(e[1]=m=>n.$emit("setCategory","statistics"))},[...e[13]||(e[13]=[s("span",{class:"nav-icon"},"üìä",-1),s("span",{class:"nav-text"},"Statistics",-1)])],2),s("button",{class:z(["nav-btn",{active:o.currentCategory==="calendar"}]),onClick:e[2]||(e[2]=m=>n.$emit("setCategory","calendar"))},[...e[14]||(e[14]=[s("span",{class:"nav-icon"},"üìÖ",-1),s("span",{class:"nav-text"},"Calendar",-1)])],2),s("button",{class:z(["nav-btn",{active:o.currentCategory==="profile"}]),onClick:e[3]||(e[3]=m=>n.$emit("setCategory","profile"))},[...e[15]||(e[15]=[s("span",{class:"nav-icon"},"üë§",-1),s("span",{class:"nav-text"},"Profile",-1)])],2)])]),u.showGenreSection?(g(),f("div",qs,[e[20]||(e[20]=s("h3",null,"Genres",-1)),o.genreLoading?(g(),f("div",Qs,[...e[17]||(e[17]=[s("div",{class:"loading-spinner"},null,-1),s("span",null,"Loading genres...",-1)])])):o.genreError?(g(),f("div",Js,[e[18]||(e[18]=s("span",null,"Failed to load genres",-1)),s("button",{onClick:e[4]||(e[4]=(...m)=>u.loadGenres&&u.loadGenres(...m)),class:"retry-btn"},"Retry")])):o.genres.length===0?(g(),f("div",Ks,[...e[19]||(e[19]=[s("span",null,"No genres available",-1)])])):(g(),f("div",{key:3,class:z(["genre-list",{loading:o.genreLoading}])},[ve($t,{name:"genre-fade",tag:"div"},{default:Xt(()=>[(g(!0),f(te,null,se(u.genreCheckboxStates,(m,h)=>(g(),f("div",{key:m.name,class:"genre-checkbox-item",title:`${m.name} (${m.count} items)`,style:Be({"--animation-delay":`${h*50}ms`})},[s("span",Xs,p(m.name),1),s("label",$s,[s("input",{type:"checkbox",value:m.name,checked:m.isIncluded,onChange:_=>u.toggleGenreInclude(m.name),class:"genre-checkbox include-checkbox-input"},null,40,ea)]),s("label",ta,[s("input",{type:"checkbox",value:m.name,checked:m.isExcluded,onChange:_=>u.toggleGenreExclude(m.name),class:"genre-checkbox exclude-checkbox-input"},null,40,sa)]),s("span",aa,p(m.count),1)],12,Zs))),128))]),_:1}),o.genres.length>5?(g(),f("button",{key:0,class:"show-more-btn",onClick:e[5]||(e[5]=(...m)=>u.toggleShowAllGenres&&u.toggleShowAllGenres(...m)),title:i.showAllGenres?"Show fewer genres":"Show all genres"},p(i.showAllGenres?"Show Less":`Show More (${o.genres.length-5})`),9,oa)):S("",!0),o.selectedGenres.length>0||o.excludedGenres.length>0?(g(),f("button",{key:1,class:"clear-genre-btn",onClick:e[6]||(e[6]=(...m)=>u.clearGenreFilter&&u.clearGenreFilter(...m)),title:"Clear all genre filters"}," Clear All Filters ("+p(o.selectedGenres.length+o.excludedGenres.length)+") ",1)):S("",!0)],2))])):S("",!0),s("div",na,[e[22]||(e[22]=s("h3",null,"Account",-1)),o.isLoggedIn?(g(),f("div",la,[s("div",ra,[e[21]||(e[21]=s("div",{class:"profile-avatar"},[s("span",{class:"avatar-text"},"üë§")],-1)),s("div",da,[s("span",ca,p(o.userName),1)]),s("button",{class:"account-btn",onClick:e[9]||(e[9]=m=>n.$emit("navigateToProfile"))},"‚öôÔ∏è")]),s("button",{class:"auth-btn",onClick:e[10]||(e[10]=m=>n.$emit("logout"))},"Logout")])):(g(),f("div",ia,[s("button",{class:"auth-btn",onClick:e[7]||(e[7]=m=>n.$emit("showLogin"))},"Login"),s("button",{class:"auth-btn",onClick:e[8]||(e[8]=m=>n.$emit("showRegister"))},"Register")]))])]),ve(d)],2)}const ma=ae(Ns,[["render",ua],["__scopeId","data-v-c3281671"]]),ga={name:"MainHeader",props:{searchQuery:{type:String,default:""},sortBy:{type:String,default:"order_asc"},editMode:{type:Boolean,default:!1}},emits:["update:searchQuery","update:sortBy","toggleMobileSidebar","clearSearch","toggleEditMode"]},fa={class:"main-header"},ha={class:"header-left"},pa={class:"header-center"},va={class:"search-container"},ya=["value"],ba={class:"header-right"},_a={class:"edit-mode-container"},wa=["title"],ka={class:"edit-icon"},Sa={class:"edit-text"},xa={class:"sort-container"},Ia=["value"];function Ca(n,e,o,t,i,u){return g(),f("header",fa,[s("div",ha,[s("button",{class:"mobile-sidebar-toggle",onClick:e[0]||(e[0]=d=>n.$emit("toggleMobileSidebar"))},"‚ò∞")]),s("div",pa,[s("div",va,[s("input",{type:"text",value:o.searchQuery,onInput:e[1]||(e[1]=d=>n.$emit("update:searchQuery",d.target.value)),placeholder:"Search..."},null,40,ya),s("button",{class:"search-clear",onClick:e[2]||(e[2]=d=>n.$emit("clearSearch"))},"√ó")])]),s("div",ba,[s("div",_a,[s("button",{class:z(["edit-mode-toggle",{active:o.editMode}]),onClick:e[3]||(e[3]=d=>n.$emit("toggleEditMode")),title:o.editMode?"Exit Edit Mode":"Enter Edit Mode"},[s("span",ka,p(o.editMode?"‚úì":"‚úèÔ∏è"),1),s("span",Sa,p(o.editMode?"Done":"Edit"),1)],10,wa)]),s("div",xa,[s("select",{value:o.sortBy,onChange:e[4]||(e[4]=d=>n.$emit("update:sortBy",d.target.value))},[...e[5]||(e[5]=[Ge('<option value="order_asc" data-v-0359334b>Original order ‚Üë</option><option value="order_desc" data-v-0359334b>Original order ‚Üì</option><option value="title_asc" data-v-0359334b>Title A-Z</option><option value="title_desc" data-v-0359334b>Title Z-A</option><option value="release_asc" data-v-0359334b>Release ‚Üë</option><option value="release_desc" data-v-0359334b>Release ‚Üì</option><option value="api_rating_asc" data-v-0359334b>API Rating ‚Üë</option><option value="api_rating_desc" data-v-0359334b>API Rating ‚Üì</option><option value="personal_rating_asc" data-v-0359334b>Personal Rating ‚Üë</option><option value="personal_rating_desc" data-v-0359334b>Personal Rating ‚Üì</option><option value="airing_desc" data-v-0359334b>Airing first</option><option value="airing_asc" data-v-0359334b>Finished first</option><option value="days_left_asc" data-v-0359334b>Days left ‚Üë</option><option value="days_left_desc" data-v-0359334b>Days left ‚Üì</option>',14)])],40,Ia)])])])}const Da=ae(ga,[["render",Ca],["__scopeId","data-v-0359334b"]]),Aa={name:"FloatingActionButton",props:{showMenu:{type:Boolean,default:!1},showDeleteAll:{type:Boolean,default:!1},categoryName:{type:String,default:""},itemCount:{type:Number,default:0}},emits:["toggleMenu","addNewItem","bulkAddItems","importFromTxt","importFromAPI","createCollection","deleteAllInCategory"]},Ta={class:"floating-actions"},Ma={class:"menu-text"},Ra={class:"item-count-badge"};function Ea(n,e,o,t,i,u){return g(),f("div",Ta,[s("div",{class:z(["floating-menu",{show:o.showMenu}])},[s("button",{class:"floating-menu-item",onClick:e[0]||(e[0]=d=>n.$emit("addNewItem"))},[...e[7]||(e[7]=[s("span",{class:"menu-icon"},"‚ûï",-1),s("span",{class:"menu-text"},"Add Item",-1)])]),s("button",{class:"floating-menu-item",onClick:e[1]||(e[1]=d=>n.$emit("bulkAddItems"))},[...e[8]||(e[8]=[s("span",{class:"menu-icon"},"üì¶",-1),s("span",{class:"menu-text"},"Bulk Add",-1)])]),s("button",{class:"floating-menu-item",onClick:e[2]||(e[2]=d=>n.$emit("importFromTxt"))},[...e[9]||(e[9]=[s("span",{class:"menu-icon"},"üìÑ",-1),s("span",{class:"menu-text"},"Import from TXT",-1)])]),s("button",{class:"floating-menu-item",onClick:e[3]||(e[3]=d=>n.$emit("importFromAPI"))},[...e[10]||(e[10]=[s("span",{class:"menu-icon"},"üåê",-1),s("span",{class:"menu-text"},"Import from API",-1)])]),s("button",{class:"floating-menu-item",onClick:e[4]||(e[4]=d=>n.$emit("createCollection"))},[...e[11]||(e[11]=[s("span",{class:"menu-icon"},"üìö",-1),s("span",{class:"menu-text"},"Create Collection",-1)])]),o.showDeleteAll&&o.itemCount>0?(g(),f("button",{key:0,class:"floating-menu-item delete-all-item",onClick:e[5]||(e[5]=d=>n.$emit("deleteAllInCategory"))},[e[12]||(e[12]=s("span",{class:"menu-icon"},"üóëÔ∏è",-1)),s("span",Ma,"Delete All "+p(o.categoryName),1),s("span",Ra,"("+p(o.itemCount)+")",1)])):S("",!0)],2),s("button",{class:"floating-add-btn",onClick:e[6]||(e[6]=d=>n.$emit("toggleMenu"))},p(o.showMenu?"‚úï":"+"),1)])}const Ua=ae(Aa,[["render",Ea],["__scopeId","data-v-f77e6366"]]),Ba={name:"LoginModal",emits:["close","success"],setup(n,{emit:e}){const o=He(),t=Fe({email:"",password:""}),i=k(!1),u=k("");return{form:t,loading:i,error:u,handleLogin:async()=>{i.value=!0,u.value="";try{const I=await o.login(t.email,t.password);I.success?e("success",I):u.value=I.error}catch(I){u.value=I.message||"Login failed"}finally{i.value=!1}},closeModal:()=>{e("close")},checkLocalDB:async()=>{try{const D=await(await fetch("http://127.0.0.1:8000/api/check-db")).json();alert(`Local DB: ${D.success?"‚úÖ Connected":"‚ùå Error"}
Users: ${D.user_count}
Error: ${D.error||"None"}`)}catch(I){alert(`Local DB Check Failed: ${I.message}`)}},checkProdDB:async()=>{try{const I=window.location.origin,c=await(await fetch(`${I}/api/check-db`)).json();alert(`Prod DB: ${c.success?"‚úÖ Connected":"‚ùå Error"}
Users: ${c.user_count}
Error: ${c.error||"None"}`)}catch(I){alert(`Prod DB Check Failed: ${I.message}`)}},deleteAllUsers:async()=>{if(confirm("‚ö†Ô∏è WARNING: This will delete ALL users! Are you sure?"))try{const I=window.location.origin,c=await(await fetch(`${I}/api/delete-all-users`,{method:"POST",headers:{"Content-Type":"application/json"}})).json();alert(`Delete Result: ${c.success?"‚úÖ Success":"‚ùå Error"}
Deleted: ${c.deleted_count} users
Error: ${c.error||"None"}`)}catch(I){alert(`Delete Failed: ${I.message}`)}}}}},La={class:"form-group"},Pa=["disabled"],Fa={class:"form-group"},Na=["disabled"],Ga={key:0,class:"error-message"},Wa={class:"modal-buttons"},Va=["disabled"],Oa=["disabled"];function ja(n,e,o,t,i,u){return g(),f("div",{class:"modal",onClick:e[5]||(e[5]=(...d)=>t.closeModal&&t.closeModal(...d))},[s("div",{class:"modal-content auth-modal",onClick:e[4]||(e[4]=ce(()=>{},["stop"]))},[e[8]||(e[8]=s("h2",null,"Login",-1)),s("form",{onSubmit:e[3]||(e[3]=ce((...d)=>t.handleLogin&&t.handleLogin(...d),["prevent"]))},[s("div",La,[e[6]||(e[6]=s("label",{for:"email"},"Email:",-1)),A(s("input",{type:"email",id:"email","onUpdate:modelValue":e[0]||(e[0]=d=>t.form.email=d),required:"",disabled:t.loading},null,8,Pa),[[E,t.form.email]])]),s("div",Fa,[e[7]||(e[7]=s("label",{for:"password"},"Password:",-1)),A(s("input",{type:"password",id:"password","onUpdate:modelValue":e[1]||(e[1]=d=>t.form.password=d),required:"",disabled:t.loading},null,8,Na),[[E,t.form.password]])]),t.error?(g(),f("div",Ga,p(t.error),1)):S("",!0),s("div",Wa,[s("button",{type:"submit",disabled:t.loading},p(t.loading?"Logging in...":"Login"),9,Va),s("button",{type:"button",onClick:e[2]||(e[2]=(...d)=>t.closeModal&&t.closeModal(...d)),disabled:t.loading}," Cancel ",8,Oa)])],32)])])}const za=ae(Ba,[["render",ja],["__scopeId","data-v-64f3b00b"]]),Ya={name:"RegisterModal",emits:["close","success"],setup(n,{emit:e}){const o=He(),t=Fe({name:"",username:"",email:"",password:"",passwordConfirm:""}),i=k(!1),u=k(""),d=F(()=>t.name&&t.username&&t.email&&t.password&&t.passwordConfirm&&t.password===t.passwordConfirm&&t.password.length>=8);return{form:t,loading:i,error:u,isFormValid:d,handleRegister:async()=>{if(!d.value){u.value="Please fill in all fields and ensure passwords match";return}i.value=!0,u.value="";try{const _=await o.register(t.name,t.username,t.email,t.password,t.passwordConfirm);_.success?e("success"):u.value=_.error}catch(_){u.value=_.message||"Registration failed"}finally{i.value=!1}},closeModal:()=>{e("close")}}}},Ha={class:"form-group"},qa=["disabled"],Qa={class:"form-group"},Ja=["disabled"],Ka={class:"form-group"},Za=["disabled"],Xa={class:"form-group"},$a=["disabled"],eo={class:"form-group"},to=["disabled"],so={key:0,class:"error-message"},ao={class:"modal-buttons"},oo=["disabled"],no=["disabled"];function io(n,e,o,t,i,u){return g(),f("div",{class:"modal",onClick:e[8]||(e[8]=(...d)=>t.closeModal&&t.closeModal(...d))},[s("div",{class:"modal-content auth-modal",onClick:e[7]||(e[7]=ce(()=>{},["stop"]))},[e[14]||(e[14]=s("h2",null,"Register",-1)),s("form",{onSubmit:e[6]||(e[6]=ce((...d)=>t.handleRegister&&t.handleRegister(...d),["prevent"]))},[s("div",Ha,[e[9]||(e[9]=s("label",{for:"name"},"Name:",-1)),A(s("input",{type:"text",id:"name","onUpdate:modelValue":e[0]||(e[0]=d=>t.form.name=d),required:"",disabled:t.loading},null,8,qa),[[E,t.form.name]])]),s("div",Qa,[e[10]||(e[10]=s("label",{for:"username"},"Username:",-1)),A(s("input",{type:"text",id:"username","onUpdate:modelValue":e[1]||(e[1]=d=>t.form.username=d),required:"",disabled:t.loading},null,8,Ja),[[E,t.form.username]])]),s("div",Ka,[e[11]||(e[11]=s("label",{for:"email"},"Email:",-1)),A(s("input",{type:"email",id:"email","onUpdate:modelValue":e[2]||(e[2]=d=>t.form.email=d),required:"",disabled:t.loading},null,8,Za),[[E,t.form.email]])]),s("div",Xa,[e[12]||(e[12]=s("label",{for:"password"},"Password:",-1)),A(s("input",{type:"password",id:"password","onUpdate:modelValue":e[3]||(e[3]=d=>t.form.password=d),required:"",minlength:"8",disabled:t.loading},null,8,$a),[[E,t.form.password]])]),s("div",eo,[e[13]||(e[13]=s("label",{for:"passwordConfirm"},"Confirm Password:",-1)),A(s("input",{type:"password",id:"passwordConfirm","onUpdate:modelValue":e[4]||(e[4]=d=>t.form.passwordConfirm=d),required:"",minlength:"8",disabled:t.loading},null,8,to),[[E,t.form.passwordConfirm]])]),t.error?(g(),f("div",so,p(t.error),1)):S("",!0),s("div",ao,[s("button",{type:"submit",disabled:t.loading||!t.isFormValid},p(t.loading?"Registering...":"Register"),9,oo),s("button",{type:"button",onClick:e[5]||(e[5]=(...d)=>t.closeModal&&t.closeModal(...d)),disabled:t.loading}," Cancel ",8,no)])],32)])])}const lo=ae(Ya,[["render",io],["__scopeId","data-v-eec5201a"]]),gt="http://127.0.0.1:8000/api",ro={async getConfig(){try{const n=await fetch(`${gt}/google-books-config`,{method:"GET",headers:{Accept:"application/json","Content-Type":"application/json"}});if(!n.ok)throw new Error(`HTTP ${n.status}: ${n.statusText}`);return await n.json()}catch(n){throw console.error("Simple Google Books - Config failed:",n),n}},async searchBooks(n,e=10){try{const o=await fetch(`${gt}/google-books/search?q=${encodeURIComponent(n)}&maxResults=${e}`,{method:"GET",headers:{Accept:"application/json","Content-Type":"application/json"}});if(!o.ok)throw new Error(`HTTP ${o.status}: ${o.statusText}`);return await o.json()}catch(o){throw console.error("Simple Google Books - Search failed:",o),o}}},co=!1,uo=!0,mo="production",go={production:{apiUrl:"https://teabubble.attrebi.ch",apiBaseUrl:"https://teabubble.attrebi.ch/api",googleBooksUrl:"https://teabubble.attrebi.ch/api/google-books",debug:!1}};function fo(){return go.production}const ze=fo();ze.debug&&console.log("üîß Environment Configuration:",{mode:mo,isDevelopment:co,isProduction:uo,apiUrl:ze.apiUrl,apiBaseUrl:ze.apiBaseUrl,googleBooksUrl:ze.googleBooksUrl});class ho{constructor(){this.baseUrl="https://en.wikipedia.org/w/api.php",this.timeout=1e4,this.maxResults=10}async searchBooks(e,o=10){if(!e||typeof e!="string"||e.trim().length===0)return console.warn("üìö [Wikipedia] Invalid query provided"),{success:!1,error:"Search query is required",data:[]};try{const t=await this.searchPages(e,o);if(!t.success||t.data.length===0)return{success:!1,error:"No results found",data:[]};const i=await this.getPageDetails(t.data),u=this.filterAndFormatBookResults(i);return console.log("üìö [Wikipedia] Search completed:",{totalResults:i.length,bookResults:u.length}),{success:!0,data:u,source:"wikipedia"}}catch(t){return console.error("üìö [Wikipedia] Search failed:",t),{success:!1,error:`Search failed: ${t.message}`,data:[]}}}async searchPages(e,o){var i;const t=new URLSearchParams({action:"query",format:"json",list:"search",srsearch:`${e} book novel`,srnamespace:0,srlimit:o,srprop:"snippet|timestamp",origin:"*"});try{const u=await fetch(`${this.baseUrl}?${t}`,{method:"GET",headers:{Accept:"application/json"},signal:AbortSignal.timeout(this.timeout)});if(!u.ok)throw new Error(`HTTP ${u.status}: ${u.statusText}`);const d=await u.json();if(d.error)throw new Error(d.error.info||"Wikipedia API error");return{success:!0,data:(((i=d.query)==null?void 0:i.search)||[]).map(h=>({pageid:h.pageid,title:h.title,snippet:h.snippet,timestamp:h.timestamp}))}}catch(u){return console.error("üìö [Wikipedia] Page search failed:",u),{success:!1,error:u.message,data:[]}}}async getPageDetails(e){var i;if(!e||e.length===0)return[];const o=e.map(u=>u.pageid).join("|"),t=new URLSearchParams({action:"query",format:"json",pageids:o,prop:"extracts|pageimages|info",exintro:"true",explaintext:"true",exsectionformat:"plain",piprop:"thumbnail|original",pithumbsize:300,pilimit:1,inprop:"url",origin:"*"});try{const u=await fetch(`${this.baseUrl}?${t}`,{method:"GET",headers:{Accept:"application/json"},signal:AbortSignal.timeout(this.timeout)});if(!u.ok)throw new Error(`HTTP ${u.status}: ${u.statusText}`);const d=await u.json();if(d.error)throw new Error(d.error.info||"Wikipedia API error");const m=((i=d.query)==null?void 0:i.pages)||{};return Object.values(m).map(h=>{var _;return{pageid:h.pageid,title:h.title,extract:h.extract||"",thumbnail:((_=h.thumbnail)==null?void 0:_.source)||null,fullurl:h.fullurl||null,canonicalurl:h.canonicalurl||null}})}catch(u){return console.error("üìö [Wikipedia] Page details failed:",u),[]}}filterAndFormatBookResults(e){const o=["book","novel","fiction","non-fiction","author","published","publisher","isbn","literature","story","chapter","edition","written by","series","trilogy","saga","collection","anthology"];return e.filter(t=>{const i=(t.extract||"").toLowerCase(),u=(t.title||"").toLowerCase(),d=o.some(_=>i.includes(_)||u.includes(_)),h=["book","novel","story","tale","chronicles","saga","trilogy"].some(_=>u.includes(_));return d||h}).map(t=>{const i=t.extract||"",u=t.title||"",d=i.match(/written by[^,.\n]*?([A-Z][^,.\n]*?[A-Z][^,.\n]*?)(?:\s|\.|,|$)/i),m=i.match(/(\d{4})/),h=i.match(/(?:published by|publisher)\s+([^,.\n]+)/i);let _="";if(d&&(_=d[1].trim().replace(/^(British|American|German|French|Spanish|Italian)\s+(?:author|writer|novelist)?\s*/i,""),_.includes("author")||_.includes("writer"))){const I=_.match(/([A-Z][^,.\n]*?[A-Z][^,.\n]*?)(?:\s|\.|,|$)/);_=I?I[1].trim():_}if(!_){const T=i.match(/(?:by|author|written by)\s+([A-Z][^,.\n]*?[A-Z][^,.\n]*?)(?:\s|\.|,|$)/i);T&&(_=T[1].trim().replace(/^(British|American|German|French|Spanish|Italian)\s+(?:author|writer|novelist)?\s*/i,""))}return{id:`wikipedia_${t.pageid}`,title:u,author:_,description:i.substring(0,300)+(i.length>300?"...":""),publishedDate:m?m[1]:"",publisher:h?h[1].trim():"",imageUrl:t.thumbnail||null,link:t.fullurl||t.canonicalurl||"",apiSource:"wikipedia",snippet:i.substring(0,150)+(i.length>150?"...":""),categories:this.extractCategories(i)}}).slice(0,this.maxResults)}extractCategories(e){const o=[],t=e.toLowerCase();return t.includes("fiction")&&o.push("Fiction"),(t.includes("non-fiction")||t.includes("nonfiction"))&&o.push("Non-Fiction"),t.includes("novel")&&o.push("Novel"),t.includes("biography")&&o.push("Biography"),t.includes("history")&&o.push("History"),t.includes("science")&&o.push("Science"),t.includes("philosophy")&&o.push("Philosophy"),t.includes("poetry")&&o.push("Poetry"),t.includes("drama")&&o.push("Drama"),t.includes("mystery")&&o.push("Mystery"),t.includes("romance")&&o.push("Romance"),t.includes("fantasy")&&o.push("Fantasy"),(t.includes("science fiction")||t.includes("sci-fi"))&&o.push("Science Fiction"),t.includes("thriller")&&o.push("Thriller"),t.includes("horror")&&o.push("Horror"),o}async getBookById(e){var o,t;try{const i=new URLSearchParams({action:"query",format:"json",pageids:e,prop:"extracts|pageimages|info",exintro:"true",explaintext:"true",piprop:"thumbnail",pithumbsize:300,inprop:"url",origin:"*"}),u=await fetch(`${this.baseUrl}?${i}`,{method:"GET",headers:{Accept:"application/json"},signal:AbortSignal.timeout(this.timeout)});if(!u.ok)throw new Error(`HTTP ${u.status}: ${u.statusText}`);const d=await u.json(),m=Object.values(((o=d.query)==null?void 0:o.pages)||{})[0];if(!m)throw new Error("Page not found");return{success:!0,data:{id:`wikipedia_${m.pageid}`,title:m.title,description:m.extract||"",imageUrl:((t=m.thumbnail)==null?void 0:t.source)||null,link:m.fullurl||m.canonicalurl||"",apiSource:"wikipedia"}}}catch(i){return console.error("üìö [Wikipedia] Get book by ID failed:",i),{success:!1,error:i.message,data:null}}}}const po=new ho;class vo{constructor(){this.wikipediaService=po,this.googleBooksService=ro}getUserPreferences(){try{const e=localStorage.getItem("profileData");if(e){const o=JSON.parse(e);return{booksApiProvider:o.booksApiProvider||"wikipedia",enableGoogleBooksFallback:o.enableGoogleBooksFallback!==!1}}}catch(e){console.warn("Failed to load user preferences:",e)}return{booksApiProvider:"wikipedia",enableGoogleBooksFallback:!0}}async searchBooks(e,o=10){const t=this.getUserPreferences();if(!e||typeof e!="string"||e.trim().length===0)return{success:!1,error:"Search query is required",data:[]};try{let i=[],u="",d=!1;switch(t.booksApiProvider){case"wikipedia":i=await this.searchWithWikipediaFirst(e,o,t),u="wikipedia";break;case"google_books":i=await this.searchWithGoogleBooksFirst(e,o,t),u="google_books";break;case"both":i=await this.searchWithBothApis(e,o,t),u="both";break;default:i=await this.searchWithWikipediaFirst(e,o,t),u="wikipedia"}return{success:!0,data:i,source:u,fallbackUsed:d}}catch(i){return console.error("üìö [UnifiedBooks] Search failed:",i),{success:!1,error:`Search failed: ${i.message}`,data:[]}}}async searchWithWikipediaFirst(e,o,t){const i=await this.wikipediaService.searchBooks(e,o);if(i.success&&i.data.length>0)return i.data;if(t.enableGoogleBooksFallback){const u=await this.googleBooksService.searchBooks(e,o);if(u.success&&u.data.length>0)return u.data}return[]}async searchWithGoogleBooksFirst(e,o,t){const i=await this.googleBooksService.searchBooks(e,o);if(i.success&&i.data.length>0)return i.data;if(t.enableGoogleBooksFallback){const u=await this.wikipediaService.searchBooks(e,o);if(u.success&&u.data.length>0)return u.data}return[]}async searchWithBothApis(e,o,t){const[i,u]=await Promise.allSettled([this.wikipediaService.searchBooks(e,Math.ceil(o/2)),this.googleBooksService.searchBooks(e,Math.ceil(o/2))]);let d=[];return i.status==="fulfilled"&&i.value.success&&(d=d.concat(i.value.data)),u.status==="fulfilled"&&u.value.success&&(d=d.concat(u.value.data)),d=this.removeDuplicateResults(d),d=d.slice(0,o),d}removeDuplicateResults(e){const o=new Set,t=[];for(const i of e){const u=i.title.toLowerCase().replace(/[^\w\s]/g,"").trim();o.has(u)||(o.add(u),t.push(i))}return t}async getBookById(e){if(e.startsWith("wikipedia_")){const o=e.replace("wikipedia_","");return await this.wikipediaService.getBookById(o)}else return await this.googleBooksService.getBookById(e)}getApiStatus(){const e=this.getUserPreferences();return{primaryProvider:e.booksApiProvider,fallbackEnabled:e.enableGoogleBooksFallback,availableProviders:["wikipedia","google_books"],wikipediaAvailable:!0,googleBooksAvailable:!0}}}const tt=new vo,yo={name:"BooksApiControlPanel",props:{expanded:{type:Boolean,default:!1}},emits:["preferences-changed"],setup(n,{emit:e}){const o=k(n.expanded),t=k(!1),i=k(null),u=k("checking"),d=Fe({booksApiProvider:"wikipedia",enableGoogleBooksFallback:!0}),m=()=>{o.value=!o.value},h=()=>{try{const D=localStorage.getItem("profileData");if(D){const c=JSON.parse(D);d.booksApiProvider=c.booksApiProvider||"wikipedia",d.enableGoogleBooksFallback=c.enableGoogleBooksFallback!==!1}}catch(D){console.warn("Failed to load preferences:",D)}},_=()=>{try{const D=localStorage.getItem("profileData"),c=D?JSON.parse(D):{};c.booksApiProvider=d.booksApiProvider,c.enableGoogleBooksFallback=d.enableGoogleBooksFallback,localStorage.setItem("profileData",JSON.stringify(c)),e("preferences-changed",{...d})}catch(D){console.error("Failed to save preferences:",D)}},T=async()=>{t.value=!0,i.value=null;try{const D=await tt.searchBooks("Harry Potter",3);D.success&&D.data.length>0?i.value={success:!0,message:`‚úÖ Found ${D.data.length} results using ${D.source}`}:i.value={success:!1,message:`‚ùå No results found: ${D.error||"Unknown error"}`}}catch(D){i.value={success:!1,message:`‚ùå Test failed: ${D.message}`}}finally{t.value=!1}},I=async()=>{try{const D=await tt.getApiStatus();u.value=D.googleBooksAvailable?"available":"unavailable"}catch{u.value="unavailable"}};return st(()=>{h(),I()}),{isExpanded:o,localPreferences:d,testing:t,testResult:i,googleBooksStatus:u,toggleExpanded:m,updatePreferences:_,testSearch:T}}},bo={class:"books-api-control-panel"},_o={class:"control-header"},wo={key:0,class:"control-content"},ko={class:"form-group"},So={class:"form-group"},xo={class:"checkbox-container"},Io={class:"api-status"},Co={class:"status-item"},Do={class:"search-preview"},Ao=["disabled"];function To(n,e,o,t,i,u){return g(),f("div",bo,[s("div",_o,[e[6]||(e[6]=s("h4",null,"üìö Books API Settings",-1)),s("button",{class:z(["toggle-btn",{expanded:t.isExpanded}]),onClick:e[0]||(e[0]=(...d)=>t.toggleExpanded&&t.toggleExpanded(...d))},p(t.isExpanded?"‚ñº":"‚ñ∂"),3)]),t.isExpanded?(g(),f("div",wo,[s("div",ko,[e[8]||(e[8]=s("label",{for:"apiProvider"},"Primary API Provider:",-1)),A(s("select",{id:"apiProvider","onUpdate:modelValue":e[1]||(e[1]=d=>t.localPreferences.booksApiProvider=d),onChange:e[2]||(e[2]=(...d)=>t.updatePreferences&&t.updatePreferences(...d))},[...e[7]||(e[7]=[s("option",{value:"wikipedia"},"Wikipedia (Recommended)",-1),s("option",{value:"google_books"},"Google Books",-1),s("option",{value:"both"},"Both APIs",-1)])],544),[[we,t.localPreferences.booksApiProvider]]),e[9]||(e[9]=s("div",{class:"field-hint"}," Choose your primary source for book information ",-1))]),s("div",So,[s("div",xo,[A(s("input",{type:"checkbox",id:"enableFallback","onUpdate:modelValue":e[3]||(e[3]=d=>t.localPreferences.enableGoogleBooksFallback=d),onChange:e[4]||(e[4]=(...d)=>t.updatePreferences&&t.updatePreferences(...d))},null,544),[[ft,t.localPreferences.enableGoogleBooksFallback]]),e[10]||(e[10]=s("label",{for:"enableFallback",class:"checkbox-label"}," Enable Google Books Fallback ",-1))]),e[11]||(e[11]=s("div",{class:"field-hint"}," Use Google Books when primary API fails ",-1))]),s("div",Io,[e[13]||(e[13]=s("div",{class:"status-item"},[s("span",{class:"status-label"},"Wikipedia:"),s("span",{class:"status-value available"},"‚úÖ Available")],-1)),s("div",Co,[e[12]||(e[12]=s("span",{class:"status-label"},"Google Books:",-1)),s("span",{class:z(["status-value",t.googleBooksStatus])},p(t.googleBooksStatus==="available"?"‚úÖ Available":"‚ö†Ô∏è Check API Key"),3)])]),s("div",Do,[s("button",{class:"test-search-btn",onClick:e[5]||(e[5]=(...d)=>t.testSearch&&t.testSearch(...d)),disabled:t.testing},p(t.testing?"Testing...":"Test Search"),9,Ao),t.testResult?(g(),f("div",{key:0,class:z(["test-result",t.testResult.success?"success":"error"])},p(t.testResult.message),3)):S("",!0)])])):S("",!0)])}const Mo=ae(yo,[["render",To],["__scopeId","data-v-09652cba"]]),Ro={name:"EditModal",components:{BooksApiControlPanel:Mo},props:{item:{type:Object,default:null},currentCategory:{type:String,default:"watchlist"}},emits:["close","save","delete"],setup(n,{emit:e}){const o=qe(),t=k(!1),i=k(""),u=k([]),d=k(null),m=k(null),h=k(""),_=k(!1),T=k(""),I=k(!1),D=k(!1),c=Fe({category:"watchlist",title:"",release:"",apiRating:"",personalRating:"",count:"",platforms:"",genre:"",description:"",link:"",extraLink:"",path:"",discovered:"",spielzeit:"",isAiring:!1,nextSeason:"",nextSeasonRelease:"",imageUrl:"",watchlistType:"",watchlistReleaseDate:"",watchlistNumber:"",imageCleared:!1,tmdbId:"",nextSeasonName:"",lastAirDate:"",totalSeasons:"",totalEpisodes:"",seriesStatus:"",networks:"",createdBy:""}),V=F(()=>!!n.item),oe=F(()=>c.category==="game"),H=F(()=>c.category==="series"),me=F(()=>c.category==="watchlist");Ee(()=>n.item,l=>{if(l){if(l.watchlist_type!==void 0?c.watchlistType=l.watchlist_type||"":l.watchlistType!==void 0?c.watchlistType=l.watchlistType||"":c.watchlistType="",l.watchlist_release_date!==void 0){const r=l.watchlist_release_date;r instanceof Date?c.watchlistReleaseDate=r.toISOString().split("T")[0]:typeof r=="string"&&r.includes("T")?c.watchlistReleaseDate=r.split("T")[0]:c.watchlistReleaseDate=r||""}else l.watchlistReleaseDate!==void 0?c.watchlistReleaseDate=l.watchlistReleaseDate||"":c.watchlistReleaseDate="";if(l.watchlist_number!==void 0?c.watchlistNumber=l.watchlist_number||"":l.watchlistNumber!==void 0?c.watchlistNumber=l.watchlistNumber||"":c.watchlistNumber="",Object.keys(c).forEach(r=>{r!=="watchlistType"&&r!=="watchlistReleaseDate"&&r!=="watchlistNumber"&&(c[r]=l[r]||"")}),l.is_airing!==void 0&&(console.log("DEBUG: Loading isAiring from backend:",{is_airing:l.is_airing,type:typeof l.is_airing,form_isAiring_before:c.isAiring}),c.isAiring=l.is_airing,console.log("DEBUG: form.isAiring after setting:",c.isAiring)),l.tmdb_id!==void 0&&(c.tmdbId=l.tmdb_id),l.next_season_name!==void 0&&(c.nextSeasonName=l.next_season_name),l.last_air_date!==void 0&&(c.lastAirDate=l.last_air_date),l.total_seasons!==void 0&&(c.totalSeasons=l.total_seasons),l.total_episodes!==void 0&&(c.totalEpisodes=l.total_episodes),l.series_status!==void 0&&(c.seriesStatus=l.series_status),l.networks!==void 0&&(c.networks=l.networks),l.created_by!==void 0&&(c.createdBy=l.created_by),l.next_season!==void 0&&(c.nextSeason=l.next_season),l.next_season_release!==void 0){const r=l.next_season_release;r instanceof Date?c.nextSeasonRelease=r.toISOString().split("T")[0]:typeof r=="string"&&r.includes("T")?c.nextSeasonRelease=r.split("T")[0]:c.nextSeasonRelease=r||""}l.api_rating!==void 0&&(c.apiRating=l.api_rating),l.personal_rating!==void 0&&(c.personalRating=l.personal_rating),l.description!==void 0&&(c.description=l.description),l.image_url!==void 0&&(c.imageUrl=l.image_url),l.path!==void 0&&(c.path=l.path),l.extra_link!==void 0&&(c.extraLink=l.extra_link),l.rating!==void 0&&!c.personalRating&&(c.personalRating=l.rating)}else Object.keys(c).forEach(r=>{r==="category"?c[r]=n.currentCategory||"watchlist":r==="release"?c[r]=new Date().toISOString().split("T")[0]:r==="watchlistType"?c[r]=n.currentCategory==="watchlist"?"series":"":c[r]=""})},{immediate:!0}),Ee(()=>n.currentCategory,l=>{!n.item&&l&&(c.category=l)});const Z=async()=>{var l,r,y;if(!c.title){i.value="Title is required";return}if(c.category==="watchlist"&&!c.watchlistType){i.value="Please select a type for watchlist items";return}if(c.category==="watchlist"&&!c.release){i.value="Release date is required for watchlist items";return}t.value=!0,i.value="";try{const a={...c};console.log("üîç ULTRA DEBUG - Form data before processing:",{watchlistReleaseDate:c.watchlistReleaseDate,nextSeasonRelease:c.nextSeasonRelease,watchlistNumber:c.watchlistNumber,extraLink:c.extraLink,type_watchlist:typeof c.watchlistReleaseDate,type_next:typeof c.nextSeasonRelease,type_watchlist_number:typeof c.watchlistNumber,type_extraLink:typeof c.extraLink,is_empty_watchlist:c.watchlistReleaseDate==="",is_empty_next:c.nextSeasonRelease==="",is_empty_watchlist_number:c.watchlistNumber==="",is_empty_extraLink:c.extraLink==="",is_null_watchlist:c.watchlistReleaseDate===null,is_null_next:c.nextSeasonRelease===null,is_null_watchlist_number:c.watchlistNumber===null,is_null_extraLink:c.extraLink===null,is_undefined_watchlist:c.watchlistReleaseDate===void 0,is_undefined_next:c.nextSeasonRelease===void 0,is_undefined_watchlist_number:c.watchlistNumber===void 0,is_undefined_extraLink:c.extraLink===void 0,ALL_FORM_DATA:c}),Object.keys(a).forEach(w=>{a[w]===""&&w!=="watchlistType"&&w!=="imageUrl"&&w!=="path"&&w!=="extraLink"&&w!=="watchlistReleaseDate"&&w!=="nextSeasonRelease"&&w!=="lastAirDate"&&w!=="watchlistNumber"&&(a[w]=null)}),a.extraLink===""&&(a.extraLink=null),console.log("üîç ULTRA DEBUG - Form data after null conversion:",{watchlistReleaseDate:a.watchlistReleaseDate,nextSeasonRelease:a.nextSeasonRelease,watchlistNumber:a.watchlistNumber,type_watchlist:typeof a.watchlistReleaseDate,type_next:typeof a.nextSeasonRelease,type_watchlist_number:typeof a.watchlistNumber,is_empty_watchlist:a.watchlistReleaseDate==="",is_empty_next:a.nextSeasonRelease==="",is_empty_watchlist_number:a.watchlistNumber==="",is_null_watchlist:a.watchlistReleaseDate===null,is_null_next:a.nextSeasonRelease===null,is_null_watchlist_number:a.watchlistNumber===null,is_undefined_watchlist:a.watchlistReleaseDate===void 0,is_undefined_next:a.nextSeasonRelease===void 0,is_undefined_watchlist_number:a.watchlistNumber===void 0,ALL_ITEM_DATA:a}),h.value?(a.path=h.value,a.imageUrl=h.value):a.imageUrl&&a.imageUrl.trim()?a.path=a.imageUrl:V.value&&n.item?n.item.image_url?(a.imageUrl=n.item.image_url,a.path=n.item.path||n.item.image_url):n.item.path&&(a.path=n.item.path,a.imageUrl=n.item.path):(a.imageUrl=null,a.path=null),a.apiRating!==void 0&&a.apiRating!==null&&a.apiRating!==""&&(a.apiRating=parseFloat(a.apiRating)),a.personalRating!==void 0&&a.personalRating!==null&&a.personalRating!==""&&(a.personalRating=parseFloat(a.personalRating)),a.count!==void 0&&a.count!==null&&a.count!==""&&(a.count=parseInt(a.count)),a.spielzeit!==void 0&&a.spielzeit!==null&&a.spielzeit!==""&&(a.spielzeit=parseInt(a.spielzeit)),a.nextSeason!==void 0&&a.nextSeason!==null&&a.nextSeason!==""&&(a.nextSeason=parseInt(a.nextSeason)),a.watchlistType!==void 0&&(a.watchlist_type=a.watchlistType||null,delete a.watchlistType),a.watchlistReleaseDate!==void 0&&(console.log("üîç ULTRA DEBUG - watchlistReleaseDate mapping:",{original:a.watchlistReleaseDate,type:typeof a.watchlistReleaseDate,is_empty:a.watchlistReleaseDate==="",is_null:a.watchlistReleaseDate===null,is_undefined:a.watchlistReleaseDate===void 0,mapped:a.watchlistReleaseDate===""?null:a.watchlistReleaseDate,FINAL_VALUE:a.watchlistReleaseDate===""?null:a.watchlistReleaseDate,BEFORE_DELETE:a.watchlistReleaseDate}),a.watchlist_release_date=a.watchlistReleaseDate===""?null:a.watchlistReleaseDate,console.log("üîç ULTRA DEBUG - watchlistReleaseDate after mapping:",{watchlist_release_date:a.watchlist_release_date,type:typeof a.watchlist_release_date,is_null:a.watchlist_release_date===null,is_undefined:a.watchlist_release_date===void 0}),delete a.watchlistReleaseDate),a.watchlistNumber!==void 0&&(console.log("üîç ULTRA DEBUG - watchlistNumber mapping:",{original:a.watchlistNumber,type:typeof a.watchlistNumber,is_empty:a.watchlistNumber==="",is_null:a.watchlistNumber===null,is_undefined:a.watchlistNumber===void 0,mapped:a.watchlistNumber===""?null:a.watchlistNumber,FINAL_VALUE:a.watchlistNumber===""?null:a.watchlistNumber,BEFORE_DELETE:a.watchlistNumber}),a.watchlist_number=a.watchlistNumber===""?null:a.watchlistNumber,console.log("üîç ULTRA DEBUG - watchlistNumber after mapping:",{watchlist_number:a.watchlist_number,type:typeof a.watchlist_number,is_null:a.watchlist_number===null,is_undefined:a.watchlist_number===void 0}),delete a.watchlistNumber),a.isAiring!==void 0&&(a.is_airing=a.isAiring,delete a.isAiring),a.tmdbId!==void 0&&(a.tmdb_id=a.tmdbId,delete a.tmdbId),a.nextSeasonName!==void 0&&(a.next_season_name=a.nextSeasonName,delete a.nextSeasonName),a.lastAirDate!==void 0&&(a.last_air_date=a.lastAirDate,delete a.lastAirDate),a.totalSeasons!==void 0&&(a.total_seasons=a.totalSeasons,delete a.totalSeasons),a.totalEpisodes!==void 0&&(a.total_episodes=a.totalEpisodes,delete a.totalEpisodes),a.seriesStatus!==void 0&&(a.series_status=a.seriesStatus,delete a.seriesStatus),a.networks!==void 0&&(a.networks=a.networks),a.createdBy!==void 0&&(a.created_by=a.createdBy,delete a.createdBy),a.nextSeason!==void 0&&(a.next_season=a.nextSeason||null,delete a.nextSeason),a.nextSeasonRelease!==void 0&&(console.log("üîç ULTRA DEBUG - nextSeasonRelease mapping:",{original:a.nextSeasonRelease,type:typeof a.nextSeasonRelease,is_empty:a.nextSeasonRelease==="",is_null:a.nextSeasonRelease===null,is_undefined:a.nextSeasonRelease===void 0,mapped:a.nextSeasonRelease===""?null:a.nextSeasonRelease,FINAL_VALUE:a.nextSeasonRelease===""?null:a.nextSeasonRelease,BEFORE_DELETE:a.nextSeasonRelease}),a.next_season_release=a.nextSeasonRelease===""?null:a.nextSeasonRelease,console.log("üîç ULTRA DEBUG - nextSeasonRelease after mapping:",{next_season_release:a.next_season_release,type:typeof a.next_season_release,is_null:a.next_season_release===null,is_undefined:a.next_season_release===void 0}),delete a.nextSeasonRelease),a.personalRating!==void 0?(a.rating=a.personalRating,delete a.personalRating):a.apiRating!==void 0&&(a.rating=a.apiRating,delete a.apiRating),a.imageUrl&&(a.image_url=a.imageUrl,delete a.imageUrl),a.extraLink!==void 0&&(console.log("üîç ULTRA DEBUG - extraLink processing:",{original_extraLink:a.extraLink,type:typeof a.extraLink,is_empty:a.extraLink==="",is_null:a.extraLink===null,is_undefined:a.extraLink===void 0,mapped_to:"extra_link"}),a.extraLink&&a.extraLink.trim()!==""?a.extra_link=a.extraLink:a.extra_link=null,delete a.extraLink,console.log("üîç ULTRA DEBUG - extraLink after mapping:",{extra_link:a.extra_link,type:typeof a.extra_link,is_null:a.extra_link===null,is_undefined:a.extra_link===void 0})),V.value&&n.item?(console.log("üîç ULTRA DEBUG - Final data being sent to store:",{id:n.item.id,watchlist_release_date:a.watchlist_release_date,next_season_release:a.next_season_release,watchlist_number:a.watchlist_number,extra_link:a.extra_link,is_airing:a.is_airing,watchlist_type:a.watchlist_type,type_watchlist_release:typeof a.watchlist_release_date,type_next_season:typeof a.next_season_release,type_watchlist_number:typeof a.watchlist_number,type_extra_link:typeof a.extra_link,is_null_watchlist:a.watchlist_release_date===null,is_null_next:a.next_season_release===null,is_null_watchlist_number:a.watchlist_number===null,is_null_extra_link:a.extra_link===null,is_undefined_watchlist:a.watchlist_release_date===void 0,is_undefined_next:a.next_season_release===void 0,is_undefined_watchlist_number:a.watchlist_number===void 0,is_undefined_extra_link:a.extra_link===void 0,FULL_ITEM_DATA:a}),await o.updateMediaItem(n.item.id,a)):await o.addMediaItem(a),ue()}catch(a){a.isDuplicate||((l=a.response)==null?void 0:l.status)===409&&((y=(r=a.response)==null?void 0:r.data)!=null&&y.duplicate)?i.value="Ein Eintrag mit diesem Titel und dieser Kategorie existiert bereits. Bitte w√§hlen Sie einen anderen Titel oder bearbeiten Sie den bestehenden Eintrag.":i.value=a.message||"Failed to save item"}finally{t.value=!1}},ue=()=>{i.value="",e("close")},v=()=>{document.body.style.overflow="hidden"},N=()=>{document.body.style.overflow=""};st(()=>{v()}),ht(()=>{N()});const X=()=>{e("delete",n.item),ue()},Te=async()=>{if(h.value){u.value=[];return}if(d.value&&clearTimeout(d.value),!c.title||c.title.length<3){u.value=[];return}d.value=setTimeout(async()=>{try{const l=c.category==="watchlist"?c.watchlistType:c.category;if(c.category==="watchlist"&&!c.watchlistType){u.value=[];return}let r=[],y=[];if(l==="buecher"){const a=await tt.searchBooks(c.title,10);a.success&&a.data&&(y=a.data.map(w=>({title:w.title,release:w.publishedDate?ke(w.publishedDate):"",genre:w.categories?w.categories.join(", "):"",platforms:w.author||"",link:w.link||"",imageUrl:w.imageUrl||"",rating:"",apiSource:w.apiSource||a.source,id:w.id,author:w.author,description:w.description,publisher:w.publisher,isbn10:w.isbn10,isbn13:w.isbn13})))}else r=await re.searchApi(c.title,l,10),r&&r.length>0&&(y=r.map(a=>({title:a.title,release:a.release,genre:a.genre||"",description:a.overview||"",platforms:a.platforms||"",link:a.link||"",imageUrl:a.image||"",rating:a.rating||"",apiSource:a.api_source||"",id:a.id||""})));y.length>0?u.value=y:u.value=[{title:`"${c.title}" - Keine Ergebnisse gefunden`,release:"",genre:"Bitte manuell ausf√ºllen",isPlaceholder:!0}]}catch{u.value=[{title:`"${c.title}" - API nicht verf√ºgbar`,release:"",genre:"Bitte manuell ausf√ºllen",isPlaceholder:!0}]}},500)},Me=async l=>{if(l.isPlaceholder){u.value=[];return}if(c.title=l.title,l.release&&(c.release=l.release),l.platforms&&(c.platforms=l.platforms),l.genre&&(c.genre=l.genre),l.description&&(c.description=l.description),l.link&&(c.link=l.link),l.rating&&(c.apiRating=l.rating),(l.apiSource==="google_books"||l.apiSource==="wikipedia")&&(l.author&&(c.platforms=l.author),l.publisher)){const r=c.link||"";c.link=r||`Publisher: ${l.publisher}`}l.imageUrl?(c.imageUrl=l.imageUrl,c.path=l.imageUrl):(c.imageUrl="",c.path=""),c.category==="series"&&(console.log("üîç Auto-fetching TMDB info for series:",c.title),await Ae()),u.value=[]},ie=l=>l?new Date(l).toLocaleDateString():"",ke=l=>{if(!l)return"";let r;if(typeof l=="string"){if(/^\d{4}$/.test(l))return`${l}-01-01`;if(/^\d{4}-\d{2}$/.test(l))return`${l}-01`;if(/^\d{4}-\d{2}-\d{2}$/.test(l))return l;r=new Date(l)}else r=new Date(l);return isNaN(r.getTime())?"":r.toISOString().split("T")[0]},Se=l=>l&&(l.startsWith("http://")?l.replace("http://","https://"):l),$=()=>{var w;if(!c.release)return"";const l=new Date(c.release),r=new Date;r.setHours(0,0,0,0),l.setHours(0,0,0,0);const y=l.getTime()-r.getTime(),a=Math.ceil(y/(1e3*3600*24));if(a>0)return a===1?"Tomorrow!":a<=7?`${a} days left`:a<=30?`${a} days left`:`${Math.ceil(a/30)} months left`;if(a===0)return"Released today!";{const C=((w=c.watchlistType)==null?void 0:w.toLowerCase())||"media";return C==="game"?"Unplayed yet":C==="series"||C==="movie"?"Unwatched yet":"Unconsumed yet"}},O=()=>{var l;(l=m.value)==null||l.click()},K=async l=>{const r=l.target.files[0];if(r){if(!r.type.startsWith("image/")){i.value="Please select a valid image file";return}if(r.size>10*1024*1024){i.value="Image file too large. Maximum size is 10MB";return}t.value=!0,i.value="";try{const y=c.title.replace(/[^a-zA-Z0-9\s\-_\.]/g,"").trim()||"item",a=Date.now(),w=r.name.split(".").pop()||"jpg",C=`images_downloads/uploads/${y}_${a}.${w}`,G=await re.uploadImage(r,C);G.success?(h.value=G.saved,c.path=G.saved,c.imageUrl=G.saved):i.value=G.error||"Failed to upload image"}catch(y){i.value=y.message||"Failed to upload image"}finally{t.value=!1}}},Q=()=>h.value?h.value.startsWith("storage/")?`/${h.value}`:`/${h.value}`:c.imageUrl?c.imageUrl.startsWith("http")?c.imageUrl:c.imageUrl.startsWith("storage/")?`/${c.imageUrl}`:`/${c.imageUrl}`:"",fe=l=>{l.target.style.display="none",i.value="Failed to load image: "+l.target.src},he=l=>{i.value&&i.value.includes("Failed to load image")&&(i.value="")},ye=l=>{},xe=l=>{},Ie=()=>{c.imageUrl="",c.path="",h.value="",m.value&&(m.value.value="")},pe=()=>{h.value="",c.imageUrl===h.value&&(c.imageUrl=""),c.path===h.value&&(c.path=""),m.value&&(m.value.value="")},Ce=F(()=>!!(c.imageUrl||h.value)),ge=l=>{u.value=[]},De=()=>{D.value=!D.value},Ae=async()=>{if(!c.title||c.title.trim()===""){T.value="Please enter a series title first";return}console.log("üîç Starting TMDB API check for:",c.title),_.value=!0,T.value="",I.value=!1;try{console.log("üì° Calling checkSeriesInfo API...");const l=await re.checkSeriesInfo(c.title);if(console.log("üì° API Response:",l),l.success&&l.data){const r=l.data;console.log("üìä Series Data received:",r),r.tmdb_id&&(c.tmdbId=r.tmdb_id,console.log("‚úÖ Set tmdbId:",r.tmdb_id)),r.is_airing!==void 0&&(c.isAiring=r.is_airing,console.log("‚úÖ Set isAiring:",r.is_airing)),r.next_episode&&(c.nextSeason=r.next_episode.season_number,c.nextSeasonRelease=r.next_episode.air_date,c.nextSeasonName=r.next_episode.name,console.log("‚úÖ Set next season info:",{season:r.next_episode.season_number,release:r.next_episode.air_date,name:r.next_episode.name})),r.last_air_date&&(c.lastAirDate=r.last_air_date,console.log("‚úÖ Set lastAirDate:",r.last_air_date)),r.number_of_seasons&&(c.totalSeasons=r.number_of_seasons,console.log("‚úÖ Set totalSeasons:",r.number_of_seasons)),r.number_of_episodes&&(c.totalEpisodes=r.number_of_episodes,console.log("‚úÖ Set totalEpisodes:",r.number_of_episodes)),r.status&&(c.seriesStatus=r.status,console.log("‚úÖ Set seriesStatus:",r.status)),r.networks&&r.networks.length>0&&(c.networks=r.networks.join(", "),console.log("‚úÖ Set networks:",r.networks.join(", "))),r.created_by&&r.created_by.length>0&&(c.createdBy=r.created_by.join(", "),console.log("‚úÖ Set createdBy:",r.created_by.join(", "))),r.overview&&(c.description=r.overview,console.log("‚úÖ Set description")),r.genres&&r.genres.length>0&&(c.genre=r.genres.join(", "),console.log("‚úÖ Set genre:",r.genres.join(", "))),r.poster_path&&(c.imageUrl=r.poster_path,c.path=r.poster_path,console.log("‚úÖ Set imageUrl:",r.poster_path)),console.log("üìù Final form state:",c),I.value=!0,setTimeout(()=>{I.value=!1},3e3)}else console.error("‚ùå API returned error:",l.error),T.value=l.error||"Failed to fetch series information"}catch(l){console.error("‚ùå TMDB API check failed:",l),T.value=l.message||"Failed to check series information"}finally{_.value=!1}};return{form:c,loading:t,error:i,apiResults:u,isEditing:V,isGame:oe,isSeries:H,isWatchlist:me,imageUploadRef:m,uploadedImagePath:h,apiLoading:_,apiError:T,apiSuccess:I,seriesDetailsExpanded:D,handleSave:Z,closeModal:ue,deleteItem:X,searchApi:Te,selectApiResult:Me,formatDate:ie,formatDateForInput:ke,ensureHttpsUrl:Se,getReleasePreview:$,triggerImageUpload:O,handleImageUpload:K,getImagePreviewUrl:Q,handleImageError:fe,handleImageLoad:he,handleImageLoadStart:ye,handleImageLoadEnd:xe,clearImage:Ie,removeUploadedImage:pe,shouldShowImagePreview:Ce,handlePreferencesChanged:ge,toggleSeriesDetails:De,checkSeriesAPI:Ae}}},Eo={class:"form-area category-area"},Uo={class:"form-group"},Bo={class:"form-area title-area"},Lo={class:"form-group"},Po={class:"search-container"},Fo=["placeholder","disabled"],No={key:0,class:"search-results"},Go=["onClick"],Wo={class:"result-thumbnail"},Vo=["src","alt"],Oo={key:1,class:"no-image"},jo={class:"result-content"},zo={class:"result-title"},Yo={class:"result-meta"},Ho={key:0},qo={key:1},Qo={key:2,class:"rating"},Jo={class:"form-area details-area"},Ko={class:"form-group"},Zo={for:"release"},Xo={key:0,class:"required"},$o=["required"],en={class:"form-group"},tn={key:0,class:"form-group"},sn={class:"form-group"},an={class:"form-area button-area"},on={class:"control-buttons"},nn=["disabled"],ln=["disabled"],rn=["disabled"],dn={class:"main-form-area"},cn={class:"form-columns"},un={class:"form-column-left"},mn={class:"form-group"},gn={class:"form-group"},fn={class:"form-group"},hn={class:"form-group"},pn={class:"form-column-right"},vn={class:"form-group"},yn={class:"form-group"},bn={class:"form-group"},_n={class:"image-input-group"},wn=["disabled"],kn={key:0,class:"upload-success"},Sn={key:0,class:"watchlist-fields"},xn={class:"form-group"},In={key:0,class:"field-error"},Cn={class:"form-group"},Dn={class:"form-group"},An={class:"form-group"},Tn={key:1,class:"game-fields"},Mn={class:"form-group"},Rn={class:"collapsible-sections"},En={key:0,class:"collapsible-section"},Un={key:0,class:"collapsible-content"},Bn={class:"form-row"},Ln={class:"form-group"},Pn={class:"form-group"},Fn={class:"form-row"},Nn={class:"form-group"},Gn={class:"form-group"},Wn={class:"form-row"},Vn={class:"form-group"},On={class:"form-group"},jn={class:"form-row"},zn={class:"form-group full-width"},Yn={class:"form-row"},Hn={class:"form-group full-width"},qn={key:0,class:"form-row"},Qn={class:"form-group"},Jn={class:"form-row"},Kn={class:"form-group full-width"},Zn={class:"api-check-container"},Xn=["disabled"],$n={key:0},ei={key:1},ti={key:0,class:"api-error"},si={key:1,class:"api-success"},ai={key:3,class:"error-message"};function oi(n,e,o,t,i,u){const d=le("BooksApiControlPanel");return g(),f("div",{class:"modal",onClick:e[36]||(e[36]=(...m)=>t.closeModal&&t.closeModal(...m))},[s("div",{class:"modal-content",onClick:e[35]||(e[35]=ce(()=>{},["stop"]))},[s("h2",null,p(t.isEditing?"Edit Item":"Add Item"),1),s("form",{onSubmit:e[34]||(e[34]=ce((...m)=>t.handleSave&&t.handleSave(...m),["prevent"]))},[s("div",Eo,[s("div",Uo,[e[38]||(e[38]=s("label",{for:"category"},"Category:",-1)),A(s("select",{id:"category","onUpdate:modelValue":e[0]||(e[0]=m=>t.form.category=m),required:""},[...e[37]||(e[37]=[Ge('<option value="watchlist" data-v-5a61e078>Watchlist</option><option value="game" data-v-5a61e078>Game</option><option value="series" data-v-5a61e078>Series</option><option value="movie" data-v-5a61e078>Movie</option><option value="buecher" data-v-5a61e078>B√ºcher</option>',5)])],512),[[we,t.form.category]])])]),s("div",Bo,[s("div",Lo,[e[39]||(e[39]=s("label",{for:"title"},"Title:",-1)),s("div",Po,[A(s("input",{type:"text",id:"title","onUpdate:modelValue":e[1]||(e[1]=m=>t.form.title=m),onInput:e[2]||(e[2]=(...m)=>t.searchApi&&t.searchApi(...m)),required:"",placeholder:t.isWatchlist?"Enter title (API search + manual input available)":"Enter title",disabled:t.loading},null,40,Fo),[[E,t.form.title]]),t.apiResults.length>0?(g(),f("div",No,[(g(!0),f(te,null,se(t.apiResults,m=>(g(),f("div",{key:m.title,class:"search-result-item",onClick:h=>t.selectApiResult(m)},[s("div",Wo,[m.imageUrl?(g(),f("img",{key:0,src:t.ensureHttpsUrl(m.imageUrl),alt:m.title},null,8,Vo)):(g(),f("div",Oo,[s("span",null,p(m.title.charAt(0).toUpperCase()),1)]))]),s("div",jo,[s("div",zo,p(m.title),1),s("div",Yo,[m.release?(g(),f("span",Ho,p(t.formatDate(m.release)),1)):S("",!0),m.genre?(g(),f("span",qo,p(m.genre),1)):S("",!0),m.rating?(g(),f("span",Qo,"‚≠ê "+p(m.rating),1)):S("",!0)])])],8,Go))),128))])):S("",!0)])])]),s("div",Jo,[s("div",Ko,[s("label",Zo,[Ye(p(t.isWatchlist?"Release Date:":"Release:")+" ",1),t.isWatchlist?(g(),f("span",Xo,"*")):S("",!0)]),A(s("input",{type:"date",id:"release","onUpdate:modelValue":e[3]||(e[3]=m=>t.form.release=m),required:t.isWatchlist},null,8,$o),[[E,t.form.release]])]),s("div",en,[e[40]||(e[40]=s("label",{for:"personalRating"},"Personal Rating:",-1)),A(s("input",{type:"number",id:"personalRating","onUpdate:modelValue":e[4]||(e[4]=m=>t.form.personalRating=m),step:"0.1",min:"0",max:"10",placeholder:"0-10"},null,512),[[E,t.form.personalRating]])]),t.isSeries?(g(),f("div",tn,[e[42]||(e[42]=s("label",{for:"isAiring"},"Status:",-1)),A(s("select",{id:"isAiring","onUpdate:modelValue":e[5]||(e[5]=m=>t.form.isAiring=m)},[...e[41]||(e[41]=[s("option",{value:!1},"Finished",-1),s("option",{value:!0},"Airing",-1)])],512),[[we,t.form.isAiring]])])):S("",!0),s("div",sn,[e[43]||(e[43]=s("label",{for:"apiRating"},"API Rating:",-1)),A(s("input",{type:"number",id:"apiRating","onUpdate:modelValue":e[6]||(e[6]=m=>t.form.apiRating=m),step:"0.1",min:"0",max:"10",placeholder:"0-10",readonly:""},null,512),[[E,t.form.apiRating]])])]),s("div",an,[s("div",on,[s("button",{type:"submit",disabled:t.loading,class:"save-btn"},p(t.loading?"Saving...":"üíæ Save"),9,nn),s("button",{type:"button",onClick:e[7]||(e[7]=(...m)=>t.closeModal&&t.closeModal(...m)),disabled:t.loading,class:"cancel-btn"}," ‚úï Cancel ",8,ln),t.isEditing?(g(),f("button",{key:0,type:"button",onClick:e[8]||(e[8]=(...m)=>t.deleteItem&&t.deleteItem(...m)),disabled:t.loading,class:"delete-btn"}," üóëÔ∏è Delete ",8,rn)):S("",!0)])]),s("div",dn,[s("div",cn,[s("div",un,[s("div",mn,[e[44]||(e[44]=s("label",{for:"views"},"Views:",-1)),A(s("input",{type:"number",id:"views","onUpdate:modelValue":e[9]||(e[9]=m=>t.form.count=m),min:"0",placeholder:"0"},null,512),[[E,t.form.count]])]),s("div",gn,[e[45]||(e[45]=s("label",{for:"discovered"},"Discovered:",-1)),A(s("input",{type:"date",id:"discovered","onUpdate:modelValue":e[10]||(e[10]=m=>t.form.discovered=m)},null,512),[[E,t.form.discovered]])]),s("div",fn,[e[46]||(e[46]=s("label",{for:"platforms"},"Platforms:",-1)),A(s("input",{type:"text",id:"platforms","onUpdate:modelValue":e[11]||(e[11]=m=>t.form.platforms=m),placeholder:"PC, PS5, Xbox"},null,512),[[E,t.form.platforms]])]),s("div",hn,[e[47]||(e[47]=s("label",{for:"genre"},"Genre:",-1)),A(s("input",{type:"text",id:"genre","onUpdate:modelValue":e[12]||(e[12]=m=>t.form.genre=m),placeholder:"Action, Adventure, RPG"},null,512),[[E,t.form.genre]])])]),s("div",pn,[s("div",vn,[e[48]||(e[48]=s("label",{for:"description"},"Description:",-1)),A(s("textarea",{id:"description","onUpdate:modelValue":e[13]||(e[13]=m=>t.form.description=m),placeholder:"Enter description...",rows:"3"},null,512),[[E,t.form.description]])]),s("div",yn,[e[49]||(e[49]=s("label",{for:"link"},"Link:",-1)),A(s("input",{type:"url",id:"link","onUpdate:modelValue":e[14]||(e[14]=m=>t.form.link=m),placeholder:"https://..."},null,512),[[E,t.form.link]])]),s("div",bn,[e[50]||(e[50]=s("label",{for:"imageUrl"},"Image URL:",-1)),s("div",_n,[A(s("input",{type:"text",id:"imageUrl","onUpdate:modelValue":e[15]||(e[15]=m=>t.form.imageUrl=m),placeholder:"https://... or leave empty for API images"},null,512),[[E,t.form.imageUrl]]),s("button",{type:"button",onClick:e[16]||(e[16]=(...m)=>t.triggerImageUpload&&t.triggerImageUpload(...m)),class:"upload-btn",disabled:t.loading}," üìÅ Upload ",8,wn)]),t.uploadedImagePath?(g(),f("div",kn,[Ye(" ‚úÖ Image uploaded: "+p(t.uploadedImagePath)+" ",1),s("button",{type:"button",onClick:e[17]||(e[17]=(...m)=>t.removeUploadedImage&&t.removeUploadedImage(...m)),class:"remove-uploaded-btn",title:"Remove uploaded image to enable API search"}," ‚úï Remove ")])):S("",!0)])])])]),t.form.category==="watchlist"?(g(),f("div",Sn,[s("div",xn,[e[52]||(e[52]=s("label",{for:"watchlistType"},[Ye("Type: "),s("span",{class:"required"},"*")],-1)),A(s("select",{id:"watchlistType","onUpdate:modelValue":e[18]||(e[18]=m=>t.form.watchlistType=m)},[...e[51]||(e[51]=[Ge('<option value="" data-v-5a61e078>Select Type</option><option value="game" data-v-5a61e078>Game</option><option value="series" data-v-5a61e078>Series</option><option value="movie" data-v-5a61e078>Movie</option><option value="buecher" data-v-5a61e078>B√ºcher</option>',5)])],512),[[we,t.form.watchlistType]]),t.form.category==="watchlist"&&!t.form.watchlistType?(g(),f("div",In," Please select a type for watchlist items ")):S("",!0)]),s("div",Cn,[e[53]||(e[53]=s("label",{for:"watchlistReleaseDate"},"Watchlist Release Date",-1)),A(s("input",{type:"date",id:"watchlistReleaseDate","onUpdate:modelValue":e[19]||(e[19]=m=>t.form.watchlistReleaseDate=m),placeholder:"When does this release?"},null,512),[[E,t.form.watchlistReleaseDate]])]),s("div",Dn,[e[54]||(e[54]=s("label",{for:"watchlistNumber"},"Watchlist Number",-1)),A(s("input",{type:"number",id:"watchlistNumber","onUpdate:modelValue":e[20]||(e[20]=m=>t.form.watchlistNumber=m),placeholder:"Enter a number",min:"1"},null,512),[[E,t.form.watchlistNumber]])]),s("div",An,[e[55]||(e[55]=s("label",{for:"extraLink"},"Extra Link:",-1)),A(s("input",{type:"url",id:"extraLink","onUpdate:modelValue":e[21]||(e[21]=m=>t.form.extraLink=m),placeholder:"https://... (e.g., streaming platform, official website)"},null,512),[[E,t.form.extraLink]]),e[56]||(e[56]=s("div",{class:"field-hint"},"Optional: Additional link for watchlist items (e.g., streaming platform, official website)",-1))])])):S("",!0),t.isGame?(g(),f("div",Tn,[s("div",Mn,[e[57]||(e[57]=s("label",{for:"playtime"},"Playtime (Minutes):",-1)),A(s("input",{type:"number",id:"playtime","onUpdate:modelValue":e[22]||(e[22]=m=>t.form.spielzeit=m),min:"0",placeholder:"0"},null,512),[[E,t.form.spielzeit]])])])):S("",!0),s("div",Rn,[t.isSeries?(g(),f("div",En,[s("button",{type:"button",onClick:e[23]||(e[23]=(...m)=>t.toggleSeriesDetails&&t.toggleSeriesDetails(...m)),class:z(["collapsible-header",{expanded:t.seriesDetailsExpanded}])}," üì∫ Series Details "+p(t.seriesDetailsExpanded?"‚ñº":"‚ñ∂"),3),t.seriesDetailsExpanded?(g(),f("div",Un,[s("div",Bn,[s("div",Ln,[e[58]||(e[58]=s("label",{for:"nextSeasonName"},"Next Season Name:",-1)),A(s("input",{type:"text",id:"nextSeasonName","onUpdate:modelValue":e[24]||(e[24]=m=>t.form.nextSeasonName=m),placeholder:"e.g., The Final Season"},null,512),[[E,t.form.nextSeasonName]])]),s("div",Pn,[e[59]||(e[59]=s("label",{for:"lastAirDate"},"Last Air Date:",-1)),A(s("input",{type:"date",id:"lastAirDate","onUpdate:modelValue":e[25]||(e[25]=m=>t.form.lastAirDate=m)},null,512),[[E,t.form.lastAirDate]])])]),s("div",Fn,[s("div",Nn,[e[60]||(e[60]=s("label",{for:"totalSeasons"},"Total Seasons:",-1)),A(s("input",{type:"number",id:"totalSeasons","onUpdate:modelValue":e[26]||(e[26]=m=>t.form.totalSeasons=m),min:"0",placeholder:"0"},null,512),[[E,t.form.totalSeasons]])]),s("div",Gn,[e[61]||(e[61]=s("label",{for:"totalEpisodes"},"Total Episodes:",-1)),A(s("input",{type:"number",id:"totalEpisodes","onUpdate:modelValue":e[27]||(e[27]=m=>t.form.totalEpisodes=m),min:"0",placeholder:"0"},null,512),[[E,t.form.totalEpisodes]])])]),s("div",Wn,[s("div",Vn,[e[63]||(e[63]=s("label",{for:"seriesStatus"},"Series Status:",-1)),A(s("select",{id:"seriesStatus","onUpdate:modelValue":e[28]||(e[28]=m=>t.form.seriesStatus=m)},[...e[62]||(e[62]=[Ge('<option value="" data-v-5a61e078>Select Status</option><option value="Returning Series" data-v-5a61e078>Returning Series</option><option value="Ended" data-v-5a61e078>Ended</option><option value="In Production" data-v-5a61e078>In Production</option><option value="Canceled" data-v-5a61e078>Canceled</option>',5)])],512),[[we,t.form.seriesStatus]])]),s("div",On,[e[64]||(e[64]=s("label",{for:"networks"},"Networks:",-1)),A(s("input",{type:"text",id:"networks","onUpdate:modelValue":e[29]||(e[29]=m=>t.form.networks=m),placeholder:"e.g., Netflix, HBO"},null,512),[[E,t.form.networks]])])]),s("div",jn,[s("div",zn,[e[65]||(e[65]=s("label",{for:"createdBy"},"Created By:",-1)),A(s("input",{type:"text",id:"createdBy","onUpdate:modelValue":e[30]||(e[30]=m=>t.form.createdBy=m),placeholder:"e.g., The Duffer Brothers"},null,512),[[E,t.form.createdBy]])])]),s("div",Yn,[s("div",Hn,[e[66]||(e[66]=s("label",{for:"extraLink"},"Extra Link:",-1)),A(s("input",{type:"url",id:"extraLink","onUpdate:modelValue":e[31]||(e[31]=m=>t.form.extraLink=m),placeholder:"https://... (e.g., streaming platform, official website)"},null,512),[[E,t.form.extraLink]]),e[67]||(e[67]=s("div",{class:"field-hint"},"Optional: Additional link for series (e.g., streaming platform, official website)",-1))])]),t.form.isAiring?(g(),f("div",qn,[s("div",Qn,[e[68]||(e[68]=s("label",{for:"nextSeasonRelease"},"Next Season Release:",-1)),A(s("input",{type:"date",id:"nextSeasonRelease","onUpdate:modelValue":e[32]||(e[32]=m=>t.form.nextSeasonRelease=m)},null,512),[[E,t.form.nextSeasonRelease]])])])):S("",!0),s("div",Jn,[s("div",Kn,[e[69]||(e[69]=s("label",null,"TMDB Series Information:",-1)),s("div",Zn,[s("button",{type:"button",onClick:e[33]||(e[33]=(...m)=>t.checkSeriesAPI&&t.checkSeriesAPI(...m)),disabled:t.loading||!t.form.title,class:"api-check-btn"},[t.apiLoading?(g(),f("span",$n,"üîç Checking...")):(g(),f("span",ei,"üîç Check Series Info"))],8,Xn),t.apiError?(g(),f("div",ti,p(t.apiError),1)):S("",!0),t.apiSuccess?(g(),f("div",si," ‚úÖ Series information updated from TMDB ")):S("",!0)])])])])):S("",!0)])):S("",!0)]),t.form.category==="buecher"||t.form.watchlistType==="buecher"?(g(),Pe(d,{key:2,expanded:!1,onPreferencesChanged:t.handlePreferencesChanged},null,8,["onPreferencesChanged"])):S("",!0),t.error?(g(),f("div",ai,p(t.error),1)):S("",!0)],32)])])}const ni=ae(Ro,[["render",oi],["__scopeId","data-v-5a61e078"]]),ii={name:"BulkAddModal",props:{show:{type:Boolean,default:!1},currentCategory:{type:String,default:""}},emits:["close"],setup(n,{emit:e}){const o=qe(),t=k(1),i=k(!1),u=k(!0),d=k(!1),m=k(0),h=k(0),_=k(0),T=k(0),I=k(null),D=k(""),c=k(""),V=k([]),oe=k([]),H=k({category:"",itemsText:"",defaultRating:null}),me=F(()=>H.value.category&&H.value.itemsText.trim()&&!i.value),Z=F(()=>{const O=ue().length;return O>0?Math.round(m.value/O*100):0}),ue=()=>!H.value.itemsText||!H.value.itemsText.trim()?[]:H.value.itemsText.split(`
`).map(O=>O.trim()).filter(O=>O.length>0).map(O=>{const K=O.split("|").map(Q=>Q.trim());return{searchTerm:K[0]||"",additionalInfo:K[1]||null}}),v=()=>{m.value=0,h.value=0,_.value=0,T.value=0,I.value=null,D.value="",c.value="",V.value=[],oe.value=[]},N=(O,K,Q)=>{I.value=O,D.value=K,c.value=Q},X=(O,K,Q="")=>{const fe={searching:"Searching...",found:"Found",adding:"Adding...",added:"Added",skipped:"Skipped",error:"Error"}[K]||K;V.value.push({title:O,status:K,statusText:fe,message:Q})},Te=async()=>{var Q,fe,he,ye,xe,Ie,pe,Ce;if(!me.value)return;t.value=2,i.value=!0,u.value=!0,v();const O=ue();let K=0;try{let ge=[];const De=localStorage.getItem("authToken"),Ae=localStorage.getItem("currentUser");if(De&&Ae)try{N({title:"Checking all items..."},"searching","Checking profile for duplicates..."),ge=(await re.checkExistingItems(O.map(r=>({title:r.searchTerm,category:H.value.category})))).existing_items||[]}catch(l){console.warn("Failed to check existing items, falling back to individual checks:",l)}for(let l=0;l<O.length;l++){const r=O[l];m.value=l+1,N({title:r.searchTerm,description:r.additionalInfo},"searching","Processing...");try{let y=!1;if(De&&Ae&&ge.length>0?y=ge.some(C=>C.title.toLowerCase().trim()===r.searchTerm.toLowerCase().trim()):y=(o.mediaData||[]).some(G=>G.title&&G.title.toLowerCase().trim()===r.searchTerm.toLowerCase().trim()&&G.category===H.value.category),y){console.log(`‚úÖ Found exact match in profile for "${r.searchTerm}"`),N({title:r.searchTerm},"skipped","Already exists in profile - skipped"),oe.value.push({searchTerm:r.searchTerm,additionalInfo:r.additionalInfo,reason:"duplicate"}),_.value++,X(r.searchTerm,"skipped","Already exists in profile - skipped");continue}N({title:r.searchTerm,description:r.additionalInfo},"searching","Searching API..."),X(r.searchTerm,"searching","Searching API...");const a=await re.searchApi(r.searchTerm,H.value.category,1);if(a&&a.length>0&&a[0]&&a[0].api_source&&a[0].image){const C=a[0];console.log(`‚úÖ Found real API data for "${r.searchTerm}":`,{title:C.title,api_source:C.api_source,has_image:!!C.image,has_genre:!!C.genre,has_release:!!C.release}),N({title:C.title,description:`Found: ${C.genre||"Unknown genre"} ‚Ä¢ ${C.release||"Unknown year"} ‚Ä¢ ${C.api_source}`},"found","Found in API with data"),X(r.searchTerm,"found",`Found: ${C.title} (${C.api_source})`);let G=null;if(H.value.category==="series"){N({title:C.title},"fetching","Fetching TMDB series info...");try{console.log("üîç Fetching TMDB info for series:",C.title);const de=await re.checkSeriesInfo(C.title);de.success&&de.data&&(G=de.data,console.log("‚úÖ TMDB data received:",G))}catch(de){console.warn("‚ö†Ô∏è Failed to fetch TMDB info:",de)}}N({title:C.title},"adding","Adding to library...");const ne={title:C.title,category:H.value.category,release:C.release||null,rating:C.rating?Math.round(C.rating):H.value.defaultRating||null,platforms:C.platforms||null,genre:C.genre||null,link:C.link||null,path:C.image||null,external_id:C.id||null,count:1,is_airing:!1,spielzeit:0,description:C.overview||r.additionalInfo||null,...G&&{tmdb_id:G.tmdb_id,is_airing:G.is_airing||!1,next_season:((Q=G.next_episode)==null?void 0:Q.season_number)||null,next_season_release:((fe=G.next_episode)==null?void 0:fe.air_date)||null,next_season_name:((he=G.next_episode)==null?void 0:he.name)||null,last_air_date:G.last_air_date||null,total_seasons:G.number_of_seasons||null,total_episodes:G.number_of_episodes||null,series_status:G.status||null,networks:((ye=G.networks)==null?void 0:ye.join(", "))||null,created_by:((xe=G.created_by)==null?void 0:xe.join(", "))||null}};await o.addMediaItem(ne,!0),h.value++,N({title:C.title},"added","Successfully added with API data"),X(r.searchTerm,"added",`Added: ${C.title} with API data`)}else console.log(`‚ùå No real API data found for "${r.searchTerm}"`),N({title:r.searchTerm},"skipped","No API data found - will retry"),oe.value.push({searchTerm:r.searchTerm,additionalInfo:r.additionalInfo,reason:"no_api_data"}),_.value++,X(r.searchTerm,"skipped","No API data found - ready for retry")}catch(y){console.error(`Error processing "${r.searchTerm}":`,y),y.isDuplicate||((Ie=y.response)==null?void 0:Ie.status)===409&&((Ce=(pe=y.response)==null?void 0:pe.data)!=null&&Ce.duplicate)?(N({title:r.searchTerm},"skipped","Already exists - skipped"),_.value++,X(r.searchTerm,"skipped","Item already exists in library")):(N({title:r.searchTerm},"error","Error occurred"),T.value++,X(r.searchTerm,"error",y.message||"Unknown error"))}if(K++,K>=5){console.log("üîÑ Reloading media data after 5 items...");try{await o.loadMedia(),K=0}catch(y){console.warn("Failed to reload media data:",y)}}if(!i.value)break;for(;d.value&&i.value;)await new Promise(y=>setTimeout(y,100));await new Promise(y=>setTimeout(y,1e3))}console.log("üîÑ Final media data reload...");try{await o.loadMedia()}catch(l){console.warn("Failed to reload media data at end:",l)}t.value=3,N(null,"","")}catch(ge){console.error("Bulk processing error:",ge),T.value++}finally{i.value=!1,u.value=!1}},Me=()=>{i.value=!1,u.value=!1,d.value=!1,t.value=1,v()},ie=()=>{d.value=!0},ke=()=>{d.value=!1},Se=()=>{const O=oe.value.filter(Q=>Q.reason!=="duplicate");if(O.length===0){$();return}const K=O.map(Q=>Q.additionalInfo?`${Q.searchTerm} | ${Q.additionalInfo}`:Q.searchTerm).join(`
`);H.value.itemsText=K,m.value=0,h.value=0,T.value=0,I.value=null,D.value="",c.value="",V.value=[],t.value=1},$=()=>{t.value=1,i.value=!1,u.value=!0,v(),H.value={category:"",itemsText:"",defaultRating:null},e("close")};return Ee(()=>n.show,O=>{O&&n.currentCategory?H.value.category=n.currentCategory:O||$()}),{currentStep:t,isProcessing:i,canCancel:u,isPaused:d,processedCount:m,addedCount:h,skippedCount:_,errorCount:T,currentItem:I,currentItemStatus:D,currentItemStatusText:c,processingResults:V,skippedItems:oe,bulkData:H,canStart:me,progressPercentage:Z,startProcessing:Te,cancelProcessing:Me,pauseProcessing:ie,resumeProcessing:ke,retrySkippedItems:Se,closeModal:$}}},li={class:"modal-header"},ri={class:"modal-body"},di={key:0,class:"step-container"},ci={class:"bulk-add-form"},ui={class:"form-row"},mi={class:"form-group"},gi={class:"form-group"},fi={class:"form-group"},hi={key:1,class:"step-container"},pi={class:"processing-container"},vi={class:"progress-overview"},yi={class:"progress-stats"},bi={class:"stat"},_i={class:"stat-number"},wi={class:"stat"},ki={class:"stat-number"},Si={class:"stat"},xi={class:"stat-number"},Ii={class:"stat"},Ci={class:"stat-number"},Di={class:"progress-bar"},Ai={class:"progress-text"},Ti={class:"current-item"},Mi={class:"current-item-header"},Ri={class:"current-item-title"},Ei={key:0,class:"paused-indicator"},Ui={key:0,class:"current-item-description"},Bi={key:1,class:"api-data-indicator"},Li={key:2,class:"no-api-indicator"},Pi={class:"results-list"},Fi={class:"result-header"},Ni={class:"result-title"},Gi={class:"result-status"},Wi={key:0,class:"result-message"},Vi={key:2,class:"step-container"},Oi={class:"results-summary"},ji={class:"summary-stats"},zi={class:"summary-stat success"},Yi={class:"stat-number"},Hi={class:"summary-stat warning"},qi={class:"stat-number"},Qi={class:"summary-stat info"},Ji={class:"stat-number"},Ki={class:"summary-stat error"},Zi={class:"stat-number"},Xi={key:0,class:"retry-section"},$i={class:"retry-list"},el=["onUpdate:modelValue","disabled"],tl={key:0,class:"retry-additional"},sl={key:1,class:"duplicate-badge"},al={key:2,class:"retry-badge"},ol={key:1,class:"detailed-results"},nl={class:"results-list"},il={class:"result-header"},ll={class:"result-title"},rl={class:"result-status"},dl={key:0,class:"result-message"},cl={class:"modal-footer"},ul=["disabled"],ml={key:2,class:"processing-controls"},gl=["disabled"],fl=["disabled"],hl={key:3,class:"footer-buttons"};function pl(n,e,o,t,i,u){var d,m;return o.show?(g(),f("div",{key:0,class:"modal-overlay",onClick:e[12]||(e[12]=(...h)=>t.closeModal&&t.closeModal(...h))},[s("div",{class:"modal-content",onClick:e[11]||(e[11]=ce(()=>{},["stop"]))},[s("div",li,[e[13]||(e[13]=s("h2",null,"Bulk Add Items",-1)),s("button",{class:"close-btn",onClick:e[0]||(e[0]=(...h)=>t.closeModal&&t.closeModal(...h))},"‚úï")]),s("div",ri,[t.currentStep===1?(g(),f("div",di,[e[19]||(e[19]=s("div",{class:"step-header"},[s("div",{class:"step-number"},"1"),s("h3",null,"Enter Your List")],-1)),s("div",ci,[s("div",ui,[s("div",mi,[e[15]||(e[15]=s("label",{for:"category"},"Category *",-1)),A(s("select",{id:"category","onUpdate:modelValue":e[1]||(e[1]=h=>t.bulkData.category=h),required:""},[...e[14]||(e[14]=[Ge('<option value="" data-v-04d8250b>Select Category</option><option value="game" data-v-04d8250b>Game</option><option value="series" data-v-04d8250b>Series</option><option value="movie" data-v-04d8250b>Movie</option><option value="buecher" data-v-04d8250b>B√ºcher</option><option value="watchlist" data-v-04d8250b>Watchlist</option>',6)])],512),[[we,t.bulkData.category]])]),s("div",gi,[e[16]||(e[16]=s("label",{for:"default-rating"},"Default Rating",-1)),A(s("input",{id:"default-rating","onUpdate:modelValue":e[2]||(e[2]=h=>t.bulkData.defaultRating=h),type:"number",min:"0",max:"10",step:"0.1",placeholder:"Optional rating for all items"},null,512),[[E,t.bulkData.defaultRating,void 0,{number:!0}]])])]),s("div",fi,[e[17]||(e[17]=s("label",{for:"items-text"},"Items (one per line) *",-1)),A(s("textarea",{id:"items-text","onUpdate:modelValue":e[3]||(e[3]=h=>t.bulkData.itemsText=h),placeholder:`Enter items one per line, for example:
The Witcher 3
Cyberpunk 2077
Red Dead Redemption 2`,rows:"6",required:""},null,512),[[E,t.bulkData.itemsText]]),e[18]||(e[18]=s("small",{class:"help-text"},"Enter one item per line. The system will automatically search and add each item individually.",-1))])])])):S("",!0),t.currentStep===2?(g(),f("div",hi,[e[24]||(e[24]=s("div",{class:"step-header"},[s("div",{class:"step-number"},"2"),s("h3",null,"Processing Items")],-1)),s("div",pi,[s("div",vi,[s("div",yi,[s("span",bi,[s("span",_i,p(t.processedCount),1),e[20]||(e[20]=s("span",{class:"stat-label"},"Processed",-1))]),s("span",wi,[s("span",ki,p(t.addedCount),1),e[21]||(e[21]=s("span",{class:"stat-label"},"Added",-1))]),s("span",Si,[s("span",xi,p(t.skippedCount),1),e[22]||(e[22]=s("span",{class:"stat-label"},"Skipped",-1))]),s("span",Ii,[s("span",Ci,p(t.errorCount),1),e[23]||(e[23]=s("span",{class:"stat-label"},"Errors",-1))])]),s("div",Di,[s("div",{class:"progress-fill",style:Be({width:t.progressPercentage+"%"})},null,4)]),s("div",Ai,p(t.progressPercentage)+"% Complete",1)]),s("div",Ti,[s("div",Mi,[s("span",Ri,"Processing: "+p(((d=t.currentItem)==null?void 0:d.title)||"..."),1),s("span",{class:z(["current-item-status",t.currentItemStatus])},[t.isPaused?(g(),f("span",Ei,"‚è∏Ô∏è PAUSED - ")):S("",!0),Ye(p(t.currentItemStatusText),1)],2)]),(m=t.currentItem)!=null&&m.description?(g(),f("div",Ui,p(t.currentItem.description),1)):S("",!0),t.currentItemStatus==="found"?(g(),f("div",Bi," ‚úÖ Real API data found with image and metadata ")):S("",!0),t.currentItemStatus==="skipped"?(g(),f("div",Li," ‚ùå No API data found - will be retried ")):S("",!0)]),s("div",Pi,[(g(!0),f(te,null,se(t.processingResults,(h,_)=>(g(),f("div",{key:_,class:z(["result-item",h.status])},[s("div",Fi,[s("span",Ni,p(h.title),1),s("span",Gi,p(h.statusText),1)]),h.message?(g(),f("div",Wi,p(h.message),1)):S("",!0)],2))),128))])])])):S("",!0),t.currentStep===3?(g(),f("div",Vi,[e[32]||(e[32]=s("div",{class:"step-header"},[s("div",{class:"step-number"},"3"),s("h3",null,"Results")],-1)),s("div",Oi,[s("div",ji,[s("div",zi,[s("span",Yi,p(t.addedCount),1),e[25]||(e[25]=s("span",{class:"stat-label"},"Successfully Added",-1))]),s("div",Hi,[s("span",qi,p(t.skippedItems.filter(h=>h.reason!=="duplicate").length),1),e[26]||(e[26]=s("span",{class:"stat-label"},"Not Found (Ready for Retry)",-1))]),s("div",Qi,[s("span",Ji,p(t.skippedItems.filter(h=>h.reason==="duplicate").length),1),e[27]||(e[27]=s("span",{class:"stat-label"},"Already in Profile",-1))]),s("div",Ki,[s("span",Zi,p(t.errorCount),1),e[28]||(e[28]=s("span",{class:"stat-label"},"Errors",-1))])]),t.skippedItems.length>0?(g(),f("div",Xi,[e[29]||(e[29]=s("h4",null,"Items Ready for Retry",-1)),e[30]||(e[30]=s("p",{class:"retry-description"}," The following items can be edited and tried again: ",-1)),s("div",$i,[(g(!0),f(te,null,se(t.skippedItems,(h,_)=>(g(),f("div",{key:_,class:z(["retry-item",{"duplicate-item":h.reason==="duplicate"}])},[A(s("input",{"onUpdate:modelValue":T=>h.searchTerm=T,class:"retry-input",placeholder:"Edit search term...",disabled:h.reason==="duplicate"},null,8,el),[[E,h.searchTerm]]),h.additionalInfo?(g(),f("span",tl," | "+p(h.additionalInfo),1)):S("",!0),h.reason==="duplicate"?(g(),f("span",sl," Already in profile ")):(g(),f("span",al," No API data "))],2))),128))])])):S("",!0),t.processingResults.length>0?(g(),f("div",ol,[e[31]||(e[31]=s("h4",null,"Detailed Results",-1)),s("div",nl,[(g(!0),f(te,null,se(t.processingResults,(h,_)=>(g(),f("div",{key:_,class:z(["result-item",h.status])},[s("div",il,[s("span",ll,p(h.title),1),s("span",rl,p(h.statusText),1)]),h.message?(g(),f("div",dl,p(h.message),1)):S("",!0)],2))),128))])])):S("",!0)])])):S("",!0)]),s("div",cl,[t.currentStep===1?(g(),f("button",{key:0,class:"btn btn-secondary",onClick:e[4]||(e[4]=(...h)=>t.closeModal&&t.closeModal(...h))}," Cancel ")):S("",!0),t.currentStep===1?(g(),f("button",{key:1,class:"btn btn-primary",onClick:e[5]||(e[5]=(...h)=>t.startProcessing&&t.startProcessing(...h)),disabled:!t.canStart}," Check All and Add ",8,ul)):S("",!0),t.currentStep===2?(g(),f("div",ml,[s("button",{class:"btn btn-secondary",onClick:e[6]||(e[6]=(...h)=>t.cancelProcessing&&t.cancelProcessing(...h)),disabled:!t.canCancel}," Cancel ",8,gl),t.isPaused?S("",!0):(g(),f("button",{key:0,class:"btn btn-warning",onClick:e[7]||(e[7]=(...h)=>t.pauseProcessing&&t.pauseProcessing(...h)),disabled:!t.isProcessing}," Pause ",8,fl)),t.isPaused?(g(),f("button",{key:1,class:"btn btn-primary",onClick:e[8]||(e[8]=(...h)=>t.resumeProcessing&&t.resumeProcessing(...h))}," Resume ")):S("",!0)])):S("",!0),t.currentStep===3?(g(),f("div",hl,[t.skippedItems.filter(h=>h.reason!=="duplicate").length>0?(g(),f("button",{key:0,class:"btn btn-warning",onClick:e[9]||(e[9]=(...h)=>t.retrySkippedItems&&t.retrySkippedItems(...h))}," Retry "+p(t.skippedItems.filter(h=>h.reason!=="duplicate").length)+" Items ",1)):S("",!0),s("button",{class:"btn btn-primary",onClick:e[10]||(e[10]=(...h)=>t.closeModal&&t.closeModal(...h))}," Done ")])):S("",!0)])])])):S("",!0)}const vl=ae(ii,[["render",pl],["__scopeId","data-v-04d8250b"]]),yl={name:"TxtImportModal",props:{show:{type:Boolean,default:!1}},emits:["close","fileProcessed"],methods:{handleFileUpload(n){const e=n.target.files[0];if(!e)return;if(!e.name.toLowerCase().endsWith(".txt")){alert("Bitte w√§hlen Sie eine .txt Datei aus.");return}const o=new FileReader;o.onload=t=>{const i=t.target.result;this.$emit("fileProcessed",i)},o.readAsText(e,"UTF-8")}}},bl={class:"file-upload-area"},_l={class:"modal-buttons"};function wl(n,e,o,t,i,u){return o.show?(g(),f("div",{key:0,class:"modal",onClick:e[3]||(e[3]=d=>n.$emit("close"))},[s("div",{class:"modal-content",onClick:e[2]||(e[2]=ce(()=>{},["stop"]))},[e[5]||(e[5]=s("h2",null,"üìÑ Import from TXT File",-1)),e[6]||(e[6]=s("p",null,"W√§hlen Sie eine .txt Datei mit einer Liste von Titeln aus, um zu pr√ºfen, welche Items in der aktuellen Kategorie fehlen.",-1)),s("div",bl,[s("input",{type:"file",id:"txtFileInput",accept:".txt",onChange:e[0]||(e[0]=(...d)=>u.handleFileUpload&&u.handleFileUpload(...d)),style:{display:"none"}},null,32),e[4]||(e[4]=s("label",{for:"txtFileInput",class:"file-upload-label"},[s("span",{class:"upload-icon"},"üìÅ"),s("span",{class:"upload-text"},"TXT-Datei ausw√§hlen"),s("span",{class:"upload-hint"},"Eine .txt Datei mit einer Liste von Titeln")],-1))]),s("div",_l,[s("button",{type:"button",onClick:e[1]||(e[1]=d=>n.$emit("close"))}," Cancel ")])])])):S("",!0)}const kl=ae(yl,[["render",wl],["__scopeId","data-v-e20860d6"]]),Sl={name:"TxtImportResultsModal",props:{show:{type:Boolean,default:!1},results:{type:Object,default:null}},emits:["close"]},xl={class:"results-summary"},Il={class:"summary-item"},Cl={class:"summary-value"},Dl={class:"summary-item"},Al={class:"summary-value"},Tl={class:"summary-item"},Ml={class:"summary-value existing"},Rl={class:"summary-item"},El={class:"summary-value missing"},Ul={key:0,class:"missing-items"},Bl={class:"items-list"},Ll={key:1,class:"existing-items"},Pl={class:"items-list"},Fl={class:"modal-buttons"};function Nl(n,e,o,t,i,u){return o.show&&o.results?(g(),f("div",{key:0,class:"modal",onClick:e[2]||(e[2]=d=>n.$emit("close"))},[s("div",{class:"modal-content results-modal",onClick:e[1]||(e[1]=ce(()=>{},["stop"]))},[e[7]||(e[7]=s("h2",null,"üìä TXT Import Ergebnisse",-1)),s("div",xl,[s("div",Il,[e[3]||(e[3]=s("span",{class:"summary-label"},"Kategorie:",-1)),s("span",Cl,p(o.results.categoryName),1)]),s("div",Dl,[e[4]||(e[4]=s("span",{class:"summary-label"},"Titel in Datei:",-1)),s("span",Al,p(o.results.totalInFile),1)]),s("div",Tl,[e[5]||(e[5]=s("span",{class:"summary-label"},"Bereits vorhanden:",-1)),s("span",Ml,p(o.results.existingItems.length),1)]),s("div",Rl,[e[6]||(e[6]=s("span",{class:"summary-label"},"Fehlende Titel:",-1)),s("span",El,p(o.results.missingItems.length),1)])]),o.results.missingItems.length>0?(g(),f("div",Ul,[s("h3",null,"‚ùå Fehlende Titel ("+p(o.results.missingItems.length)+"):",1),s("div",Bl,[(g(!0),f(te,null,se(o.results.missingItems,(d,m)=>(g(),f("div",{key:m,class:"missing-item"},p(d),1))),128))])])):S("",!0),o.results.existingItems.length>0?(g(),f("div",Ll,[s("h3",null,"‚úÖ Bereits vorhanden ("+p(o.results.existingItems.length)+"):",1),s("div",Pl,[(g(!0),f(te,null,se(o.results.existingItems,(d,m)=>(g(),f("div",{key:m,class:"existing-item"},p(d),1))),128))])])):S("",!0),s("div",Fl,[s("button",{type:"button",onClick:e[0]||(e[0]=d=>n.$emit("close"))}," Schlie√üen ")])])])):S("",!0)}const Gl=ae(Sl,[["render",Nl],["__scopeId","data-v-ec385b83"]]),Wl={name:"SimpleAddItem",setup(){const n=k(!1),e=k(null),o=Fe({title:"Test Game",category:"game",release:"2003-01-01",count:1});return{form:o,loading:n,result:e,addItem:async()=>{n.value=!0,e.value=null;try{const i=window.location.origin,u=await fetch(`${i}/api/login`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:"admin@example.com",password:"admin123"})});if(!u.ok)throw new Error("Login failed");const m=(await u.json()).token,_=await(await fetch(`${i}/api/media`,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${m}`},body:JSON.stringify(o)})).json();_.success?e.value={success:!0,message:`Success! Item added with ID: ${_.data.id}`}:e.value={success:!1,message:`Error: ${JSON.stringify(_)}`}}catch(i){e.value={success:!1,message:`Error: ${i.message}`}}finally{n.value=!1}}}}},Vl={class:"simple-add-item"},Ol=["disabled"];function jl(n,e,o,t,i,u){return g(),f("div",Vl,[e[10]||(e[10]=s("h3",null,"Simple Add Item Test",-1)),s("form",{onSubmit:e[4]||(e[4]=ce((...d)=>t.addItem&&t.addItem(...d),["prevent"]))},[s("div",null,[e[5]||(e[5]=s("label",null,"Title:",-1)),A(s("input",{"onUpdate:modelValue":e[0]||(e[0]=d=>t.form.title=d),type:"text",required:""},null,512),[[E,t.form.title]])]),s("div",null,[e[7]||(e[7]=s("label",null,"Category:",-1)),A(s("select",{"onUpdate:modelValue":e[1]||(e[1]=d=>t.form.category=d)},[...e[6]||(e[6]=[s("option",{value:"game"},"Game",-1),s("option",{value:"movie"},"Movie",-1),s("option",{value:"series"},"Series",-1)])],512),[[we,t.form.category]])]),s("div",null,[e[8]||(e[8]=s("label",null,"Release:",-1)),A(s("input",{"onUpdate:modelValue":e[2]||(e[2]=d=>t.form.release=d),type:"date"},null,512),[[E,t.form.release]])]),s("div",null,[e[9]||(e[9]=s("label",null,"Count:",-1)),A(s("input",{"onUpdate:modelValue":e[3]||(e[3]=d=>t.form.count=d),type:"number",min:"0"},null,512),[[E,t.form.count]])]),s("button",{type:"submit",disabled:t.loading},p(t.loading?"Adding...":"Add Item"),9,Ol)],32),t.result?(g(),f("div",{key:0,class:z(["result",t.result.success?"success":"error"])},p(t.result.message),3)):S("",!0)])}const zl=ae(Wl,[["render",jl],["__scopeId","data-v-4298065b"]]),Yl={name:"LoadingSpinner",props:{loading:{type:Boolean,default:!0},message:{type:String,default:"Loading..."}}},Hl={key:0,class:"loading-spinner"},ql={key:0};function Ql(n,e,o,t,i,u){return o.loading?(g(),f("div",Hl,[e[0]||(e[0]=s("div",{class:"spinner"},null,-1)),o.message?(g(),f("p",ql,p(o.message),1)):S("",!0)])):S("",!0)}const Jl=ae(Yl,[["render",Ql],["__scopeId","data-v-0e82c46a"]]),Kl={name:"MessageBox",props:{show:{type:Boolean,default:!1},type:{type:String,default:"info",validator:n=>["success","error","warning","info"].includes(n)},title:{type:String,default:""},message:{type:String,required:!0},details:{type:String,default:""}},emits:["close"],setup(n,{emit:e}){const o=()=>{e("close")},t=F(()=>{switch(n.type){case"success":return"‚úÖ";case"error":return"‚ùå";case"warning":return"‚ö†Ô∏è";case"info":return"‚ÑπÔ∏è";default:return"‚ÑπÔ∏è"}}),i=F(()=>`message-${n.type}`);return{closeMessage:o,icon:t,messageType:i}}},Zl={class:"message-header"},Xl={class:"message-icon"},$l={class:"message-title"},er={class:"message-body"},tr={key:0,class:"message-details"},sr={class:"message-footer"};function ar(n,e,o,t,i,u){return o.show?(g(),f("div",{key:0,class:"message-overlay",onClick:e[3]||(e[3]=(...d)=>t.closeMessage&&t.closeMessage(...d))},[s("div",{class:z(["message-box",t.messageType]),onClick:e[2]||(e[2]=ce(()=>{},["stop"]))},[s("div",Zl,[s("span",Xl,p(t.icon),1),s("h3",$l,p(o.title),1),s("button",{class:"close-btn",onClick:e[0]||(e[0]=(...d)=>t.closeMessage&&t.closeMessage(...d))},"‚úï")]),s("div",er,[s("p",null,p(o.message),1),o.details?(g(),f("div",tr,[s("pre",null,p(o.details),1)])):S("",!0)]),s("div",sr,[s("button",{class:"btn btn-primary",onClick:e[1]||(e[1]=(...d)=>t.closeMessage&&t.closeMessage(...d))},"OK")])],2)])):S("",!0)}const or=ae(Kl,[["render",ar],["__scopeId","data-v-198ec3cc"]]),nr={name:"ConfirmDialog",props:{show:{type:Boolean,default:!1},title:{type:String,default:"Confirm Action"},message:{type:String,required:!0}},emits:["confirm","close"],setup(n,{emit:e}){const o=()=>{e("close")};return{closeDialog:o,confirmAction:()=>{e("confirm"),o()}}}},ir={class:"confirm-header"},lr={class:"confirm-title"},rr={class:"confirm-body"},dr={class:"confirm-footer"};function cr(n,e,o,t,i,u){return o.show?(g(),f("div",{key:0,class:"confirm-overlay",onClick:e[4]||(e[4]=(...d)=>t.closeDialog&&t.closeDialog(...d))},[s("div",{class:"confirm-dialog",onClick:e[3]||(e[3]=ce(()=>{},["stop"]))},[s("div",ir,[s("h3",lr,p(o.title),1),s("button",{class:"close-btn",onClick:e[0]||(e[0]=(...d)=>t.closeDialog&&t.closeDialog(...d))},"‚úï")]),s("div",rr,[s("p",null,p(o.message),1)]),s("div",dr,[s("button",{class:"btn btn-secondary",onClick:e[1]||(e[1]=(...d)=>t.closeDialog&&t.closeDialog(...d))},"Cancel"),s("button",{class:"btn btn-danger",onClick:e[2]||(e[2]=(...d)=>t.confirmAction&&t.confirmAction(...d))},"Confirm")])])])):S("",!0)}const ur=ae(nr,[["render",cr],["__scopeId","data-v-fd570f57"]]),mr={name:"InputDialog",props:{show:{type:Boolean,default:!1},title:{type:String,default:"Input Required"},message:{type:String,required:!0},placeholder:{type:String,default:""},inputType:{type:String,default:"text"},defaultValue:{type:String,default:""}},emits:["confirm","close"],setup(n,{emit:e}){const o=k(""),t=k(null),i=()=>{e("close")},u=()=>{e("confirm",o.value),i()};return Ee(()=>n.show,async d=>{d&&(o.value=n.defaultValue,await ss(),t.value&&(t.value.focus(),t.value.select()))}),{inputValue:o,inputRef:t,closeDialog:i,confirmAction:u}}},gr={class:"input-header"},fr={class:"input-title"},hr={class:"input-body"},pr={class:"input-message"},vr=["type","placeholder"],yr={class:"input-footer"};function br(n,e,o,t,i,u){return o.show?(g(),f("div",{key:0,class:"input-overlay",onClick:e[6]||(e[6]=(...d)=>t.closeDialog&&t.closeDialog(...d))},[s("div",{class:"input-dialog",onClick:e[5]||(e[5]=ce(()=>{},["stop"]))},[s("div",gr,[s("h3",fr,p(o.title),1),s("button",{class:"close-btn",onClick:e[0]||(e[0]=(...d)=>t.closeDialog&&t.closeDialog(...d))},"‚úï")]),s("div",hr,[s("p",pr,p(o.message),1),A(s("input",{"onUpdate:modelValue":e[1]||(e[1]=d=>t.inputValue=d),type:o.inputType,placeholder:o.placeholder,class:"input-field",onKeyup:e[2]||(e[2]=ts((...d)=>t.confirmAction&&t.confirmAction(...d),["enter"])),ref:"inputRef"},null,40,vr),[[es,t.inputValue]])]),s("div",yr,[s("button",{class:"btn btn-secondary",onClick:e[3]||(e[3]=(...d)=>t.closeDialog&&t.closeDialog(...d))},"Cancel"),s("button",{class:"btn btn-primary",onClick:e[4]||(e[4]=(...d)=>t.confirmAction&&t.confirmAction(...d))},"OK")])])])):S("",!0)}const _r=ae(mr,[["render",br],["__scopeId","data-v-0ee78a4d"]]),wr={name:"MediaLibrary",components:{MediaItem:Es,Sidebar:ma,MainHeader:Da,FloatingActionButton:Ua,LoginModal:za,RegisterModal:lo,EditModal:ni,BulkAddModal:vl,TxtImportModal:kl,TxtImportResultsModal:Gl,SimpleAddItem:zl,LoadingSpinner:Jl,MessageBox:or,ConfirmDialog:ur,InputDialog:_r},setup(){const n=qe(),e=pt(),o=vt(),t=yt(),i=He(),u=bt(),d=F(()=>!u||typeof u!="object"?(console.warn("SidebarStore not properly initialized, using fallback values"),{collapsed:!1,mobileOpen:!1,toggleSidebar:()=>{},toggleMobileSidebar:()=>{},closeMobileSidebar:()=>{}}):u),m=k(!1),h=k(null),_=k(new Date),T=k(null),I=["Mon","Tue","Wed","Thu","Fri","Sat","Sun"],D=k(null),c=Fe({firstName:"",lastName:"",displayName:"",email:"",bio:"",avatar:"",language:"en",timezone:"UTC",dateFormat:"MM/DD/YYYY",booksApiProvider:"wikipedia",enableGoogleBooksFallback:!0}),{showLoginModal:V,showRegisterModal:oe,showEditModal:H,showFloatingMenu:me,showBulkAddModal:Z,showTxtImportModal:ue,showTxtImportResults:v,editingItem:N,sortBy:X,categories:Te,txtImportResults:Me,isLoggedIn:ie,isAdmin:ke,userName:Se,currentCategory:$,searchQuery:O,categoryCounts:K,loading:Q,error:fe,paginatedMedia:he,setCategory:ye,clearSearch:xe,updateSortBy:Ie,editItem:pe,closeEditModal:Ce,closeBulkAddModal:ge,handleBulkAddItems:De,handleSaveItem:Ae,handleDeleteItem:l,logout:r,loadMedia:y,toggleFloatingMenu:a,addNewItem:w,bulkAddItems:C,importFromTxt:G,importFromAPI:ne,createCollection:de,exportMediaCollection:Qe,exportAsCSV:Je,exportAsJSON:Ke,downloadFile:Ve,deleteAllInCategory:Oe,getCategoryDisplayName:Le,navigateToCalendar:Ne,navigateToProfile:at,processTxtContent:ot,closeTxtImportResults:nt,cleanup:it,router:x}=os(),M=F(()=>n.editMode),J=()=>{n.toggleEditMode()},U=async b=>{try{await n.updateItemRating(b.itemId,b.rating),console.log("‚úÖ Rating updated successfully:",b),mt({type:"success",text:`Rating updated to ${b.rating}/10`})}catch(R){console.error("‚ùå Failed to update rating:",R),mt({type:"error",text:"Failed to update rating. Please try again."})}},L=F(()=>{try{return Le?Le($.value):$.value}catch(b){return console.error("Error getting category display name:",b),$.value||"Unknown"}}),Y=F(()=>_.value.getFullYear()),W=F(()=>_.value.getMonth()),Ue=F(()=>_.value.toLocaleDateString("en-US",{month:"long"})),be=k([]),Ze=k(!1),Xe=k(null),lt=F(()=>{const b=Y.value,R=W.value,P=new Date(b,R,1),j=new Date(P),B=P.getDay(),q=B===0?6:B-1;j.setDate(j.getDate()-q);const Re=[],ee=new Date;for(let $e=0;$e<42;$e++){const _e=new Date(j);_e.setDate(j.getDate()+$e);const qt=_e.getMonth()===R,Qt=_e.toDateString()===ee.toDateString(),Jt=_e.getDay()===0||_e.getDay()===6;Re.push({date:_e.getDate(),month:_e.getMonth(),year:_e.getFullYear(),fullDate:new Date(_e),isCurrentMonth:qt,isToday:Qt,isWeekend:Jt,hasEvents:rt(_e),events:dt(_e)})}return Re}),_t=F(()=>{const b=n.mediaData||[],R={totalItems:b.length,totalCollections:0,totalPlaytime:0,avgRating:0,categoryDistribution:{},ratingDistribution:{},platformDistribution:{},genreDistribution:{},recentActivity:[],airingSeries:[]};let P=0,j=0;return b.forEach(B=>{const q=B.category||"unknown";if(R.categoryDistribution[q]=(R.categoryDistribution[q]||0)+1,B.rating&&B.rating>0){const Re=Math.floor(B.rating);R.ratingDistribution[Re]=(R.ratingDistribution[Re]||0)+1,P+=B.rating,j++}if(B.platforms&&B.category==="game"&&B.platforms.split(",").map(ee=>ee.trim()).filter(ee=>ee).forEach(ee=>{R.platformDistribution[ee]=(R.platformDistribution[ee]||0)+1}),B.genre&&(B.category==="series"||B.category==="movie")&&B.genre.split(",").map(ee=>ee.trim()).filter(ee=>ee).forEach(ee=>{R.genreDistribution[ee]=(R.genreDistribution[ee]||0)+1}),B.spielzeit&&B.spielzeit>0&&(R.totalPlaytime+=B.spielzeit),B.category==="series"&&B.isAiring===!0&&R.airingSeries.push({title:B.title,nextSeason:B.nextSeason,nextSeasonRelease:B.nextSeasonRelease}),B.discovered){const Re=new Date(B.discovered),ee=new Date;ee.setDate(ee.getDate()-30),Re>=ee&&R.recentActivity.push({title:B.title,category:B.category,discovered:B.discovered})}}),j>0&&(R.avgRating=(P/j).toFixed(1)),R.totalPlaytime=Math.round(R.totalPlaytime/60),R.recentActivity.sort((B,q)=>new Date(q.discovered)-new Date(B.discovered)),R}),wt=b=>b?new Date(b).toLocaleDateString():"",kt=b=>{const R=Math.max(0,Math.min(5,parseInt(b)||0)),P="‚òÖ".repeat(R),j="‚òÜ".repeat(5-R);return P+j},St=b=>{ye(b),w()},xt=()=>{V.value=!1,oe.value=!0},It=()=>{V.value=!0},Ct=b=>{V.value=!1,y()},Dt=()=>{oe.value=!1,y()},At=async()=>{m.value=!0,h.value=null;try{const b=await i.adminSetup();b.success?(console.log("‚úÖ Admin setup successful:",b),h.value={type:"success",text:`‚úÖ Admin created and logged in! User: ${b.user.name} (${b.user.email})`},await y(),setTimeout(()=>{h.value=null},5e3)):(console.log("‚ÑπÔ∏è Admin already exists:",b),h.value={type:"info",text:`‚ÑπÔ∏è ${b.message} (${b.admin_count} admin(s) exist)`},setTimeout(()=>{h.value=null},3e3))}catch(b){console.error("‚ùå Admin setup failed:",b),h.value={type:"error",text:`‚ùå Admin setup failed: ${b.message||"Unknown error"}`},setTimeout(()=>{h.value=null},5e3)}finally{m.value=!1}},Tt=()=>{console.log("üî• DEBUG: Direct admin navigation called!"),console.log("üî• DEBUG: Router object:",x);try{x.push("/admin"),console.log("üî• DEBUG: Successfully navigated to /admin!")}catch(b){console.error("üî• DEBUG: Error navigating to admin:",b)}},Mt=()=>{_.value=new Date(_.value.getFullYear(),_.value.getMonth()-1,1),T.value=null},Rt=()=>{_.value=new Date(_.value.getFullYear(),_.value.getMonth()+1,1),T.value=null},Et=b=>{b.isCurrentMonth&&(T.value=b)},Ut=b=>b.fullDate.toLocaleDateString("en-US",{weekday:"long",year:"numeric",month:"long",day:"numeric"}),rt=b=>ct(b).length>0,dt=b=>ct(b).map(P=>({id:P.id,title:P.title,time:"Release",type:P.watchlistType||P.watchlist_type||"unknown",item:P})),ct=b=>n.mediaData.filter(P=>P.category==="watchlist"&&P.release).filter(P=>{if(!P.release)return!1;const j=new Date(P.release),B=new Date(b);return j.getFullYear()===B.getFullYear()&&j.getMonth()===B.getMonth()&&j.getDate()===B.getDate()}),Bt=()=>{var P,j;const b=((P=c.firstName)==null?void 0:P.charAt(0))||"U",R=((j=c.lastName)==null?void 0:j.charAt(0))||"S";return(b+R).toUpperCase()},Lt=()=>{var b;(b=D.value)==null||b.click()},Pt=b=>{const R=b.target.files[0];if(R){const P=new FileReader;P.onload=j=>{c.avatar=j.target.result},P.readAsDataURL(R)}},ut=async()=>{if(!$.value||$.value==="statistics"||$.value==="calendar"||$.value==="profile"){be.value=[];return}Ze.value=!0,Xe.value=null;try{const b=await re.getGenres($.value);if(b.success)be.value=b.genres||[];else throw new Error(b.error||"Failed to load genres")}catch(b){console.error("Failed to load genres:",b),Xe.value=b.message||"Failed to load genres",be.value=[]}finally{Ze.value=!1}},Ft=b=>{n.setGenres(b)},Nt=b=>{n.setExcludedGenres(b)},Gt=()=>{n.clearGenres(),n.clearExcludedGenres()},mt=b=>{console.log("üì¢ Message:",b.type,b.text),b.type==="error"?e.showMessage("Error",b.text,"error"):e.showMessage("Success",b.text,"success")};Ee($,b=>{b&&b!=="statistics"&&b!=="calendar"&&b!=="profile"?(ut(),n.clearGenres()):(be.value=[],n.clearGenres())},{immediate:!0});const Wt=()=>{const b={profile:c,media:n.mediaData,settings:{language:c.language,timezone:c.timezone,dateFormat:c.dateFormat},exportDate:new Date().toISOString()},R=new Blob([JSON.stringify(b,null,2)],{type:"application/json"}),P=URL.createObjectURL(R),j=document.createElement("a");j.href=P,j.download=`media-library-backup-${new Date().toISOString().split("T")[0]}.json`,j.click(),URL.revokeObjectURL(P)},Vt=()=>{const b=document.createElement("input");b.type="file",b.accept=".json",b.onchange=R=>{const P=R.target.files[0];if(P){const j=new FileReader;j.onload=B=>{try{const q=JSON.parse(B.target.result);q.profile&&Object.assign(c,q.profile),q.media&&(n.mediaData=q.media,n.saveMedia()),q.settings&&Object.assign(c,q.settings),je()}catch(q){console.error("Failed to import data:",q)}},j.readAsText(P)}},b.click()},Ot=()=>{const b={profile:c,media:n.mediaData,settings:{language:c.language,timezone:c.timezone,dateFormat:c.dateFormat},backupDate:new Date().toISOString()},R=`backup_${Date.now()}`;localStorage.setItem(R,JSON.stringify(b)),alert("Backup created successfully!")},jt=()=>{alert("Cache cleared successfully!")},zt=()=>{confirm("Are you sure you want to reset all settings?")&&(Object.assign(c,{firstName:"",lastName:"",displayName:"",email:"",bio:"",avatar:"",language:"en",timezone:"UTC",dateFormat:"MM/DD/YYYY",booksApiProvider:"wikipedia",enableGoogleBooksFallback:!0}),je())},Yt=()=>{confirm("Are you sure you want to clear all data? This cannot be undone!")&&(localStorage.clear(),window.location.reload())},je=()=>{localStorage.setItem("profileData",JSON.stringify(c))},Ht=()=>{je(),alert("All changes saved successfully!")};return st(async()=>{var b,R;try{await y();const P=localStorage.getItem("profileData");if(P)try{const q=JSON.parse(P);Object.assign(c,q)}catch(q){console.error("Failed to load profile data:",q)}i.user&&(c.firstName=((b=i.user.name)==null?void 0:b.split(" ")[0])||"",c.lastName=((R=i.user.name)==null?void 0:R.split(" ").slice(1).join(" "))||"",c.email=i.user.email||"");const j=new Date,B=lt.value.find(q=>q.isToday&&q.isCurrentMonth);if(B&&(T.value=B),ie.value)try{n.initializeRealtimeUpdates()}catch(q){console.error("Error initializing realtime updates:",q)}}catch(P){console.error("Error during initialization:",P)}}),ht(()=>{if(ie.value)try{n.cleanupRealtimeUpdates()}catch(b){console.error("Error cleaning up realtime updates:",b)}it()}),{showLoginModal:V,showRegisterModal:oe,showEditModal:H,showFloatingMenu:me,showBulkAddModal:Z,showTxtImportModal:ue,showTxtImportResults:v,editingItem:N,sortBy:X,categories:Te,txtImportResults:Me,adminSetupLoading:m,adminSetupMessage:h,editMode:M,currentDate:_,selectedDay:T,weekdays:I,avatarInput:D,profileData:c,isLoggedIn:ie,isAdmin:ke,userName:Se,currentCategory:$,currentCategoryDisplayName:L,searchQuery:O,categoryCounts:K,loading:Q,error:fe,paginatedMedia:he,selectedGenres:F(()=>n.selectedGenres),genres:be,genreLoading:Ze,genreError:Xe,currentYear:Y,currentMonth:W,currentMonthName:Ue,calendarDays:lt,setCategory:ye,clearSearch:xe,updateSortBy:Ie,navigateToCalendar:Ne,navigateToProfile:at,addItemFromSidebar:St,editItem:pe,switchToRegister:xt,showAdminLogin:It,handleLoginSuccess:Ct,handleRegisterSuccess:Dt,handleAdminSetup:At,debugNavigateToAdmin:Tt,closeEditModal:Ce,closeBulkAddModal:ge,handleBulkAddItems:De,handleSaveItem:Ae,handleDeleteItem:l,logout:r,loadMedia:y,toggleFloatingMenu:a,addNewItem:w,bulkAddItems:C,importFromTxt:G,importFromAPI:ne,createCollection:de,exportMediaCollection:Qe,exportAsCSV:Je,exportAsJSON:Ke,downloadFile:Ve,deleteAllInCategory:Oe,getCategoryDisplayName:Le,processTxtContent:ot,closeTxtImportResults:nt,handleGenresUpdated:Ft,handleGenresExcluded:Nt,handleGenresCleared:Gt,loadGenres:ut,toggleEditMode:J,handleRatingChanged:U,previousMonth:Mt,nextMonth:Rt,selectDay:Et,formatSelectedDay:Ut,hasEventsForDate:rt,getEventsForDate:dt,getInitials:Bt,changeAvatar:Lt,handleAvatarChange:Pt,exportData:Wt,importData:Vt,createBackup:Ot,clearCache:jt,resetSettings:zt,clearAllData:Yt,saveProfileData:je,saveAllChanges:Ht,messageStore:e,confirmStore:o,inputStore:t,statistics:_t,formatDate:wt,getRatingStars:kt,sidebarStore:u,safeSidebarStore:d}}},kr={class:"vue-app"},Sr={class:"main-content"},xr={class:"content-area"},Ir={key:1,class:"error"},Cr={key:2},Dr={key:0,class:"calendar-view"},Ar={class:"calendar-header"},Tr=["disabled"],Mr={class:"month-year-display"},Rr={class:"month-name"},Er={class:"year"},Ur=["disabled"],Br={class:"calendar-container"},Lr={class:"calendar-grid"},Pr=["onClick"],Fr={class:"day-number"},Nr={key:0,class:"event-indicator"},Gr={key:0,class:"event-count"},Wr={key:0,class:"selected-day-info"},Vr={class:"day-events"},Or={key:0,class:"no-events"},jr={key:1,class:"events-list"},zr={class:"event-header"},Yr={class:"event-time"},Hr={class:"event-type-badge"},qr={class:"event-title"},Qr={key:0,class:"event-platforms"},Jr={key:1,class:"event-genre"},Kr={key:1,class:"profile-container"},Zr={class:"profile-header"},Xr={class:"profile-avatar-section"},$r=["src"],ed={key:1,class:"avatar-initials"},td={class:"profile-info-header"},sd={class:"profile-stats"},ad={class:"stat-item"},od={class:"stat-number"},nd={class:"stat-item"},id={class:"stat-number"},ld={class:"settings-sections"},rd={class:"settings-section"},dd={class:"section-content"},cd={class:"form-row"},ud={class:"form-group"},md={class:"form-group"},gd={class:"form-group"},fd={class:"form-group"},hd={class:"form-group"},pd={class:"settings-section"},vd={class:"section-content"},yd={class:"form-row"},bd={class:"form-group"},_d={class:"form-group"},wd={class:"form-row"},kd={class:"form-group"},Sd={class:"form-group"},xd={class:"form-row"},Id={class:"form-group"},Cd={class:"checkbox-container"},Dd={class:"settings-section"},Ad={class:"section-content"},Td={class:"data-actions"},Md={class:"settings-section danger-zone"},Rd={class:"section-content"},Ed={class:"danger-actions"},Ud={key:2,class:"statistics-container"},Bd={class:"statistics-header"},Ld={class:"refresh-controls"},Pd={class:"statistics-content"},Fd={class:"stats-summary"},Nd={class:"summary-card"},Gd={class:"summary-number"},Wd={class:"summary-card"},Vd={class:"summary-number"},Od={class:"summary-card"},jd={class:"summary-number"},zd={class:"summary-card"},Yd={class:"summary-number"},Hd={class:"chart-container"},qd={class:"category-stats"},Qd={class:"category-name"},Jd={class:"category-bar"},Kd={class:"category-count"},Zd={class:"chart-container"},Xd={class:"rating-stats"},$d={class:"rating-stars"},ec={class:"rating-bar"},tc={class:"rating-count"},sc={class:"chart-container"},ac={class:"platform-stats"},oc={class:"platform-name"},nc={class:"platform-bar"},ic={class:"platform-count"},lc={class:"chart-container"},rc={class:"genre-stats"},dc={class:"genre-name"},cc={class:"genre-bar"},uc={class:"genre-count"},mc={class:"chart-container"},gc={class:"recent-activity"},fc={class:"activity-title"},hc={class:"activity-category"},pc={class:"activity-date"},vc={class:"chart-container"},yc={class:"airing-series"},bc={class:"airing-title"},_c={class:"airing-next"},wc={class:"airing-date"},kc={key:0,class:"admin-setup-container"},Sc=["disabled"],xc={key:0},Ic={key:1};function Cc(n,e,o,t,i,u){const d=le("Sidebar"),m=le("MainHeader"),h=le("LoadingSpinner"),_=le("MediaItem"),T=le("LoginModal"),I=le("RegisterModal"),D=le("EditModal"),c=le("BulkAddModal"),V=le("TxtImportModal"),oe=le("TxtImportResultsModal"),H=le("FloatingActionButton"),me=le("MessageBox"),Z=le("ConfirmDialog"),ue=le("InputDialog");return g(),f("div",kr,[s("div",{class:z(["mobile-overlay",{show:t.safeSidebarStore.mobileOpen}]),onClick:e[0]||(e[0]=(...v)=>t.safeSidebarStore.closeMobileSidebar&&t.safeSidebarStore.closeMobileSidebar(...v))},null,2),ve(d,{collapsed:t.safeSidebarStore.collapsed,"mobile-open":t.safeSidebarStore.mobileOpen,"is-logged-in":t.isLoggedIn,"is-admin":t.isAdmin,"user-name":t.userName,"current-category":t.currentCategory,"category-counts":t.categoryCounts,categories:t.categories,"selected-genres":t.selectedGenres,"excluded-genres":n.excludedGenres,genres:t.genres,"genre-loading":t.genreLoading,"genre-error":t.genreError,onToggle:t.safeSidebarStore.toggleSidebar,onSetCategory:t.setCategory,onNavigateToCalendar:t.navigateToCalendar,onNavigateToProfile:t.navigateToProfile,onNavigateToAdmin:t.debugNavigateToAdmin,onAddItem:t.addItemFromSidebar,onShowLogin:e[1]||(e[1]=v=>t.showLoginModal=!0),onShowRegister:e[2]||(e[2]=v=>t.showRegisterModal=!0),onShowAdminLogin:t.showAdminLogin,onLogout:t.logout,onGenresUpdated:t.handleGenresUpdated,onGenresExcluded:t.handleGenresExcluded,onGenresCleared:t.handleGenresCleared,onLoadGenres:t.loadGenres},null,8,["collapsed","mobile-open","is-logged-in","is-admin","user-name","current-category","category-counts","categories","selected-genres","excluded-genres","genres","genre-loading","genre-error","onToggle","onSetCategory","onNavigateToCalendar","onNavigateToProfile","onNavigateToAdmin","onAddItem","onShowAdminLogin","onLogout","onGenresUpdated","onGenresExcluded","onGenresCleared","onLoadGenres"]),s("div",Sr,[ve(m,{"search-query":t.searchQuery,"onUpdate:searchQuery":e[3]||(e[3]=v=>t.searchQuery=v),"sort-by":t.sortBy,"edit-mode":t.editMode,onToggleMobileSidebar:t.safeSidebarStore.toggleMobileSidebar,onClearSearch:t.clearSearch,onToggleEditMode:t.toggleEditMode,"onUpdate:sortBy":t.updateSortBy},null,8,["search-query","sort-by","edit-mode","onToggleMobileSidebar","onClearSearch","onToggleEditMode","onUpdate:sortBy"]),s("main",xr,[t.loading?(g(),Pe(h,{key:0,message:"Loading media data..."})):t.error?(g(),f("div",Ir,[s("p",null,p(t.error),1),s("button",{onClick:e[4]||(e[4]=(...v)=>t.loadMedia&&t.loadMedia(...v))},"Retry")])):(g(),f("div",Cr,[t.currentCategory==="calendar"?(g(),f("div",Dr,[s("div",Ar,[s("button",{class:"month-nav-btn",onClick:e[5]||(e[5]=(...v)=>t.previousMonth&&t.previousMonth(...v)),disabled:n.isLoading},[...e[30]||(e[30]=[s("span",{class:"nav-icon"},"‚Äπ",-1)])],8,Tr),s("div",Mr,[s("h2",Rr,p(t.currentMonthName),1),s("span",Er,p(t.currentYear),1)]),s("button",{class:"month-nav-btn",onClick:e[6]||(e[6]=(...v)=>t.nextMonth&&t.nextMonth(...v)),disabled:n.isLoading},[...e[31]||(e[31]=[s("span",{class:"nav-icon"},"‚Ä∫",-1)])],8,Ur)]),s("div",Br,[s("div",Lr,[(g(!0),f(te,null,se(t.weekdays,v=>(g(),f("div",{class:"weekday-header",key:v},p(v),1))),128)),(g(!0),f(te,null,se(t.calendarDays,v=>(g(),f("div",{key:`${v.date}-${v.month}`,class:z(["calendar-day",{"other-month":!v.isCurrentMonth,today:v.isToday,weekend:v.isWeekend,"has-events":v.hasEvents}]),onClick:N=>t.selectDay(v)},[s("span",Fr,p(v.day),1),v.hasEvents?(g(),f("div",Nr,[e[32]||(e[32]=s("div",{class:"event-dot"},null,-1)),v.events&&v.events.length>1?(g(),f("span",Gr,p(v.events.length),1)):S("",!0)])):S("",!0)],10,Pr))),128))])]),t.selectedDay?(g(),f("div",Wr,[s("h3",null,p(t.formatSelectedDay(t.selectedDay)),1),s("div",Vr,[!t.selectedDay.events||t.selectedDay.events.length===0?(g(),f("p",Or," No watchlist releases scheduled for this day ")):(g(),f("div",jr,[(g(!0),f(te,null,se(t.selectedDay.events,v=>(g(),f("div",{key:v.id,class:z(["event-item",`event-${v.type}`])},[s("div",zr,[s("span",Yr,p(v.time),1),s("span",Hr,p(v.type),1)]),s("span",qr,p(v.title),1),v.item.platforms?(g(),f("div",Qr,p(v.item.platforms),1)):S("",!0),v.item.genre?(g(),f("div",Jr,p(v.item.genre),1)):S("",!0)],2))),128))]))])])):S("",!0)])):t.currentCategory==="profile"?(g(),f("div",Kr,[s("div",Zr,[s("div",Xr,[s("div",{class:"profile-avatar-large",onClick:e[7]||(e[7]=(...v)=>t.changeAvatar&&t.changeAvatar(...v))},[t.profileData.avatar?(g(),f("img",{key:0,src:t.profileData.avatar,alt:"Profile Picture"},null,8,$r)):(g(),f("span",ed,p(t.getInitials()),1))]),s("input",{type:"file",ref:"avatarInput",accept:"image/*",onChange:e[8]||(e[8]=(...v)=>t.handleAvatarChange&&t.handleAvatarChange(...v)),style:{display:"none"}},null,544)]),s("div",td,[s("h2",null,p(t.profileData.displayName||t.profileData.firstName+" "+t.profileData.lastName||"User"),1),s("p",null,p(t.profileData.email||"user@example.com"),1),s("div",sd,[s("div",ad,[s("span",od,p(n.totalItems),1),e[33]||(e[33]=s("span",{class:"stat-label"},"Total Items",-1))]),s("div",nd,[s("span",id,p(new Date().getFullYear()),1),e[34]||(e[34]=s("span",{class:"stat-label"},"Member Since",-1))])])])]),s("div",ld,[s("div",rd,[e[40]||(e[40]=s("div",{class:"section-header"},[s("h3",null,"Personal Information"),s("p",null,"Manage your personal details and account information")],-1)),s("div",dd,[s("div",cd,[s("div",ud,[e[35]||(e[35]=s("label",{for:"firstName"},"First Name",-1)),A(s("input",{type:"text",id:"firstName","onUpdate:modelValue":e[9]||(e[9]=v=>t.profileData.firstName=v),placeholder:"Enter your first name"},null,512),[[E,t.profileData.firstName]])]),s("div",md,[e[36]||(e[36]=s("label",{for:"lastName"},"Last Name",-1)),A(s("input",{type:"text",id:"lastName","onUpdate:modelValue":e[10]||(e[10]=v=>t.profileData.lastName=v),placeholder:"Enter your last name"},null,512),[[E,t.profileData.lastName]])])]),s("div",gd,[e[37]||(e[37]=s("label",{for:"displayName"},"Display Name",-1)),A(s("input",{type:"text",id:"displayName","onUpdate:modelValue":e[11]||(e[11]=v=>t.profileData.displayName=v),placeholder:"How others see your name"},null,512),[[E,t.profileData.displayName]])]),s("div",fd,[e[38]||(e[38]=s("label",{for:"email"},"Email Address",-1)),A(s("input",{type:"email",id:"email","onUpdate:modelValue":e[12]||(e[12]=v=>t.profileData.email=v),placeholder:"your.email@example.com"},null,512),[[E,t.profileData.email]])]),s("div",hd,[e[39]||(e[39]=s("label",{for:"bio"},"Bio",-1)),A(s("textarea",{id:"bio","onUpdate:modelValue":e[13]||(e[13]=v=>t.profileData.bio=v),placeholder:"Tell us about yourself...",rows:"4"},null,512),[[E,t.profileData.bio]])])])]),s("div",pd,[e[52]||(e[52]=s("div",{class:"section-header"},[s("h3",null,"Preferences"),s("p",null,"Customize your application experience")],-1)),s("div",vd,[s("div",yd,[s("div",bd,[e[42]||(e[42]=s("label",{for:"language"},"Language",-1)),A(s("select",{id:"language","onUpdate:modelValue":e[14]||(e[14]=v=>t.profileData.language=v)},[...e[41]||(e[41]=[s("option",{value:"en"},"English",-1),s("option",{value:"de"},"Deutsch",-1),s("option",{value:"fr"},"Fran√ßais",-1),s("option",{value:"es"},"Espa√±ol",-1)])],512),[[we,t.profileData.language]])]),s("div",_d,[e[44]||(e[44]=s("label",{for:"timezone"},"Timezone",-1)),A(s("select",{id:"timezone","onUpdate:modelValue":e[15]||(e[15]=v=>t.profileData.timezone=v)},[...e[43]||(e[43]=[s("option",{value:"UTC"},"UTC",-1),s("option",{value:"Europe/Berlin"},"Europe/Berlin",-1),s("option",{value:"America/New_York"},"America/New_York",-1),s("option",{value:"America/Los_Angeles"},"America/Los_Angeles",-1)])],512),[[we,t.profileData.timezone]])])]),s("div",wd,[s("div",kd,[e[46]||(e[46]=s("label",{for:"dateFormat"},"Date Format",-1)),A(s("select",{id:"dateFormat","onUpdate:modelValue":e[16]||(e[16]=v=>t.profileData.dateFormat=v)},[...e[45]||(e[45]=[s("option",{value:"MM/DD/YYYY"},"MM/DD/YYYY",-1),s("option",{value:"DD/MM/YYYY"},"DD/MM/YYYY",-1),s("option",{value:"YYYY-MM-DD"},"YYYY-MM-DD",-1)])],512),[[we,t.profileData.dateFormat]])]),s("div",Sd,[e[48]||(e[48]=s("label",{for:"booksApiProvider"},"Books API Provider",-1)),A(s("select",{id:"booksApiProvider","onUpdate:modelValue":e[17]||(e[17]=v=>t.profileData.booksApiProvider=v)},[...e[47]||(e[47]=[s("option",{value:"wikipedia"},"Wikipedia (Primary)",-1),s("option",{value:"google_books"},"Google Books (Fallback)",-1),s("option",{value:"both"},"Both (Wikipedia + Google Books)",-1)])],512),[[we,t.profileData.booksApiProvider]])])]),s("div",xd,[s("div",Id,[e[50]||(e[50]=s("label",{for:"enableGoogleBooksFallback"},"Enable Google Books Fallback",-1)),s("div",Cd,[A(s("input",{type:"checkbox",id:"enableGoogleBooksFallback","onUpdate:modelValue":e[18]||(e[18]=v=>t.profileData.enableGoogleBooksFallback=v)},null,512),[[ft,t.profileData.enableGoogleBooksFallback]]),e[49]||(e[49]=s("label",{for:"enableGoogleBooksFallback",class:"checkbox-label"}," Use Google Books as fallback when Wikipedia search fails ",-1))])]),e[51]||(e[51]=s("div",{class:"form-group"},null,-1))])])]),s("div",Dd,[e[57]||(e[57]=s("div",{class:"section-header"},[s("h3",null,"Data Management"),s("p",null,"Manage your data and account")],-1)),s("div",Ad,[s("div",Td,[s("button",{class:"data-btn export-btn",onClick:e[19]||(e[19]=(...v)=>t.exportData&&t.exportData(...v))},[...e[53]||(e[53]=[s("span",{class:"btn-icon"},"üì¶",-1),s("span",{class:"btn-text"},"Export All Data",-1),s("span",{class:"btn-description"},"Download your complete media library",-1)])]),s("button",{class:"data-btn import-btn",onClick:e[20]||(e[20]=(...v)=>t.importData&&t.importData(...v))},[...e[54]||(e[54]=[s("span",{class:"btn-icon"},"üì•",-1),s("span",{class:"btn-text"},"Import Data",-1),s("span",{class:"btn-description"},"Import data from a backup file",-1)])]),s("button",{class:"data-btn backup-btn",onClick:e[21]||(e[21]=(...v)=>t.createBackup&&t.createBackup(...v))},[...e[55]||(e[55]=[s("span",{class:"btn-icon"},"üíæ",-1),s("span",{class:"btn-text"},"Create Backup",-1),s("span",{class:"btn-description"},"Create a local backup of your data",-1)])]),s("button",{class:"data-btn cache-btn",onClick:e[22]||(e[22]=(...v)=>t.clearCache&&t.clearCache(...v))},[...e[56]||(e[56]=[s("span",{class:"btn-icon"},"üóëÔ∏è",-1),s("span",{class:"btn-text"},"Clear Cache",-1),s("span",{class:"btn-description"},"Clear temporary files and cache",-1)])])])])]),s("div",Md,[e[60]||(e[60]=s("div",{class:"section-header"},[s("h3",null,"Danger Zone"),s("p",null,"Irreversible and destructive actions")],-1)),s("div",Rd,[s("div",Ed,[s("button",{class:"danger-btn reset-btn",onClick:e[23]||(e[23]=(...v)=>t.resetSettings&&t.resetSettings(...v))},[...e[58]||(e[58]=[s("span",{class:"btn-icon"},"üîÑ",-1),s("span",{class:"btn-text"},"Reset All Settings",-1),s("span",{class:"btn-description"},"Reset all settings to default values",-1)])]),s("button",{class:"danger-btn clear-btn",onClick:e[24]||(e[24]=(...v)=>t.clearAllData&&t.clearAllData(...v))},[...e[59]||(e[59]=[s("span",{class:"btn-icon"},"üóëÔ∏è",-1),s("span",{class:"btn-text"},"Clear All Data",-1),s("span",{class:"btn-description"},"Permanently delete all your data",-1)])])])])])])])):t.currentCategory==="statistics"?(g(),f("div",Ud,[s("div",Bd,[e[61]||(e[61]=s("h1",null,"üìä Media Library Statistics",-1)),e[62]||(e[62]=s("p",null,"√úbersicht √ºber deine Media Collection",-1)),s("div",Ld,[s("button",{class:"refresh-btn",onClick:e[25]||(e[25]=(...v)=>t.loadMedia&&t.loadMedia(...v))},"üîÑ Refresh Statistics")])]),s("div",Pd,[s("div",Fd,[s("div",Nd,[s("div",Gd,p(t.statistics.totalItems),1),e[63]||(e[63]=s("div",{class:"summary-label"},"Total Items",-1))]),s("div",Wd,[s("div",Vd,p(t.statistics.totalCollections),1),e[64]||(e[64]=s("div",{class:"summary-label"},"Collections",-1))]),s("div",Od,[s("div",jd,p(t.statistics.totalPlaytime)+"h",1),e[65]||(e[65]=s("div",{class:"summary-label"},"Total Playtime",-1))]),s("div",zd,[s("div",Yd,p(t.statistics.avgRating),1),e[66]||(e[66]=s("div",{class:"summary-label"},"Avg Rating",-1))])]),s("div",Hd,[e[67]||(e[67]=s("h3",{class:"chart-title"},"üìà Category Distribution",-1)),s("div",qd,[(g(!0),f(te,null,se(t.statistics.categoryDistribution,(v,N)=>(g(),f("div",{key:N,class:"category-stat"},[s("div",Qd,p(N),1),s("div",Jd,[s("div",{class:"category-fill",style:Be({width:`${v/t.statistics.totalItems*100}%`})},null,4)]),s("div",Kd,p(v)+" ("+p((v/t.statistics.totalItems*100).toFixed(1))+"%)",1)]))),128))])]),s("div",Zd,[e[68]||(e[68]=s("h3",{class:"chart-title"},"‚≠ê Rating Distribution",-1)),s("div",Xd,[(g(!0),f(te,null,se(t.statistics.ratingDistribution,(v,N)=>(g(),f("div",{key:N,class:"rating-stat"},[s("div",$d,p(t.getRatingStars(N)),1),s("div",ec,[s("div",{class:"rating-fill",style:Be({width:`${v/t.statistics.totalItems*100}%`})},null,4)]),s("div",tc,p(v)+" ("+p((v/t.statistics.totalItems*100).toFixed(1))+"%)",1)]))),128))])]),s("div",sc,[e[69]||(e[69]=s("h3",{class:"chart-title"},"üéÆ Platform Distribution",-1)),s("div",ac,[(g(!0),f(te,null,se(t.statistics.platformDistribution,(v,N)=>(g(),f("div",{key:N,class:"platform-stat"},[s("div",oc,p(N),1),s("div",nc,[s("div",{class:"platform-fill",style:Be({width:`${v/t.statistics.totalItems*100}%`})},null,4)]),s("div",ic,p(v)+" ("+p((v/t.statistics.totalItems*100).toFixed(1))+"%)",1)]))),128))])]),s("div",lc,[e[70]||(e[70]=s("h3",{class:"chart-title"},"üé≠ Top Genres",-1)),s("div",rc,[(g(!0),f(te,null,se(t.statistics.genreDistribution,(v,N)=>(g(),f("div",{key:N,class:"genre-stat"},[s("div",dc,p(N),1),s("div",cc,[s("div",{class:"genre-fill",style:Be({width:`${v/t.statistics.totalItems*100}%`})},null,4)]),s("div",uc,p(v)+" ("+p((v/t.statistics.totalItems*100).toFixed(1))+"%)",1)]))),128))])]),s("div",mc,[e[71]||(e[71]=s("h3",{class:"chart-title"},"üìÖ Recent Activity",-1)),s("div",gc,[(g(!0),f(te,null,se(t.statistics.recentActivity,v=>(g(),f("div",{key:v.title,class:"activity-item"},[s("div",fc,p(v.title),1),s("div",hc,p(v.category),1),s("div",pc,p(t.formatDate(v.discovered)),1)]))),128))])]),s("div",vc,[e[72]||(e[72]=s("h3",{class:"chart-title"},"üì∫ Currently Airing Series",-1)),s("div",yc,[(g(!0),f(te,null,se(t.statistics.airingSeries,v=>(g(),f("div",{key:v.title,class:"airing-item"},[s("div",bc,p(v.title),1),s("div",_c,"Next: Season "+p(v.nextSeason),1),s("div",wc,p(v.nextSeasonRelease?t.formatDate(v.nextSeasonRelease):"TBA"),1)]))),128))])])])])):(g(),f("div",{key:3,class:z(["grid",{"edit-mode":t.editMode}])},[(g(!0),f(te,null,se(t.paginatedMedia,v=>(g(),Pe(_,{key:v.id,item:v,"edit-mode":t.editMode,onEdit:t.editItem,onWatchlistToggled:n.handleWatchlistToggled,onShowMessage:n.showMessage,onRatingChanged:t.handleRatingChanged},null,8,["item","edit-mode","onEdit","onWatchlistToggled","onShowMessage","onRatingChanged"]))),128))],2))]))])]),t.isLoggedIn?S("",!0):(g(),f("div",kc,[s("button",{onClick:e[26]||(e[26]=(...v)=>t.handleAdminSetup&&t.handleAdminSetup(...v)),disabled:t.adminSetupLoading,class:"admin-setup-btn",title:"Setup Admin Account (Creates admin account with default password)"},[t.adminSetupLoading?(g(),f("span",xc,"üîß Setting up...")):(g(),f("span",Ic,"üîß Admin Setup"))],8,Sc),t.adminSetupMessage?(g(),f("div",{key:0,class:z(["admin-setup-message",t.adminSetupMessage.type])},p(t.adminSetupMessage.text),3)):S("",!0)])),t.showLoginModal?(g(),Pe(T,{key:1,onClose:e[27]||(e[27]=v=>t.showLoginModal=!1),onSuccess:t.handleLoginSuccess,onSwitchToRegister:t.switchToRegister},null,8,["onSuccess","onSwitchToRegister"])):S("",!0),t.showRegisterModal?(g(),Pe(I,{key:2,onClose:e[28]||(e[28]=v=>t.showRegisterModal=!1),onSuccess:t.handleRegisterSuccess},null,8,["onSuccess"])):S("",!0),t.showEditModal?(g(),Pe(D,{key:3,item:t.editingItem,"current-category":t.currentCategory,onClose:t.closeEditModal,onSave:t.handleSaveItem,onDelete:t.handleDeleteItem},null,8,["item","current-category","onClose","onSave","onDelete"])):S("",!0),ve(c,{show:t.showBulkAddModal,"current-category":t.currentCategory,onClose:t.closeBulkAddModal},null,8,["show","current-category","onClose"]),ve(V,{show:t.showTxtImportModal,onClose:e[29]||(e[29]=v=>t.showTxtImportModal=!1),onFileProcessed:t.processTxtContent},null,8,["show","onFileProcessed"]),ve(oe,{show:t.showTxtImportResults,results:t.txtImportResults,onClose:t.closeTxtImportResults},null,8,["show","results","onClose"]),ve(H,{"show-menu":t.showFloatingMenu,"show-delete-all":t.isLoggedIn&&t.currentCategory!=="all"&&t.categoryCounts[t.currentCategory]>0,"category-name":t.currentCategoryDisplayName,"item-count":t.categoryCounts[t.currentCategory]||0,onToggleMenu:t.toggleFloatingMenu,onAddNewItem:t.addNewItem,onBulkAddItems:t.bulkAddItems,onImportFromTxt:t.importFromTxt,onImportFromApi:t.importFromAPI,onCreateCollection:t.createCollection,onDeleteAllInCategory:t.deleteAllInCategory},null,8,["show-menu","show-delete-all","category-name","item-count","onToggleMenu","onAddNewItem","onBulkAddItems","onImportFromTxt","onImportFromApi","onCreateCollection","onDeleteAllInCategory"]),ve(me,{show:t.messageStore.show,type:t.messageStore.type,title:t.messageStore.title,message:t.messageStore.message,details:t.messageStore.details,onClose:t.messageStore.closeMessage},null,8,["show","type","title","message","details","onClose"]),ve(Z,{show:t.confirmStore.show,title:t.confirmStore.title,message:t.confirmStore.message,onConfirm:t.confirmStore.confirm,onClose:t.confirmStore.cancel},null,8,["show","title","message","onConfirm","onClose"]),ve(ue,{show:t.inputStore.show,title:t.inputStore.title,message:t.inputStore.message,placeholder:t.inputStore.placeholder,"input-type":t.inputStore.inputType,"default-value":t.inputStore.defaultValue,onConfirm:t.inputStore.confirm,onClose:t.inputStore.cancel},null,8,["show","title","message","placeholder","input-type","default-value","onConfirm","onClose"])])}const Ac=ae(wr,[["render",Cc],["__scopeId","data-v-887409d1"]]);export{Ac as default};
