import{_ as E,b as y,e as a,D as V,n as j,z as G,t as g,w as d,s as b,v as f,k as R,a as J,r as W,i as _,c as u,j as H,u as K,o as S}from"./index-DL2gJxAr.js";import{S as Z,u as q,a as Q}from"./Sidebar-D03Rc9sF.js";const X={name:"Profile",components:{Sidebar:Z},setup(){const p=K(),e=J(),m=q(),o=Q(),v=W(null),s=_({firstName:"",lastName:"",displayName:"",email:"",bio:"",avatar:"",language:"en",timezone:"UTC",dateFormat:"MM/DD/YYYY",booksApiProvider:"wikipedia",enableGoogleBooksFallback:!0}),D=u(()=>m.totalItems),t=u(()=>e.isLoggedIn),N=u(()=>e.isAdmin),C=u(()=>e.userName),A=()=>{p.push("/")},Y=()=>{p.push("/calendar")},M=async()=>{await e.logout(),p.push("/")},w=()=>{m.loadMedia()},x=()=>{var n,i;const l=((n=s.firstName)==null?void 0:n.charAt(0))||"U",r=((i=s.lastName)==null?void 0:i.charAt(0))||"S";return(l+r).toUpperCase()},F=()=>{var l;(l=v.value)==null||l.click()},B=l=>{const r=l.target.files[0];if(r){const n=new FileReader;n.onload=i=>{s.avatar=i.target.result},n.readAsDataURL(r)}},I=()=>{const l={profile:s,media:m.mediaData,settings:{language:s.language,timezone:s.timezone,dateFormat:s.dateFormat},exportDate:new Date().toISOString()},r=new Blob([JSON.stringify(l,null,2)],{type:"application/json"}),n=URL.createObjectURL(r),i=document.createElement("a");i.href=n,i.download=`media-library-backup-${new Date().toISOString().split("T")[0]}.json`,i.click(),URL.revokeObjectURL(n)},U=()=>{const l=document.createElement("input");l.type="file",l.accept=".json",l.onchange=r=>{const n=r.target.files[0];if(n){const i=new FileReader;i.onload=z=>{try{const c=JSON.parse(z.target.result);c.profile&&Object.assign(s,c.profile),c.media&&(m.mediaData=c.media,m.saveMedia()),c.settings&&Object.assign(s,c.settings),k()}catch(c){console.error("Failed to import data:",c)}},i.readAsText(n)}},l.click()},T=()=>{const l={profile:s,media:m.mediaData,settings:{language:s.language,timezone:s.timezone,dateFormat:s.dateFormat},backupDate:new Date().toISOString()},r=`backup_${Date.now()}`;localStorage.setItem(r,JSON.stringify(l)),alert("Backup created successfully!")},L=()=>{alert("Cache cleared successfully!")},P=()=>{confirm("Are you sure you want to reset all settings?")&&(Object.assign(s,{firstName:"",lastName:"",displayName:"",email:"",bio:"",avatar:"",language:"en",timezone:"UTC",dateFormat:"MM/DD/YYYY",booksApiProvider:"wikipedia",enableGoogleBooksFallback:!0}),k())},h=()=>{confirm("Are you sure you want to clear all data? This cannot be undone!")&&(localStorage.clear(),p.push("/"))},k=()=>{localStorage.setItem("profileData",JSON.stringify(s))},O=()=>{k(),alert("All changes saved successfully!")};return H(()=>{var r,n;const l=localStorage.getItem("profileData");if(l)try{const i=JSON.parse(l);Object.assign(s,i)}catch(i){console.error("Failed to load profile data:",i)}e.user&&(s.firstName=((r=e.user.name)==null?void 0:r.split(" ")[0])||"",s.lastName=((n=e.user.name)==null?void 0:n.split(" ").slice(1).join(" "))||"",s.email=e.user.email||"")}),{avatarInput:v,profileData:s,totalItems:D,isLoggedIn:t,isAdmin:N,userName:C,navigateToLibrary:A,navigateToCalendar:Y,logout:M,refreshStats:w,getInitials:x,changeAvatar:F,handleAvatarChange:B,exportData:I,importData:U,createBackup:T,clearCache:L,resetSettings:P,clearAllData:h,saveAllChanges:O,sidebarStore:o}}},$={class:"vue-app"},aa={class:"main-content"},ea={class:"main-header"},oa={class:"header-left"},ta={class:"header-right"},sa={class:"content-area"},la={class:"profile-container"},ia={class:"profile-header"},na={class:"profile-avatar-section"},ra=["src"],da={key:1,class:"avatar-initials"},ca={class:"profile-info-header"},ma={class:"profile-stats"},pa={class:"stat-item"},ga={class:"stat-number"},ba={class:"stat-item"},fa={class:"stat-number"},ua={class:"settings-sections"},va={class:"settings-section"},Da={class:"section-content"},ka={class:"form-row"},ya={class:"form-group"},Sa={class:"form-group"},Na={class:"form-group"},Ca={class:"form-group"},Aa={class:"form-group"},Ya={class:"settings-section"},Ma={class:"section-content"},wa={class:"form-row"},xa={class:"form-group"},Fa={class:"form-group"},Ba={class:"form-row"},Ia={class:"form-group"},Ua={class:"form-group"},Ta={class:"form-row"},La={class:"form-group"},Pa={class:"checkbox-container"},ha={class:"settings-section"},Oa={class:"section-content"},za={class:"data-actions"},Ea={class:"settings-section danger-zone"},Va={class:"section-content"},ja={class:"danger-actions"},Ga={class:"floating-save"};function Ra(p,e,m,o,v,s){const D=G("Sidebar");return S(),y("div",$,[a("div",{class:j(["mobile-overlay",{show:o.sidebarStore.mobileOpen}]),onClick:e[0]||(e[0]=(...t)=>o.sidebarStore.closeMobileSidebar&&o.sidebarStore.closeMobileSidebar(...t))},null,2),V(D,{collapsed:o.sidebarStore.collapsed,"mobile-open":o.sidebarStore.mobileOpen,"is-logged-in":o.isLoggedIn,"is-admin":o.isAdmin,"user-name":o.userName,"current-category":"profile","category-counts":{},categories:[],onToggle:o.sidebarStore.toggleSidebar,onNavigateToLibrary:o.navigateToLibrary,onNavigateToCalendar:o.navigateToCalendar,onLogout:o.logout},null,8,["collapsed","mobile-open","is-logged-in","is-admin","user-name","onToggle","onNavigateToLibrary","onNavigateToCalendar","onLogout"]),a("div",aa,[a("header",ea,[a("div",oa,[a("button",{class:"mobile-sidebar-toggle",onClick:e[1]||(e[1]=(...t)=>o.sidebarStore.toggleMobileSidebar&&o.sidebarStore.toggleMobileSidebar(...t))},"☰"),e[22]||(e[22]=a("h1",{class:"page-title"},"Profile Settings",-1))]),a("div",ta,[a("button",{class:"refresh-stats-btn",onClick:e[2]||(e[2]=(...t)=>o.refreshStats&&o.refreshStats(...t)),title:"Refresh statistics"},[...e[23]||(e[23]=[a("span",{class:"refresh-icon"},"🔄",-1)])])])]),a("main",sa,[a("div",la,[a("div",ia,[a("div",na,[a("div",{class:"profile-avatar-large",onClick:e[3]||(e[3]=(...t)=>o.changeAvatar&&o.changeAvatar(...t))},[o.profileData.avatar?(S(),y("img",{key:0,src:o.profileData.avatar,alt:"Profile Picture"},null,8,ra)):(S(),y("span",da,g(o.getInitials()),1))]),a("input",{type:"file",ref:"avatarInput",accept:"image/*",onChange:e[4]||(e[4]=(...t)=>o.handleAvatarChange&&o.handleAvatarChange(...t)),style:{display:"none"}},null,544)]),a("div",ca,[a("h2",null,g(o.profileData.displayName||o.profileData.firstName+" "+o.profileData.lastName||"User"),1),a("p",null,g(o.profileData.email||"user@example.com"),1),a("div",ma,[a("div",pa,[a("span",ga,g(o.totalItems),1),e[24]||(e[24]=a("span",{class:"stat-label"},"Total Items",-1))]),a("div",ba,[a("span",fa,g(new Date().getFullYear()),1),e[25]||(e[25]=a("span",{class:"stat-label"},"Member Since",-1))])])])]),a("div",ua,[a("div",va,[e[31]||(e[31]=a("div",{class:"section-header"},[a("h3",null,"Personal Information"),a("p",null,"Manage your personal details and account information")],-1)),a("div",Da,[a("div",ka,[a("div",ya,[e[26]||(e[26]=a("label",{for:"firstName"},"First Name",-1)),d(a("input",{type:"text",id:"firstName","onUpdate:modelValue":e[5]||(e[5]=t=>o.profileData.firstName=t),placeholder:"Enter your first name"},null,512),[[b,o.profileData.firstName]])]),a("div",Sa,[e[27]||(e[27]=a("label",{for:"lastName"},"Last Name",-1)),d(a("input",{type:"text",id:"lastName","onUpdate:modelValue":e[6]||(e[6]=t=>o.profileData.lastName=t),placeholder:"Enter your last name"},null,512),[[b,o.profileData.lastName]])])]),a("div",Na,[e[28]||(e[28]=a("label",{for:"displayName"},"Display Name",-1)),d(a("input",{type:"text",id:"displayName","onUpdate:modelValue":e[7]||(e[7]=t=>o.profileData.displayName=t),placeholder:"How others see your name"},null,512),[[b,o.profileData.displayName]])]),a("div",Ca,[e[29]||(e[29]=a("label",{for:"email"},"Email Address",-1)),d(a("input",{type:"email",id:"email","onUpdate:modelValue":e[8]||(e[8]=t=>o.profileData.email=t),placeholder:"your.email@example.com"},null,512),[[b,o.profileData.email]])]),a("div",Aa,[e[30]||(e[30]=a("label",{for:"bio"},"Bio",-1)),d(a("textarea",{id:"bio","onUpdate:modelValue":e[9]||(e[9]=t=>o.profileData.bio=t),placeholder:"Tell us about yourself...",rows:"4"},null,512),[[b,o.profileData.bio]])])])]),a("div",Ya,[e[43]||(e[43]=a("div",{class:"section-header"},[a("h3",null,"Preferences"),a("p",null,"Customize your application experience")],-1)),a("div",Ma,[a("div",wa,[a("div",xa,[e[33]||(e[33]=a("label",{for:"language"},"Language",-1)),d(a("select",{id:"language","onUpdate:modelValue":e[10]||(e[10]=t=>o.profileData.language=t)},[...e[32]||(e[32]=[a("option",{value:"en"},"English",-1),a("option",{value:"de"},"Deutsch",-1),a("option",{value:"fr"},"Français",-1),a("option",{value:"es"},"Español",-1)])],512),[[f,o.profileData.language]])]),a("div",Fa,[e[35]||(e[35]=a("label",{for:"timezone"},"Timezone",-1)),d(a("select",{id:"timezone","onUpdate:modelValue":e[11]||(e[11]=t=>o.profileData.timezone=t)},[...e[34]||(e[34]=[a("option",{value:"UTC"},"UTC",-1),a("option",{value:"Europe/Berlin"},"Europe/Berlin",-1),a("option",{value:"America/New_York"},"America/New_York",-1),a("option",{value:"America/Los_Angeles"},"America/Los_Angeles",-1)])],512),[[f,o.profileData.timezone]])])]),a("div",Ba,[a("div",Ia,[e[37]||(e[37]=a("label",{for:"dateFormat"},"Date Format",-1)),d(a("select",{id:"dateFormat","onUpdate:modelValue":e[12]||(e[12]=t=>o.profileData.dateFormat=t)},[...e[36]||(e[36]=[a("option",{value:"MM/DD/YYYY"},"MM/DD/YYYY",-1),a("option",{value:"DD/MM/YYYY"},"DD/MM/YYYY",-1),a("option",{value:"YYYY-MM-DD"},"YYYY-MM-DD",-1)])],512),[[f,o.profileData.dateFormat]])]),a("div",Ua,[e[39]||(e[39]=a("label",{for:"booksApiProvider"},"Books API Provider",-1)),d(a("select",{id:"booksApiProvider","onUpdate:modelValue":e[13]||(e[13]=t=>o.profileData.booksApiProvider=t)},[...e[38]||(e[38]=[a("option",{value:"wikipedia"},"Wikipedia (Primary)",-1),a("option",{value:"google_books"},"Google Books (Fallback)",-1),a("option",{value:"both"},"Both (Wikipedia + Google Books)",-1)])],512),[[f,o.profileData.booksApiProvider]])])]),a("div",Ta,[a("div",La,[e[41]||(e[41]=a("label",{for:"enableGoogleBooksFallback"},"Enable Google Books Fallback",-1)),a("div",Pa,[d(a("input",{type:"checkbox",id:"enableGoogleBooksFallback","onUpdate:modelValue":e[14]||(e[14]=t=>o.profileData.enableGoogleBooksFallback=t)},null,512),[[R,o.profileData.enableGoogleBooksFallback]]),e[40]||(e[40]=a("label",{for:"enableGoogleBooksFallback",class:"checkbox-label"}," Use Google Books as fallback when Wikipedia search fails ",-1))])]),e[42]||(e[42]=a("div",{class:"form-group"},null,-1))])])]),a("div",ha,[e[48]||(e[48]=a("div",{class:"section-header"},[a("h3",null,"Data Management"),a("p",null,"Manage your data and account")],-1)),a("div",Oa,[a("div",za,[a("button",{class:"data-btn export-btn",onClick:e[15]||(e[15]=(...t)=>o.exportData&&o.exportData(...t))},[...e[44]||(e[44]=[a("span",{class:"btn-icon"},"📦",-1),a("span",{class:"btn-text"},"Export All Data",-1),a("span",{class:"btn-description"},"Download your complete media library",-1)])]),a("button",{class:"data-btn import-btn",onClick:e[16]||(e[16]=(...t)=>o.importData&&o.importData(...t))},[...e[45]||(e[45]=[a("span",{class:"btn-icon"},"📥",-1),a("span",{class:"btn-text"},"Import Data",-1),a("span",{class:"btn-description"},"Import data from a backup file",-1)])]),a("button",{class:"data-btn backup-btn",onClick:e[17]||(e[17]=(...t)=>o.createBackup&&o.createBackup(...t))},[...e[46]||(e[46]=[a("span",{class:"btn-icon"},"💾",-1),a("span",{class:"btn-text"},"Create Backup",-1),a("span",{class:"btn-description"},"Create a local backup of your data",-1)])]),a("button",{class:"data-btn cache-btn",onClick:e[18]||(e[18]=(...t)=>o.clearCache&&o.clearCache(...t))},[...e[47]||(e[47]=[a("span",{class:"btn-icon"},"🗑️",-1),a("span",{class:"btn-text"},"Clear Cache",-1),a("span",{class:"btn-description"},"Clear temporary files and cache",-1)])])])])]),a("div",Ea,[e[51]||(e[51]=a("div",{class:"section-header"},[a("h3",null,"Danger Zone"),a("p",null,"Irreversible and destructive actions")],-1)),a("div",Va,[a("div",ja,[a("button",{class:"danger-btn reset-btn",onClick:e[19]||(e[19]=(...t)=>o.resetSettings&&o.resetSettings(...t))},[...e[49]||(e[49]=[a("span",{class:"btn-icon"},"🔄",-1),a("span",{class:"btn-text"},"Reset All Settings",-1),a("span",{class:"btn-description"},"Reset all settings to default values",-1)])]),a("button",{class:"danger-btn clear-btn",onClick:e[20]||(e[20]=(...t)=>o.clearAllData&&o.clearAllData(...t))},[...e[50]||(e[50]=[a("span",{class:"btn-icon"},"🗑️",-1),a("span",{class:"btn-text"},"Clear All Data",-1),a("span",{class:"btn-description"},"Permanently delete all your data",-1)])])])])])])])])]),a("div",Ga,[a("button",{class:"save-all-btn",onClick:e[21]||(e[21]=(...t)=>o.saveAllChanges&&o.saveAllChanges(...t))}," Save All Changes ")])])}const _a=E(X,[["render",Ra],["__scopeId","data-v-5baa1b65"]]);export{_a as default};
