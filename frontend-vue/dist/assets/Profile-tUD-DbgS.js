import{_ as R,b as y,e as a,z as j,n as V,B as P,t as g,k as c,m as f,v as S,a as _,r as J,i as H,c as u,C as K,u as Z,o as N}from"./index-Cc_nDPSL.js";import{S as q,u as G,a as Q}from"./Sidebar-B0NYlswE.js";const W={name:"Profile",components:{Sidebar:q},setup(){const p=Z(),t=_(),m=G(),e=Q(),b=J(null),s=H({firstName:"",lastName:"",displayName:"",email:"",bio:"",avatar:"",language:"en",timezone:"UTC",dateFormat:"MM/DD/YYYY"}),v=u(()=>m.totalItems),o=u(()=>t.isLoggedIn),C=u(()=>t.isAdmin),k=u(()=>t.userName),Y=()=>{p.push("/")},A=()=>{p.push("/calendar")},M=async()=>{await t.logout(),p.push("/")},x=()=>{m.loadMedia()},w=()=>{var i,l;const n=((i=s.firstName)==null?void 0:i.charAt(0))||"U",r=((l=s.lastName)==null?void 0:l.charAt(0))||"S";return(n+r).toUpperCase()},I=()=>{var n;(n=b.value)==null||n.click()},T=n=>{const r=n.target.files[0];if(r){const i=new FileReader;i.onload=l=>{s.avatar=l.target.result},i.readAsDataURL(r)}},U=()=>{const n={profile:s,media:m.mediaData,settings:{language:s.language,timezone:s.timezone,dateFormat:s.dateFormat},exportDate:new Date().toISOString()},r=new Blob([JSON.stringify(n,null,2)],{type:"application/json"}),i=URL.createObjectURL(r),l=document.createElement("a");l.href=i,l.download=`media-library-backup-${new Date().toISOString().split("T")[0]}.json`,l.click(),URL.revokeObjectURL(i)},F=()=>{const n=document.createElement("input");n.type="file",n.accept=".json",n.onchange=r=>{const i=r.target.files[0];if(i){const l=new FileReader;l.onload=E=>{try{const d=JSON.parse(E.target.result);d.profile&&Object.assign(s,d.profile),d.media&&(m.mediaData=d.media,m.saveMedia()),d.settings&&Object.assign(s,d.settings),D()}catch(d){console.error("Failed to import data:",d)}},l.readAsText(i)}},n.click()},L=()=>{const n={profile:s,media:m.mediaData,settings:{language:s.language,timezone:s.timezone,dateFormat:s.dateFormat},backupDate:new Date().toISOString()},r=`backup_${Date.now()}`;localStorage.setItem(r,JSON.stringify(n)),alert("Backup created successfully!")},h=()=>{alert("Cache cleared successfully!")},O=()=>{confirm("Are you sure you want to reset all settings?")&&(Object.assign(s,{firstName:"",lastName:"",displayName:"",email:"",bio:"",avatar:"",language:"en",timezone:"UTC",dateFormat:"MM/DD/YYYY"}),D())},z=()=>{confirm("Are you sure you want to clear all data? This cannot be undone!")&&(localStorage.clear(),p.push("/"))},D=()=>{localStorage.setItem("profileData",JSON.stringify(s))},B=()=>{D(),alert("All changes saved successfully!")};return K(()=>{var r,i;const n=localStorage.getItem("profileData");if(n)try{const l=JSON.parse(n);Object.assign(s,l)}catch(l){console.error("Failed to load profile data:",l)}t.user&&(s.firstName=((r=t.user.name)==null?void 0:r.split(" ")[0])||"",s.lastName=((i=t.user.name)==null?void 0:i.split(" ").slice(1).join(" "))||"",s.email=t.user.email||"")}),{avatarInput:b,profileData:s,totalItems:v,isLoggedIn:o,isAdmin:C,userName:k,navigateToLibrary:Y,navigateToCalendar:A,logout:M,refreshStats:x,getInitials:w,changeAvatar:I,handleAvatarChange:T,exportData:U,importData:F,createBackup:L,clearCache:h,resetSettings:O,clearAllData:z,saveAllChanges:B,sidebarStore:e}}},X={class:"vue-app"},$={class:"main-content"},aa={class:"main-header"},ta={class:"header-left"},ea={class:"header-right"},oa={class:"content-area"},sa={class:"profile-container"},na={class:"profile-header"},la={class:"profile-avatar-section"},ia=["src"],ra={key:1,class:"avatar-initials"},da={class:"profile-info-header"},ca={class:"profile-stats"},ma={class:"stat-item"},pa={class:"stat-number"},ga={class:"stat-item"},fa={class:"stat-number"},ua={class:"settings-sections"},ba={class:"settings-section"},va={class:"section-content"},Da={class:"form-row"},ya={class:"form-group"},Sa={class:"form-group"},Na={class:"form-group"},Ca={class:"form-group"},ka={class:"form-group"},Ya={class:"settings-section"},Aa={class:"section-content"},Ma={class:"form-row"},xa={class:"form-group"},wa={class:"form-group"},Ia={class:"form-row"},Ta={class:"form-group"},Ua={class:"settings-section"},Fa={class:"section-content"},La={class:"data-actions"},ha={class:"settings-section danger-zone"},Oa={class:"section-content"},za={class:"danger-actions"},Ba={class:"floating-save"};function Ea(p,t,m,e,b,s){const v=P("Sidebar");return N(),y("div",X,[a("div",{class:V(["mobile-overlay",{show:e.sidebarStore.mobileOpen}]),onClick:t[0]||(t[0]=(...o)=>e.sidebarStore.closeMobileSidebar&&e.sidebarStore.closeMobileSidebar(...o))},null,2),j(v,{collapsed:e.sidebarStore.collapsed,"mobile-open":e.sidebarStore.mobileOpen,"is-logged-in":e.isLoggedIn,"is-admin":e.isAdmin,"user-name":e.userName,"current-category":"profile","category-counts":{},platforms:[],genres:[],categories:[],onToggle:e.sidebarStore.toggleSidebar,onNavigateToLibrary:e.navigateToLibrary,onNavigateToCalendar:e.navigateToCalendar,onLogout:e.logout},null,8,["collapsed","mobile-open","is-logged-in","is-admin","user-name","onToggle","onNavigateToLibrary","onNavigateToCalendar","onLogout"]),a("div",$,[a("header",aa,[a("div",ta,[a("button",{class:"mobile-sidebar-toggle",onClick:t[1]||(t[1]=(...o)=>e.sidebarStore.toggleMobileSidebar&&e.sidebarStore.toggleMobileSidebar(...o))},"☰"),t[20]||(t[20]=a("h1",{class:"page-title"},"Profile Settings",-1))]),a("div",ea,[a("button",{class:"refresh-stats-btn",onClick:t[2]||(t[2]=(...o)=>e.refreshStats&&e.refreshStats(...o)),title:"Refresh statistics"},[...t[21]||(t[21]=[a("span",{class:"refresh-icon"},"🔄",-1)])])])]),a("main",oa,[a("div",sa,[a("div",na,[a("div",la,[a("div",{class:"profile-avatar-large",onClick:t[3]||(t[3]=(...o)=>e.changeAvatar&&e.changeAvatar(...o))},[e.profileData.avatar?(N(),y("img",{key:0,src:e.profileData.avatar,alt:"Profile Picture"},null,8,ia)):(N(),y("span",ra,g(e.getInitials()),1))]),a("input",{type:"file",ref:"avatarInput",accept:"image/*",onChange:t[4]||(t[4]=(...o)=>e.handleAvatarChange&&e.handleAvatarChange(...o)),style:{display:"none"}},null,544)]),a("div",da,[a("h2",null,g(e.profileData.displayName||e.profileData.firstName+" "+e.profileData.lastName||"User"),1),a("p",null,g(e.profileData.email||"user@example.com"),1),a("div",ca,[a("div",ma,[a("span",pa,g(e.totalItems),1),t[22]||(t[22]=a("span",{class:"stat-label"},"Total Items",-1))]),a("div",ga,[a("span",fa,g(new Date().getFullYear()),1),t[23]||(t[23]=a("span",{class:"stat-label"},"Member Since",-1))])])])]),a("div",ua,[a("div",ba,[t[29]||(t[29]=a("div",{class:"section-header"},[a("h3",null,"Personal Information"),a("p",null,"Manage your personal details and account information")],-1)),a("div",va,[a("div",Da,[a("div",ya,[t[24]||(t[24]=a("label",{for:"firstName"},"First Name",-1)),c(a("input",{type:"text",id:"firstName","onUpdate:modelValue":t[5]||(t[5]=o=>e.profileData.firstName=o),placeholder:"Enter your first name"},null,512),[[f,e.profileData.firstName]])]),a("div",Sa,[t[25]||(t[25]=a("label",{for:"lastName"},"Last Name",-1)),c(a("input",{type:"text",id:"lastName","onUpdate:modelValue":t[6]||(t[6]=o=>e.profileData.lastName=o),placeholder:"Enter your last name"},null,512),[[f,e.profileData.lastName]])])]),a("div",Na,[t[26]||(t[26]=a("label",{for:"displayName"},"Display Name",-1)),c(a("input",{type:"text",id:"displayName","onUpdate:modelValue":t[7]||(t[7]=o=>e.profileData.displayName=o),placeholder:"How others see your name"},null,512),[[f,e.profileData.displayName]])]),a("div",Ca,[t[27]||(t[27]=a("label",{for:"email"},"Email Address",-1)),c(a("input",{type:"email",id:"email","onUpdate:modelValue":t[8]||(t[8]=o=>e.profileData.email=o),placeholder:"your.email@example.com"},null,512),[[f,e.profileData.email]])]),a("div",ka,[t[28]||(t[28]=a("label",{for:"bio"},"Bio",-1)),c(a("textarea",{id:"bio","onUpdate:modelValue":t[9]||(t[9]=o=>e.profileData.bio=o),placeholder:"Tell us about yourself...",rows:"4"},null,512),[[f,e.profileData.bio]])])])]),a("div",Ya,[t[37]||(t[37]=a("div",{class:"section-header"},[a("h3",null,"Preferences"),a("p",null,"Customize your application experience")],-1)),a("div",Aa,[a("div",Ma,[a("div",xa,[t[31]||(t[31]=a("label",{for:"language"},"Language",-1)),c(a("select",{id:"language","onUpdate:modelValue":t[10]||(t[10]=o=>e.profileData.language=o)},[...t[30]||(t[30]=[a("option",{value:"en"},"English",-1),a("option",{value:"de"},"Deutsch",-1),a("option",{value:"fr"},"Français",-1),a("option",{value:"es"},"Español",-1)])],512),[[S,e.profileData.language]])]),a("div",wa,[t[33]||(t[33]=a("label",{for:"timezone"},"Timezone",-1)),c(a("select",{id:"timezone","onUpdate:modelValue":t[11]||(t[11]=o=>e.profileData.timezone=o)},[...t[32]||(t[32]=[a("option",{value:"UTC"},"UTC",-1),a("option",{value:"Europe/Berlin"},"Europe/Berlin",-1),a("option",{value:"America/New_York"},"America/New_York",-1),a("option",{value:"America/Los_Angeles"},"America/Los_Angeles",-1)])],512),[[S,e.profileData.timezone]])])]),a("div",Ia,[a("div",Ta,[t[35]||(t[35]=a("label",{for:"dateFormat"},"Date Format",-1)),c(a("select",{id:"dateFormat","onUpdate:modelValue":t[12]||(t[12]=o=>e.profileData.dateFormat=o)},[...t[34]||(t[34]=[a("option",{value:"MM/DD/YYYY"},"MM/DD/YYYY",-1),a("option",{value:"DD/MM/YYYY"},"DD/MM/YYYY",-1),a("option",{value:"YYYY-MM-DD"},"YYYY-MM-DD",-1)])],512),[[S,e.profileData.dateFormat]])]),t[36]||(t[36]=a("div",{class:"form-group"},null,-1))])])]),a("div",Ua,[t[42]||(t[42]=a("div",{class:"section-header"},[a("h3",null,"Data Management"),a("p",null,"Manage your data and account")],-1)),a("div",Fa,[a("div",La,[a("button",{class:"data-btn export-btn",onClick:t[13]||(t[13]=(...o)=>e.exportData&&e.exportData(...o))},[...t[38]||(t[38]=[a("span",{class:"btn-icon"},"📦",-1),a("span",{class:"btn-text"},"Export All Data",-1),a("span",{class:"btn-description"},"Download your complete media library",-1)])]),a("button",{class:"data-btn import-btn",onClick:t[14]||(t[14]=(...o)=>e.importData&&e.importData(...o))},[...t[39]||(t[39]=[a("span",{class:"btn-icon"},"📥",-1),a("span",{class:"btn-text"},"Import Data",-1),a("span",{class:"btn-description"},"Import data from a backup file",-1)])]),a("button",{class:"data-btn backup-btn",onClick:t[15]||(t[15]=(...o)=>e.createBackup&&e.createBackup(...o))},[...t[40]||(t[40]=[a("span",{class:"btn-icon"},"💾",-1),a("span",{class:"btn-text"},"Create Backup",-1),a("span",{class:"btn-description"},"Create a local backup of your data",-1)])]),a("button",{class:"data-btn cache-btn",onClick:t[16]||(t[16]=(...o)=>e.clearCache&&e.clearCache(...o))},[...t[41]||(t[41]=[a("span",{class:"btn-icon"},"🗑️",-1),a("span",{class:"btn-text"},"Clear Cache",-1),a("span",{class:"btn-description"},"Clear temporary files and cache",-1)])])])])]),a("div",ha,[t[45]||(t[45]=a("div",{class:"section-header"},[a("h3",null,"Danger Zone"),a("p",null,"Irreversible and destructive actions")],-1)),a("div",Oa,[a("div",za,[a("button",{class:"danger-btn reset-btn",onClick:t[17]||(t[17]=(...o)=>e.resetSettings&&e.resetSettings(...o))},[...t[43]||(t[43]=[a("span",{class:"btn-icon"},"🔄",-1),a("span",{class:"btn-text"},"Reset All Settings",-1),a("span",{class:"btn-description"},"Reset all settings to default values",-1)])]),a("button",{class:"danger-btn clear-btn",onClick:t[18]||(t[18]=(...o)=>e.clearAllData&&e.clearAllData(...o))},[...t[44]||(t[44]=[a("span",{class:"btn-icon"},"🗑️",-1),a("span",{class:"btn-text"},"Clear All Data",-1),a("span",{class:"btn-description"},"Permanently delete all your data",-1)])])])])])])])])]),a("div",Ba,[a("button",{class:"save-all-btn",onClick:t[19]||(t[19]=(...o)=>e.saveAllChanges&&e.saveAllChanges(...o))}," Save All Changes ")])])}const Va=R(W,[["render",Ea],["__scopeId","data-v-9beca17a"]]);export{Va as default};
