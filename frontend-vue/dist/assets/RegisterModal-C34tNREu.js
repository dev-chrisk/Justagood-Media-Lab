import{_ as w,b as u,e as s,F as R,p as L,l as S,o as p,t as v,a as y,i as h,r as b,j as _,f as C,k as c,m,c as B}from"./index-Cgo_GXa4.js";const D={name:"MainHeader",props:{searchQuery:{type:String,default:""},gridColumns:{type:Number,default:8},sortBy:{type:String,default:"order_asc"}},emits:["update:searchQuery","update:gridColumns","update:sortBy","toggleMobileSidebar","clearSearch"]},P={class:"main-header"},U={class:"header-left"},$={class:"header-center"},A={class:"search-container"},V=["value"],N={class:"header-right"},E={class:"grid-count-container"},F=["value"],I=["value"],q={class:"sort-container"},T=["value"];function j(n,e,i,o,l,r){return p(),u("header",P,[s("div",U,[s("button",{class:"mobile-sidebar-toggle",onClick:e[0]||(e[0]=a=>n.$emit("toggleMobileSidebar"))},"☰")]),s("div",$,[s("div",A,[s("input",{type:"text",value:i.searchQuery,onInput:e[1]||(e[1]=a=>n.$emit("update:searchQuery",a.target.value)),placeholder:"Search..."},null,40,V),s("button",{class:"search-clear",onClick:e[2]||(e[2]=a=>n.$emit("clearSearch"))},"×")])]),s("div",N,[s("div",E,[e[5]||(e[5]=s("label",{class:"columns-label"},"Columns:",-1)),s("select",{value:i.gridColumns,onChange:e[3]||(e[3]=a=>n.$emit("update:gridColumns",parseInt(a.target.value)))},[(p(),u(R,null,L(12,a=>s("option",{key:a,value:a},v(a),9,I)),64))],40,F)]),s("div",q,[s("select",{value:i.sortBy,onChange:e[4]||(e[4]=a=>n.$emit("update:sortBy",a.target.value))},[...e[6]||(e[6]=[S('<option value="order_asc" data-v-7a1af332>Original order ↑</option><option value="order_desc" data-v-7a1af332>Original order ↓</option><option value="title_asc" data-v-7a1af332>Title A-Z</option><option value="title_desc" data-v-7a1af332>Title Z-A</option><option value="release_asc" data-v-7a1af332>Release ↑</option><option value="release_desc" data-v-7a1af332>Release ↓</option><option value="api_rating_asc" data-v-7a1af332>API Rating ↑</option><option value="api_rating_desc" data-v-7a1af332>API Rating ↓</option><option value="personal_rating_asc" data-v-7a1af332>Personal Rating ↑</option><option value="personal_rating_desc" data-v-7a1af332>Personal Rating ↓</option><option value="airing_desc" data-v-7a1af332>Airing first</option><option value="airing_asc" data-v-7a1af332>Finished first</option>',12)])],40,T)])])])}const fe=w(D,[["render",j],["__scopeId","data-v-7a1af332"]]),Q={name:"LoginModal",emits:["close","success"],setup(n,{emit:e}){const i=y(),o=h({email:"",password:""}),l=b(!1),r=b("");return{form:o,loading:l,error:r,handleLogin:async()=>{l.value=!0,r.value="";try{const t=await i.login(o.email,o.password);t.success?e("success",t):r.value=t.error}catch(t){r.value=t.message||"Login failed"}finally{l.value=!1}},closeModal:()=>{e("close")},checkLocalDB:async()=>{try{const g=await(await fetch("http://127.0.0.1:8000/api/check-db")).json();alert(`Local DB: ${g.success?"✅ Connected":"❌ Error"}
Users: ${g.user_count}
Error: ${g.error||"None"}`)}catch(t){alert(`Local DB Check Failed: ${t.message}`)}},checkProdDB:async()=>{try{const t=window.location.origin,d=await(await fetch(`${t}/api/check-db`)).json();alert(`Prod DB: ${d.success?"✅ Connected":"❌ Error"}
Users: ${d.user_count}
Error: ${d.error||"None"}`)}catch(t){alert(`Prod DB Check Failed: ${t.message}`)}},deleteAllUsers:async()=>{if(confirm("⚠️ WARNING: This will delete ALL users! Are you sure?"))try{const t=window.location.origin,d=await(await fetch(`${t}/api/delete-all-users`,{method:"POST",headers:{"Content-Type":"application/json"}})).json();alert(`Delete Result: ${d.success?"✅ Success":"❌ Error"}
Deleted: ${d.deleted_count} users
Error: ${d.error||"None"}`)}catch(t){alert(`Delete Failed: ${t.message}`)}}}}},x={class:"form-group"},O=["disabled"],H={class:"form-group"},Z=["disabled"],G={key:0,class:"error-message"},W={class:"modal-buttons"},z=["disabled"],J=["disabled"];function K(n,e,i,o,l,r){return p(),u("div",{class:"modal",onClick:e[5]||(e[5]=(...a)=>o.closeModal&&o.closeModal(...a))},[s("div",{class:"modal-content auth-modal",onClick:e[4]||(e[4]=_(()=>{},["stop"]))},[e[8]||(e[8]=s("h2",null,"Login",-1)),s("form",{onSubmit:e[3]||(e[3]=_((...a)=>o.handleLogin&&o.handleLogin(...a),["prevent"]))},[s("div",x,[e[6]||(e[6]=s("label",{for:"email"},"Email:",-1)),c(s("input",{type:"email",id:"email","onUpdate:modelValue":e[0]||(e[0]=a=>o.form.email=a),required:"",disabled:o.loading},null,8,O),[[m,o.form.email]])]),s("div",H,[e[7]||(e[7]=s("label",{for:"password"},"Password:",-1)),c(s("input",{type:"password",id:"password","onUpdate:modelValue":e[1]||(e[1]=a=>o.form.password=a),required:"",disabled:o.loading},null,8,Z),[[m,o.form.password]])]),o.error?(p(),u("div",G,v(o.error),1)):C("",!0),s("div",W,[s("button",{type:"submit",disabled:o.loading},v(o.loading?"Logging in...":"Login"),9,z),s("button",{type:"button",onClick:e[2]||(e[2]=(...a)=>o.closeModal&&o.closeModal(...a)),disabled:o.loading}," Cancel ",8,J)])],32)])])}const ge=w(Q,[["render",K],["__scopeId","data-v-50b76f61"]]),X={name:"RegisterModal",emits:["close","success"],setup(n,{emit:e}){const i=y(),o=h({name:"",email:"",password:"",passwordConfirm:""}),l=b(!1),r=b(""),a=B(()=>o.name&&o.email&&o.password&&o.passwordConfirm&&o.password===o.passwordConfirm&&o.password.length>=8);return{form:o,loading:l,error:r,isFormValid:a,handleRegister:async()=>{if(!a.value){r.value="Please fill in all fields and ensure passwords match";return}l.value=!0,r.value="";try{const f=await i.register(o.name,o.email,o.password,o.passwordConfirm);f.success?e("success"):r.value=f.error}catch(f){r.value=f.message||"Registration failed"}finally{l.value=!1}},closeModal:()=>{e("close")}}}},Y={class:"form-group"},ee=["disabled"],oe={class:"form-group"},se=["disabled"],ae={class:"form-group"},te=["disabled"],re={class:"form-group"},le=["disabled"],ne={key:0,class:"error-message"},ie={class:"modal-buttons"},de=["disabled"],ce=["disabled"];function me(n,e,i,o,l,r){return p(),u("div",{class:"modal",onClick:e[7]||(e[7]=(...a)=>o.closeModal&&o.closeModal(...a))},[s("div",{class:"modal-content auth-modal",onClick:e[6]||(e[6]=_(()=>{},["stop"]))},[e[12]||(e[12]=s("h2",null,"Register",-1)),s("form",{onSubmit:e[5]||(e[5]=_((...a)=>o.handleRegister&&o.handleRegister(...a),["prevent"]))},[s("div",Y,[e[8]||(e[8]=s("label",{for:"name"},"Name:",-1)),c(s("input",{type:"text",id:"name","onUpdate:modelValue":e[0]||(e[0]=a=>o.form.name=a),required:"",disabled:o.loading},null,8,ee),[[m,o.form.name]])]),s("div",oe,[e[9]||(e[9]=s("label",{for:"email"},"Email:",-1)),c(s("input",{type:"email",id:"email","onUpdate:modelValue":e[1]||(e[1]=a=>o.form.email=a),required:"",disabled:o.loading},null,8,se),[[m,o.form.email]])]),s("div",ae,[e[10]||(e[10]=s("label",{for:"password"},"Password:",-1)),c(s("input",{type:"password",id:"password","onUpdate:modelValue":e[2]||(e[2]=a=>o.form.password=a),required:"",minlength:"8",disabled:o.loading},null,8,te),[[m,o.form.password]])]),s("div",re,[e[11]||(e[11]=s("label",{for:"passwordConfirm"},"Confirm Password:",-1)),c(s("input",{type:"password",id:"passwordConfirm","onUpdate:modelValue":e[3]||(e[3]=a=>o.form.passwordConfirm=a),required:"",minlength:"8",disabled:o.loading},null,8,le),[[m,o.form.passwordConfirm]])]),o.error?(p(),u("div",ne,v(o.error),1)):C("",!0),s("div",ie,[s("button",{type:"submit",disabled:o.loading||!o.isFormValid},v(o.loading?"Registering...":"Register"),9,de),s("button",{type:"button",onClick:e[4]||(e[4]=(...a)=>o.closeModal&&o.closeModal(...a)),disabled:o.loading}," Cancel ",8,ce)])],32)])])}const ve=w(X,[["render",me],["__scopeId","data-v-d5de55ea"]]);export{ge as L,fe as M,ve as R};
