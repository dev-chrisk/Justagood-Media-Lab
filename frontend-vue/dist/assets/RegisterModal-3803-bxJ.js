import{_,b as m,e as s,F as k,p as R,l as L,o as p,t as f,a as w,i as h,r as v,j as b,f as y,k as c,m as u,c as S}from"./index-zBqNvkpX.js";const B={name:"MainHeader",props:{searchQuery:{type:String,default:""},gridColumns:{type:Number,default:8},sortBy:{type:String,default:"order_asc"}},emits:["update:searchQuery","update:gridColumns","update:sortBy","toggleMobileSidebar","clearSearch"]},D={class:"main-header"},P={class:"header-left"},A={class:"header-center"},V={class:"search-container"},N=["value"],U={class:"header-right"},$={class:"grid-count-container"},E=["value"],F=["value"],I={class:"sort-container"},q=["value"];function T(i,e,d,o,n,r){return p(),m("header",D,[s("div",P,[s("button",{class:"mobile-sidebar-toggle",onClick:e[0]||(e[0]=a=>i.$emit("toggleMobileSidebar"))},"☰")]),s("div",A,[s("div",V,[s("input",{type:"text",value:d.searchQuery,onInput:e[1]||(e[1]=a=>i.$emit("update:searchQuery",a.target.value)),placeholder:"Search..."},null,40,N),s("button",{class:"search-clear",onClick:e[2]||(e[2]=a=>i.$emit("clearSearch"))},"×")])]),s("div",U,[s("div",$,[e[5]||(e[5]=s("label",{class:"columns-label"},"Columns:",-1)),s("select",{value:d.gridColumns,onChange:e[3]||(e[3]=a=>i.$emit("update:gridColumns",parseInt(a.target.value)))},[(p(),m(k,null,R(12,a=>s("option",{key:a,value:a},f(a),9,F)),64))],40,E)]),s("div",I,[s("select",{value:d.sortBy,onChange:e[4]||(e[4]=a=>i.$emit("update:sortBy",a.target.value))},[...e[6]||(e[6]=[L('<option value="order_asc" data-v-7a1af332>Original order ↑</option><option value="order_desc" data-v-7a1af332>Original order ↓</option><option value="title_asc" data-v-7a1af332>Title A-Z</option><option value="title_desc" data-v-7a1af332>Title Z-A</option><option value="release_asc" data-v-7a1af332>Release ↑</option><option value="release_desc" data-v-7a1af332>Release ↓</option><option value="api_rating_asc" data-v-7a1af332>API Rating ↑</option><option value="api_rating_desc" data-v-7a1af332>API Rating ↓</option><option value="personal_rating_asc" data-v-7a1af332>Personal Rating ↑</option><option value="personal_rating_desc" data-v-7a1af332>Personal Rating ↓</option><option value="airing_desc" data-v-7a1af332>Airing first</option><option value="airing_asc" data-v-7a1af332>Finished first</option>',12)])],40,q)])])])}const pe=_(B,[["render",T],["__scopeId","data-v-7a1af332"]]),j={name:"LoginModal",emits:["close","success"],setup(i,{emit:e}){const d=w(),o=h({email:"",password:""}),n=v(!1),r=v("");return{form:o,loading:n,error:r,handleLogin:async()=>{n.value=!0,r.value="";try{const t=await d.login(o.email,o.password);t.success?e("success",t):r.value=t.error}catch(t){r.value=t.message||"Login failed"}finally{n.value=!1}},closeModal:()=>{e("close")},checkLocalDB:async()=>{try{const l=await(await fetch("http://127.0.0.1:8000/api/check-db")).json();alert(`Local DB: ${l.success?"✅ Connected":"❌ Error"}
Users: ${l.user_count}
Error: ${l.error||"None"}`)}catch(t){alert(`Local DB Check Failed: ${t.message}`)}},checkProdDB:async()=>{try{const l=await(await fetch("https://teabubble.attrebi.ch/api/check-db")).json();alert(`Prod DB: ${l.success?"✅ Connected":"❌ Error"}
Users: ${l.user_count}
Error: ${l.error||"None"}`)}catch(t){alert(`Prod DB Check Failed: ${t.message}`)}},deleteAllUsers:async()=>{if(confirm("⚠️ WARNING: This will delete ALL users! Are you sure?"))try{const l=await(await fetch("https://teabubble.attrebi.ch/api/delete-all-users",{method:"POST",headers:{"Content-Type":"application/json"}})).json();alert(`Delete Result: ${l.success?"✅ Success":"❌ Error"}
Deleted: ${l.deleted_count} users
Error: ${l.error||"None"}`)}catch(t){alert(`Delete Failed: ${t.message}`)}}}}},Q={class:"form-group"},x=["disabled"],O={class:"form-group"},H=["disabled"],Z={key:0,class:"error-message"},G={class:"modal-buttons"},W=["disabled"],z=["disabled"];function J(i,e,d,o,n,r){return p(),m("div",{class:"modal",onClick:e[5]||(e[5]=(...a)=>o.closeModal&&o.closeModal(...a))},[s("div",{class:"modal-content auth-modal",onClick:e[4]||(e[4]=b(()=>{},["stop"]))},[e[8]||(e[8]=s("h2",null,"Login",-1)),s("form",{onSubmit:e[3]||(e[3]=b((...a)=>o.handleLogin&&o.handleLogin(...a),["prevent"]))},[s("div",Q,[e[6]||(e[6]=s("label",{for:"email"},"Email:",-1)),c(s("input",{type:"email",id:"email","onUpdate:modelValue":e[0]||(e[0]=a=>o.form.email=a),required:"",disabled:o.loading},null,8,x),[[u,o.form.email]])]),s("div",O,[e[7]||(e[7]=s("label",{for:"password"},"Password:",-1)),c(s("input",{type:"password",id:"password","onUpdate:modelValue":e[1]||(e[1]=a=>o.form.password=a),required:"",disabled:o.loading},null,8,H),[[u,o.form.password]])]),o.error?(p(),m("div",Z,f(o.error),1)):y("",!0),s("div",G,[s("button",{type:"submit",disabled:o.loading},f(o.loading?"Logging in...":"Login"),9,W),s("button",{type:"button",onClick:e[2]||(e[2]=(...a)=>o.closeModal&&o.closeModal(...a)),disabled:o.loading}," Cancel ",8,z)])],32)])])}const ge=_(j,[["render",J],["__scopeId","data-v-4abe3a02"]]),K={name:"RegisterModal",emits:["close","success"],setup(i,{emit:e}){const d=w(),o=h({name:"",email:"",password:"",passwordConfirm:""}),n=v(!1),r=v(""),a=S(()=>o.name&&o.email&&o.password&&o.passwordConfirm&&o.password===o.passwordConfirm&&o.password.length>=8);return{form:o,loading:n,error:r,isFormValid:a,handleRegister:async()=>{if(!a.value){r.value="Please fill in all fields and ensure passwords match";return}n.value=!0,r.value="";try{const g=await d.register(o.name,o.email,o.password,o.passwordConfirm);g.success?e("success"):r.value=g.error}catch(g){r.value=g.message||"Registration failed"}finally{n.value=!1}},closeModal:()=>{e("close")}}}},X={class:"form-group"},Y=["disabled"],ee={class:"form-group"},oe=["disabled"],se={class:"form-group"},ae=["disabled"],te={class:"form-group"},re=["disabled"],le={key:0,class:"error-message"},ne={class:"modal-buttons"},ie=["disabled"],de=["disabled"];function ce(i,e,d,o,n,r){return p(),m("div",{class:"modal",onClick:e[7]||(e[7]=(...a)=>o.closeModal&&o.closeModal(...a))},[s("div",{class:"modal-content auth-modal",onClick:e[6]||(e[6]=b(()=>{},["stop"]))},[e[12]||(e[12]=s("h2",null,"Register",-1)),s("form",{onSubmit:e[5]||(e[5]=b((...a)=>o.handleRegister&&o.handleRegister(...a),["prevent"]))},[s("div",X,[e[8]||(e[8]=s("label",{for:"name"},"Name:",-1)),c(s("input",{type:"text",id:"name","onUpdate:modelValue":e[0]||(e[0]=a=>o.form.name=a),required:"",disabled:o.loading},null,8,Y),[[u,o.form.name]])]),s("div",ee,[e[9]||(e[9]=s("label",{for:"email"},"Email:",-1)),c(s("input",{type:"email",id:"email","onUpdate:modelValue":e[1]||(e[1]=a=>o.form.email=a),required:"",disabled:o.loading},null,8,oe),[[u,o.form.email]])]),s("div",se,[e[10]||(e[10]=s("label",{for:"password"},"Password:",-1)),c(s("input",{type:"password",id:"password","onUpdate:modelValue":e[2]||(e[2]=a=>o.form.password=a),required:"",minlength:"8",disabled:o.loading},null,8,ae),[[u,o.form.password]])]),s("div",te,[e[11]||(e[11]=s("label",{for:"passwordConfirm"},"Confirm Password:",-1)),c(s("input",{type:"password",id:"passwordConfirm","onUpdate:modelValue":e[3]||(e[3]=a=>o.form.passwordConfirm=a),required:"",minlength:"8",disabled:o.loading},null,8,re),[[u,o.form.passwordConfirm]])]),o.error?(p(),m("div",le,f(o.error),1)):y("",!0),s("div",ne,[s("button",{type:"submit",disabled:o.loading||!o.isFormValid},f(o.loading?"Registering...":"Register"),9,ie),s("button",{type:"button",onClick:e[4]||(e[4]=(...a)=>o.closeModal&&o.closeModal(...a)),disabled:o.loading}," Cancel ",8,de)])],32)])])}const fe=_(K,[["render",ce],["__scopeId","data-v-d5de55ea"]]);export{ge as L,pe as M,fe as R};
