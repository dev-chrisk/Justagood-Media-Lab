import{_,b as c,e as s,F as R,x as L,q as S,o as p,t as v,a as y,i as h,r as b,m as w,f as C,w as m,s as u,c as B}from"./index-B5mJPAlK.js";const U={name:"MainHeader",props:{searchQuery:{type:String,default:""},gridColumns:{type:Number,default:8},sortBy:{type:String,default:"order_asc"}},emits:["update:searchQuery","update:gridColumns","update:sortBy","toggleMobileSidebar","clearSearch"]},D={class:"main-header"},P={class:"header-left"},V={class:"header-center"},A={class:"search-container"},N=["value"],E={class:"header-right"},$={class:"grid-count-container"},q=["value"],F=["value"],I={class:"sort-container"},T=["value"];function x(l,e,i,o,n,t){return p(),c("header",D,[s("div",P,[s("button",{class:"mobile-sidebar-toggle",onClick:e[0]||(e[0]=a=>l.$emit("toggleMobileSidebar"))},"☰")]),s("div",V,[s("div",A,[s("input",{type:"text",value:i.searchQuery,onInput:e[1]||(e[1]=a=>l.$emit("update:searchQuery",a.target.value)),placeholder:"Search..."},null,40,N),s("button",{class:"search-clear",onClick:e[2]||(e[2]=a=>l.$emit("clearSearch"))},"×")])]),s("div",E,[s("div",$,[e[5]||(e[5]=s("label",{class:"columns-label"},"Columns:",-1)),s("select",{value:i.gridColumns,onChange:e[3]||(e[3]=a=>l.$emit("update:gridColumns",parseInt(a.target.value)))},[(p(),c(R,null,L(12,a=>s("option",{key:a,value:a},v(a),9,F)),64))],40,q)]),s("div",I,[s("select",{value:i.sortBy,onChange:e[4]||(e[4]=a=>l.$emit("update:sortBy",a.target.value))},[...e[6]||(e[6]=[S('<option value="order_asc" data-v-7a1af332>Original order ↑</option><option value="order_desc" data-v-7a1af332>Original order ↓</option><option value="title_asc" data-v-7a1af332>Title A-Z</option><option value="title_desc" data-v-7a1af332>Title Z-A</option><option value="release_asc" data-v-7a1af332>Release ↑</option><option value="release_desc" data-v-7a1af332>Release ↓</option><option value="api_rating_asc" data-v-7a1af332>API Rating ↑</option><option value="api_rating_desc" data-v-7a1af332>API Rating ↓</option><option value="personal_rating_asc" data-v-7a1af332>Personal Rating ↑</option><option value="personal_rating_desc" data-v-7a1af332>Personal Rating ↓</option><option value="airing_desc" data-v-7a1af332>Airing first</option><option value="airing_asc" data-v-7a1af332>Finished first</option>',12)])],40,T)])])])}const ve=_(U,[["render",x],["__scopeId","data-v-7a1af332"]]),j={name:"LoginModal",emits:["close","success"],setup(l,{emit:e}){const i=y(),o=h({email:"",password:""}),n=b(!1),t=b("");return{form:o,loading:n,error:t,handleLogin:async()=>{n.value=!0,t.value="";try{const r=await i.login(o.email,o.password);r.success?e("success",r):t.value=r.error}catch(r){t.value=r.message||"Login failed"}finally{n.value=!1}},closeModal:()=>{e("close")},checkLocalDB:async()=>{try{const g=await(await fetch("http://127.0.0.1:8000/api/check-db")).json();alert(`Local DB: ${g.success?"✅ Connected":"❌ Error"}
Users: ${g.user_count}
Error: ${g.error||"None"}`)}catch(r){alert(`Local DB Check Failed: ${r.message}`)}},checkProdDB:async()=>{try{const r=window.location.origin,d=await(await fetch(`${r}/api/check-db`)).json();alert(`Prod DB: ${d.success?"✅ Connected":"❌ Error"}
Users: ${d.user_count}
Error: ${d.error||"None"}`)}catch(r){alert(`Prod DB Check Failed: ${r.message}`)}},deleteAllUsers:async()=>{if(confirm("⚠️ WARNING: This will delete ALL users! Are you sure?"))try{const r=window.location.origin,d=await(await fetch(`${r}/api/delete-all-users`,{method:"POST",headers:{"Content-Type":"application/json"}})).json();alert(`Delete Result: ${d.success?"✅ Success":"❌ Error"}
Deleted: ${d.deleted_count} users
Error: ${d.error||"None"}`)}catch(r){alert(`Delete Failed: ${r.message}`)}}}}},Q={class:"form-group"},O=["disabled"],H={class:"form-group"},Z=["disabled"],G={key:0,class:"error-message"},W={class:"modal-buttons"},z=["disabled"],J=["disabled"];function K(l,e,i,o,n,t){return p(),c("div",{class:"modal",onClick:e[5]||(e[5]=(...a)=>o.closeModal&&o.closeModal(...a))},[s("div",{class:"modal-content auth-modal",onClick:e[4]||(e[4]=w(()=>{},["stop"]))},[e[8]||(e[8]=s("h2",null,"Login",-1)),s("form",{onSubmit:e[3]||(e[3]=w((...a)=>o.handleLogin&&o.handleLogin(...a),["prevent"]))},[s("div",Q,[e[6]||(e[6]=s("label",{for:"email"},"Email:",-1)),m(s("input",{type:"email",id:"email","onUpdate:modelValue":e[0]||(e[0]=a=>o.form.email=a),required:"",disabled:o.loading},null,8,O),[[u,o.form.email]])]),s("div",H,[e[7]||(e[7]=s("label",{for:"password"},"Password:",-1)),m(s("input",{type:"password",id:"password","onUpdate:modelValue":e[1]||(e[1]=a=>o.form.password=a),required:"",disabled:o.loading},null,8,Z),[[u,o.form.password]])]),o.error?(p(),c("div",G,v(o.error),1)):C("",!0),s("div",W,[s("button",{type:"submit",disabled:o.loading},v(o.loading?"Logging in...":"Login"),9,z),s("button",{type:"button",onClick:e[2]||(e[2]=(...a)=>o.closeModal&&o.closeModal(...a)),disabled:o.loading}," Cancel ",8,J)])],32)])])}const be=_(j,[["render",K],["__scopeId","data-v-50b76f61"]]),X={name:"RegisterModal",emits:["close","success"],setup(l,{emit:e}){const i=y(),o=h({name:"",username:"",email:"",password:"",passwordConfirm:""}),n=b(!1),t=b(""),a=B(()=>o.name&&o.username&&o.email&&o.password&&o.passwordConfirm&&o.password===o.passwordConfirm&&o.password.length>=8);return{form:o,loading:n,error:t,isFormValid:a,handleRegister:async()=>{if(!a.value){t.value="Please fill in all fields and ensure passwords match";return}n.value=!0,t.value="";try{const f=await i.register(o.name,o.username,o.email,o.password,o.passwordConfirm);f.success?e("success"):t.value=f.error}catch(f){t.value=f.message||"Registration failed"}finally{n.value=!1}},closeModal:()=>{e("close")}}}},Y={class:"form-group"},ee=["disabled"],oe={class:"form-group"},se=["disabled"],ae={class:"form-group"},re=["disabled"],te={class:"form-group"},ne=["disabled"],le={class:"form-group"},ie=["disabled"],de={key:0,class:"error-message"},me={class:"modal-buttons"},ue=["disabled"],ce=["disabled"];function pe(l,e,i,o,n,t){return p(),c("div",{class:"modal",onClick:e[8]||(e[8]=(...a)=>o.closeModal&&o.closeModal(...a))},[s("div",{class:"modal-content auth-modal",onClick:e[7]||(e[7]=w(()=>{},["stop"]))},[e[14]||(e[14]=s("h2",null,"Register",-1)),s("form",{onSubmit:e[6]||(e[6]=w((...a)=>o.handleRegister&&o.handleRegister(...a),["prevent"]))},[s("div",Y,[e[9]||(e[9]=s("label",{for:"name"},"Name:",-1)),m(s("input",{type:"text",id:"name","onUpdate:modelValue":e[0]||(e[0]=a=>o.form.name=a),required:"",disabled:o.loading},null,8,ee),[[u,o.form.name]])]),s("div",oe,[e[10]||(e[10]=s("label",{for:"username"},"Username:",-1)),m(s("input",{type:"text",id:"username","onUpdate:modelValue":e[1]||(e[1]=a=>o.form.username=a),required:"",disabled:o.loading},null,8,se),[[u,o.form.username]])]),s("div",ae,[e[11]||(e[11]=s("label",{for:"email"},"Email:",-1)),m(s("input",{type:"email",id:"email","onUpdate:modelValue":e[2]||(e[2]=a=>o.form.email=a),required:"",disabled:o.loading},null,8,re),[[u,o.form.email]])]),s("div",te,[e[12]||(e[12]=s("label",{for:"password"},"Password:",-1)),m(s("input",{type:"password",id:"password","onUpdate:modelValue":e[3]||(e[3]=a=>o.form.password=a),required:"",minlength:"8",disabled:o.loading},null,8,ne),[[u,o.form.password]])]),s("div",le,[e[13]||(e[13]=s("label",{for:"passwordConfirm"},"Confirm Password:",-1)),m(s("input",{type:"password",id:"passwordConfirm","onUpdate:modelValue":e[4]||(e[4]=a=>o.form.passwordConfirm=a),required:"",minlength:"8",disabled:o.loading},null,8,ie),[[u,o.form.passwordConfirm]])]),o.error?(p(),c("div",de,v(o.error),1)):C("",!0),s("div",me,[s("button",{type:"submit",disabled:o.loading||!o.isFormValid},v(o.loading?"Registering...":"Register"),9,ue),s("button",{type:"button",onClick:e[5]||(e[5]=(...a)=>o.closeModal&&o.closeModal(...a)),disabled:o.loading}," Cancel ",8,ce)])],32)])])}const we=_(X,[["render",pe],["__scopeId","data-v-2c45b4ac"]]);export{be as L,ve as M,we as R};
