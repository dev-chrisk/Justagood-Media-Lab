import{_ as v,a as y,i as h,r as f,b as u,e,j as g,f as C,k as t,m as i,t as p,o as b,c as _}from"./index-DeAROFQM.js";const L={name:"LoginModal",emits:["close","success"],setup(w,{emit:s}){const m=y(),o=h({email:"",password:""}),n=f(!1),l=f("");return{form:o,loading:n,error:l,handleLogin:async()=>{n.value=!0,l.value="";try{const a=await m.login(o.email,o.password);a.success?s("success",a):l.value=a.error}catch(a){l.value=a.message||"Login failed"}finally{n.value=!1}},closeModal:()=>{s("close")},checkLocalDB:async()=>{try{const d=await(await fetch("http://127.0.0.1:8000/api/check-db")).json();alert(`Local DB: ${d.success?"✅ Connected":"❌ Error"}
Users: ${d.user_count}
Error: ${d.error||"None"}`)}catch(a){alert(`Local DB Check Failed: ${a.message}`)}},checkProdDB:async()=>{try{const d=await(await fetch("https://teabubble.attrebi.ch/api/check-db")).json();alert(`Prod DB: ${d.success?"✅ Connected":"❌ Error"}
Users: ${d.user_count}
Error: ${d.error||"None"}`)}catch(a){alert(`Prod DB Check Failed: ${a.message}`)}},deleteAllUsers:async()=>{if(confirm("⚠️ WARNING: This will delete ALL users! Are you sure?"))try{const d=await(await fetch("https://teabubble.attrebi.ch/api/delete-all-users",{method:"POST",headers:{"Content-Type":"application/json"}})).json();alert(`Delete Result: ${d.success?"✅ Success":"❌ Error"}
Deleted: ${d.deleted_count} users
Error: ${d.error||"None"}`)}catch(a){alert(`Delete Failed: ${a.message}`)}}}}},D={class:"form-group"},R=["disabled"],B={class:"form-group"},U=["disabled"],V={key:0,class:"error-message"},E={class:"modal-buttons"},P=["disabled"],N=["disabled"];function S(w,s,m,o,n,l){return b(),u("div",{class:"modal",onClick:s[5]||(s[5]=(...r)=>o.closeModal&&o.closeModal(...r))},[e("div",{class:"modal-content auth-modal",onClick:s[4]||(s[4]=g(()=>{},["stop"]))},[s[8]||(s[8]=e("h2",null,"Login",-1)),e("form",{onSubmit:s[3]||(s[3]=g((...r)=>o.handleLogin&&o.handleLogin(...r),["prevent"]))},[e("div",D,[s[6]||(s[6]=e("label",{for:"email"},"Email:",-1)),t(e("input",{type:"email",id:"email","onUpdate:modelValue":s[0]||(s[0]=r=>o.form.email=r),required:"",disabled:o.loading},null,8,R),[[i,o.form.email]])]),e("div",B,[s[7]||(s[7]=e("label",{for:"password"},"Password:",-1)),t(e("input",{type:"password",id:"password","onUpdate:modelValue":s[1]||(s[1]=r=>o.form.password=r),required:"",disabled:o.loading},null,8,U),[[i,o.form.password]])]),o.error?(b(),u("div",V,p(o.error),1)):C("",!0),e("div",E,[e("button",{type:"submit",disabled:o.loading},p(o.loading?"Logging in...":"Login"),9,P),e("button",{type:"button",onClick:s[2]||(s[2]=(...r)=>o.closeModal&&o.closeModal(...r)),disabled:o.loading}," Cancel ",8,N)])],32)])])}const Y=v(L,[["render",S],["__scopeId","data-v-4abe3a02"]]),q={name:"RegisterModal",emits:["close","success"],setup(w,{emit:s}){const m=y(),o=h({name:"",email:"",password:"",passwordConfirm:""}),n=f(!1),l=f(""),r=_(()=>o.name&&o.email&&o.password&&o.passwordConfirm&&o.password===o.passwordConfirm&&o.password.length>=8);return{form:o,loading:n,error:l,isFormValid:r,handleRegister:async()=>{if(!r.value){l.value="Please fill in all fields and ensure passwords match";return}n.value=!0,l.value="";try{const c=await m.register(o.name,o.email,o.password,o.passwordConfirm);c.success?s("success"):l.value=c.error}catch(c){l.value=c.message||"Registration failed"}finally{n.value=!1}},closeModal:()=>{s("close")}}}},x={class:"form-group"},A=["disabled"],j={class:"form-group"},F=["disabled"],T={class:"form-group"},I=["disabled"],G={class:"form-group"},O=["disabled"],W={key:0,class:"error-message"},z={class:"modal-buttons"},H=["disabled"],J=["disabled"];function K(w,s,m,o,n,l){return b(),u("div",{class:"modal",onClick:s[7]||(s[7]=(...r)=>o.closeModal&&o.closeModal(...r))},[e("div",{class:"modal-content auth-modal",onClick:s[6]||(s[6]=g(()=>{},["stop"]))},[s[12]||(s[12]=e("h2",null,"Register",-1)),e("form",{onSubmit:s[5]||(s[5]=g((...r)=>o.handleRegister&&o.handleRegister(...r),["prevent"]))},[e("div",x,[s[8]||(s[8]=e("label",{for:"name"},"Name:",-1)),t(e("input",{type:"text",id:"name","onUpdate:modelValue":s[0]||(s[0]=r=>o.form.name=r),required:"",disabled:o.loading},null,8,A),[[i,o.form.name]])]),e("div",j,[s[9]||(s[9]=e("label",{for:"email"},"Email:",-1)),t(e("input",{type:"email",id:"email","onUpdate:modelValue":s[1]||(s[1]=r=>o.form.email=r),required:"",disabled:o.loading},null,8,F),[[i,o.form.email]])]),e("div",T,[s[10]||(s[10]=e("label",{for:"password"},"Password:",-1)),t(e("input",{type:"password",id:"password","onUpdate:modelValue":s[2]||(s[2]=r=>o.form.password=r),required:"",minlength:"8",disabled:o.loading},null,8,I),[[i,o.form.password]])]),e("div",G,[s[11]||(s[11]=e("label",{for:"passwordConfirm"},"Confirm Password:",-1)),t(e("input",{type:"password",id:"passwordConfirm","onUpdate:modelValue":s[3]||(s[3]=r=>o.form.passwordConfirm=r),required:"",minlength:"8",disabled:o.loading},null,8,O),[[i,o.form.passwordConfirm]])]),o.error?(b(),u("div",W,p(o.error),1)):C("",!0),e("div",z,[e("button",{type:"submit",disabled:o.loading||!o.isFormValid},p(o.loading?"Registering...":"Register"),9,H),e("button",{type:"button",onClick:s[4]||(s[4]=(...r)=>o.closeModal&&o.closeModal(...r)),disabled:o.loading}," Cancel ",8,J)])],32)])])}const Z=v(q,[["render",K],["__scopeId","data-v-d5de55ea"]]);export{Y as L,Z as R};
