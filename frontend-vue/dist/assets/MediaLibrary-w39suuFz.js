import{d as Ke,r as w,u as ot,a as Xe,c as R,_ as W,b as m,e as o,t as f,f as p,n as K,g as re,h as Oe,o as c,i as Ye,w as ce,j as X,k as x,v as de,l as ze,m as F,F as me,p as ue,q as We,s as at,x as st,y as nt,z as J,A as ie,B as V,C as lt,D as it}from"./index-l1v_olV_.js";import{u as Ze}from"./media-MuywGg16.js";import{u as $e}from"./message-B3fbeyjt.js";import{S as rt}from"./Sidebar-DlQAg8HL.js";import{M as dt}from"./MainHeader-BbJtRnN9.js";import{R as ct,L as mt}from"./RegisterModal-9pSEahNv.js";import{s as ut}from"./simpleApi-BMx536i5.js";import{L as gt}from"./LoadingSpinner-DbOLfIgM.js";const et=Ke("confirm",()=>{const n=w(!1),t=w("Confirm Action"),s=w(""),e=w(null);function i(u){return new Promise(r=>{t.value=u.title||"Confirm Action",s.value=u.message||"",n.value=!0,e.value=r})}function g(){e.value&&(e.value(!0),e.value=null),n.value=!1}function a(){e.value&&(e.value(!1),e.value=null),n.value=!1}return{show:n,title:t,message:s,showConfirm:i,confirm:g,cancel:a}}),tt=Ke("input",()=>{const n=w(!1),t=w("Input Required"),s=w(""),e=w(""),i=w("text"),g=w(""),a=w(null);function u(D){return new Promise(B=>{t.value=D.title||"Input Required",s.value=D.message||"",e.value=D.placeholder||"",i.value=D.inputType||"text",g.value=D.defaultValue||"",n.value=!0,a.value=B})}function r(D){a.value&&(a.value(D),a.value=null),n.value=!1}function P(){a.value&&(a.value(null),a.value=null),n.value=!1}return{show:n,title:t,message:s,placeholder:e,inputType:i,defaultValue:g,showInput:u,confirm:r,cancel:P}});function ft(){const n=ot(),t=Xe(),s=Ze(),e=$e(),i=et(),g=tt(),a=w(!1),u=w(!1),r=w(!1),P=w(!1),D=w(!1),B=w(!1),z=w(!1),C=w(!1),I=w(!1),y=w(null),U=()=>typeof window<"u"?window.innerWidth>768?8:3:8,L=w(U()),E=w("order_asc"),O=w(null),M=()=>{L.value=U()};typeof window<"u"&&window.addEventListener("resize",M);const Y=[{key:"game",name:"Games",icon:"🎮"},{key:"series",name:"Series",icon:"📺"},{key:"movie",name:"Movies",icon:"🎬"},{key:"buecher",name:"Bücher",icon:"📚"},{key:"watchlist",name:"Watchlist",icon:"❤️"}],q=R(()=>{try{return t.isLoggedIn}catch(d){return console.error("Error accessing authStore.isLoggedIn:",d),!1}}),ge=R(()=>{try{return t.userName}catch(d){return console.error("Error accessing authStore.userName:",d),""}}),Z=R(()=>{try{return t.isAdmin}catch(d){return console.error("Error accessing authStore.isAdmin:",d),!1}}),j=R(()=>{try{return s.currentCategory}catch(d){return console.error("Error accessing mediaStore.currentCategory:",d),"game"}}),fe=R({get:()=>{try{return s.searchQuery}catch(d){return console.error("Error accessing mediaStore.searchQuery:",d),""}},set:d=>{try{s.setSearchQuery(d)}catch(v){console.error("Error setting mediaStore.searchQuery:",v)}}}),te=R(()=>{try{return s.categoryCounts}catch(d){return console.error("Error accessing mediaStore.categoryCounts:",d),{}}}),l=R(()=>{try{return s.loading}catch(d){return console.error("Error accessing mediaStore.loading:",d),!1}}),b=R(()=>{try{return s.error}catch(d){return console.error("Error accessing mediaStore.error:",d),null}}),N=R(()=>{try{const d=[...s.filteredMedia||[]],[v,A]=E.value.split("_");return d.sort((S,k)=>{let G=S[v],h=k[v];return v==="order"?(G=S.__order||0,h=k.__order||0):v==="airing"&&(G=S.isAiring?1:0,h=k.isAiring?1:0),typeof G=="string"&&(G=G.toLowerCase(),h=h.toLowerCase()),A==="asc"?G>h?1:-1:G<h?1:-1})}catch(d){return console.error("Error in sortedMedia computed:",d),[]}}),T=R(()=>N.value),_=R(()=>{try{if(!s||!s.mediaData)return[];const d=new Set;return s.mediaData.forEach(v=>{v.platforms&&v.platforms.split(",").forEach(A=>d.add(A.trim()))}),Array.from(d).sort()}catch(d){return console.error("Error in platforms computed:",d),[]}}),H=R(()=>{try{if(!s||!s.mediaData)return[];const d=new Set;return s.mediaData.forEach(v=>{v.genre&&v.genre.split(",").forEach(A=>d.add(A.trim()))}),Array.from(d).sort()}catch(d){return console.error("Error in genres computed:",d),[]}}),Q=()=>{a.value=!a.value},ve=()=>{u.value=!u.value},Se=()=>{u.value=!1},ke=d=>{if(d==="buecher"){Ie();return}s.setCategory(d),u.value=!1},Ce=()=>{s.setSearchQuery("")},Te=(d,v)=>{v?s.addFilter({type:"platform",value:d}):s.removeFilter({type:"platform",value:d})},Ae=(d,v)=>{v?s.addFilter({type:"genre",value:d}):s.removeFilter({type:"genre",value:d})},xe=(d,v)=>{v?s.addFilter({type:"airing",value:d}):s.removeFilter({type:"airing",value:d})},Me=d=>{y.value=d,D.value=!0},ye=()=>{D.value=!1,y.value=null},pe=()=>{z.value=!1},_e=async d=>{try{const v=await s.batchAddMediaItems(d);if(v.success){const{created:A,failed:S}=v.stats;let k=`Successfully added ${A} items`;S>0&&(k+=` (${S} failed)`),e.showSuccess(k,"Bulk Add Successful")}pe()}catch(v){console.error("Bulk add failed:",v),e.showError("Failed to add items: "+(v.message||"Unknown error"),"Bulk Add Failed")}},De=async d=>{y.value?await s.updateMediaItem(y.value.id,d):await s.addMediaItem(d),ye()},$=async d=>{var v;try{await s.deleteMediaItem(d.id)}catch(A){((v=A.response)==null?void 0:v.status)!==404&&(console.error("Delete failed:",A),e.showError("Failed to delete item: "+(A.message||"Unknown error"),"Delete Failed"))}},Ue=async()=>{await t.logout(),await ee()},ee=async()=>{try{await s.loadMedia()}catch(d){console.error("Error loading media:",d)}},Re=()=>{B.value=!B.value},Fe=()=>{if(B.value=!1,!q.value){e.showWarning("Bitte loggen Sie sich ein, um neue Items hinzuzufügen.","Login erforderlich");return}y.value=null,D.value=!0},Pe=()=>{if(B.value=!1,!q.value){e.showWarning("Bitte loggen Sie sich ein, um diese Funktion zu nutzen.","Login erforderlich");return}z.value=!0},Be=()=>{if(B.value=!1,!q.value){e.showWarning("Bitte loggen Sie sich ein, um diese Funktion zu nutzen.","Login erforderlich");return}C.value=!0},Ee=()=>{if(B.value=!1,!q.value){e.showWarning("Bitte loggen Sie sich ein, um diese Funktion zu nutzen.","Login erforderlich");return}e.showInfo("API Import feature coming soon!","Feature in Entwicklung")},Le=()=>{if(B.value=!1,!q.value){e.showWarning("Bitte loggen Sie sich ein, um diese Funktion zu nutzen.","Login erforderlich");return}he()},oe=d=>{if(!d)return"Unknown";const v=Y.find(A=>A.key===d);return v?v.name:d},Ne=async()=>{const d=oe(j.value),v=te.value[j.value]||0;if(v===0){e.showInfo("No items to delete in this category.","Nothing to Delete");return}const A=`Are you sure you want to delete ALL ${v} items in "${d}"?

This action cannot be undone!`;if(await i.showConfirm({title:"Delete All Items",message:A}))try{const G=((s==null?void 0:s.mediaData)||[]).filter(h=>j.value==="watchlist"?h.category==="watchlist"||h.isNew===!0:h.category===j.value).map(h=>h.id);await s.batchDeleteMediaItems(G),await ee(),e.showSuccess(`Successfully deleted ${v} items from "${d}"`,"Items Deleted")}catch(k){console.error("Error deleting items:",k),e.showError("Error occurred while deleting items. Please try again.","Delete Failed")}},Ge=d=>{const v=d.split(`
`).map(h=>h.trim()).filter(h=>h.length>0);if(v.length===0){e.showWarning("Die TXT-Datei ist leer oder enthält keine gültigen Einträge.","Leere Datei");return}const S=s.filteredMedia.map(h=>h.title.toLowerCase().trim()),k=v.filter(h=>{const ne=h.toLowerCase().trim();return!S.some(le=>le.includes(ne)||ne.includes(le))}),G=v.filter(h=>{const ne=h.toLowerCase().trim();return S.some(le=>le.includes(ne)||ne.includes(le))});O.value={totalInFile:v.length,missingItems:k,existingItems:G,currentCategory:j.value,categoryName:oe(j.value)},C.value=!1,I.value=!0},ae=()=>{O.value=null,I.value=!1},he=async()=>{const d=(s==null?void 0:s.mediaData)||[];if(d.length===0){e.showInfo("Keine Media Items zum Exportieren gefunden.","Nichts zu exportieren");return}const v=await g.showInput({title:"Export Format wählen",message:`1 = CSV
2 = JSON
3 = Beide

Geben Sie die Nummer ein:`,placeholder:"1",defaultValue:"1"});if(!v||!["1","2","3"].includes(v))return;const A=new Date().toISOString().split("T")[0];(v==="1"||v==="3")&&we(d,A),(v==="2"||v==="3")&&be(d,A),e.showSuccess(`Collection mit ${d.length} Items wurde erfolgreich exportiert!`,"Export erfolgreich")},we=(d,v)=>{const S=[["Titel","Kategorie","Release","Rating","Platforms","Genre","Spielzeit","Status","Beschreibung"].join(","),...d.map(k=>[`"${(k.title||"").replace(/"/g,'""')}"`,`"${(k.category||k.category_name||"Unbekannt").replace(/"/g,'""')}"`,`"${k.release||""}"`,`"${k.rating||""}"`,`"${(k.platforms||"").replace(/"/g,'""')}"`,`"${(k.genre||"").replace(/"/g,'""')}"`,`"${k.spielzeit||""}"`,`"${k.isAiring?"Airing":"Abgeschlossen"}"`,`"${(k.description||"").replace(/"/g,'""')}"`].join(","))].join(`
`);se(S,`media_collection_${v}.csv`,"text/csv;charset=utf-8;")},be=(d,v)=>{const A={exportDate:new Date().toISOString(),totalItems:d.length,categories:[...new Set(d.map(S=>S.category||S.category_name||"Unbekannt"))],items:d.map(S=>({id:S.id,title:S.title||"",category:S.category||S.category_name||"Unbekannt",release:S.release||"",rating:S.rating||null,platforms:S.platforms||"",genre:S.genre||"",spielzeit:S.spielzeit||null,status:S.isAiring?"Airing":"Abgeschlossen",description:S.description||"",isNew:S.isNew||!1,nextSeason:S.nextSeason||null,discovered:S.discovered||null}))};se(JSON.stringify(A,null,2),`media_collection_${v}.json`,"application/json;charset=utf-8;")},se=(d,v,A)=>{const S=new Blob([d],{type:A}),k=document.createElement("a"),G=URL.createObjectURL(S);k.setAttribute("href",G),k.setAttribute("download",v),k.style.visibility="hidden",document.body.appendChild(k),k.click(),document.body.removeChild(k),URL.revokeObjectURL(G)},Ie=()=>{console.log("📚 Navigating to books..."),n.push("/books")};return{sidebarCollapsed:a,mobileSidebarOpen:u,showLoginModal:r,showRegisterModal:P,showEditModal:D,showFloatingMenu:B,showBulkAddModal:z,showTxtImportModal:C,showTxtImportResults:I,editingItem:y,gridColumns:L,sortBy:E,categories:Y,txtImportResults:O,isLoggedIn:q,isAdmin:Z,userName:ge,currentCategory:j,searchQuery:fe,categoryCounts:te,loading:l,error:b,paginatedMedia:T,platforms:_,genres:H,toggleSidebar:Q,toggleMobileSidebar:ve,closeMobileSidebar:Se,setCategory:ke,clearSearch:Ce,togglePlatformFilter:Te,toggleGenreFilter:Ae,toggleAiringFilter:xe,editItem:Me,closeEditModal:ye,closeBulkAddModal:pe,handleBulkAddItems:_e,handleSaveItem:De,handleDeleteItem:$,logout:Ue,loadMedia:ee,toggleFloatingMenu:Re,addNewItem:Fe,bulkAddItems:Pe,importFromTxt:Be,importFromAPI:Ee,createCollection:Le,exportMediaCollection:he,exportAsCSV:we,exportAsJSON:be,downloadFile:se,deleteAllInCategory:Ne,getCategoryDisplayName:oe,navigateToBooks:Ie,navigateToStatistics:()=>{n.push("/statistics")},navigateToCalendar:()=>{n.push("/calendar")},navigateToFeatures:()=>{n.push("/features")},navigateToProfile:()=>{n.push("/profile")},navigateToAdmin:()=>{console.log("🔥 navigateToAdmin function called!"),console.log("🔥 Router object:",n),console.log("🔥 Pushing to /admin...");try{n.push("/admin"),console.log("🔥 Successfully navigated to /admin!")}catch(d){console.error("🔥 Error navigating to admin:",d)}},processTxtContent:Ge,closeTxtImportResults:ae,cleanup:()=>{typeof window<"u"&&window.removeEventListener("resize",M)},router:n}}const vt={name:"MediaItem",props:{item:{type:Object,required:!0}},emits:["edit"],computed:{showWatchlistTag(){return this.item.category==="watchlist"||this.item.isNew===!0},isWatchlistItem(){return this.item.category==="watchlist"||this.item.isNew===!0}},methods:{getImageUrl(n){return n?n.startsWith("http")?n.startsWith("http://")?n.replace("http://","https://"):n:n.startsWith("/")?n:`/storage/${n}`:""},handleImageError(n){var t;n.target.style.display="none",(t=n.target.nextElementSibling)==null||t.classList.add("show")},formatDate(n){return n?new Date(n).toLocaleDateString():""},editItem(){this.$emit("edit",this.item)},getWatchlistReleaseStatus(){if(!this.item.release)return"";const n=new Date(this.item.release),t=new Date;t.setHours(0,0,0,0),n.setHours(0,0,0,0);const s=n.getTime()-t.getTime(),e=Math.ceil(s/(1e3*3600*24));if(e>0)return e===1?"Tomorrow!":e<=7?`${e} days left`:e<=30?`${e} days left`:`${Math.ceil(e/30)} months left`;if(e===0)return"Released today!";{const i=this.getTypeTagText().toLowerCase();return i==="game"?"Unplayed yet":i==="series"||i==="movie"?"Unwatched yet":i==="buecher"?"Unread yet":"Unconsumed yet"}},getWatchlistReleaseStatusClass(){if(!this.item.release)return"";const n=new Date(this.item.release),t=new Date;t.setHours(0,0,0,0),n.setHours(0,0,0,0);const s=n.getTime()-t.getTime(),e=Math.ceil(s/(1e3*3600*24));return e>0?"countdown":e===0?"released-today":"unconsumed"},getTypeTagText(){var t,s,e;const n=this.item.watchlistType||this.item.watchlist_type;if(n)return n.charAt(0).toUpperCase()+n.slice(1);if(this.item.genre){const i=this.item.genre.toLowerCase();if(i.includes("game")||i.includes("gaming")||(t=this.item.platforms)!=null&&t.toLowerCase().includes("steam")||(s=this.item.platforms)!=null&&s.toLowerCase().includes("ps")||(e=this.item.platforms)!=null&&e.toLowerCase().includes("xbox"))return"Game";if(i.includes("series")||i.includes("tv")||i.includes("episode")||this.item.isAiring)return"Series";if(i.includes("movie")||i.includes("film")||i.includes("cinema"))return"Movie";if(i.includes("book")||i.includes("literature")||i.includes("novel")||i.includes("author"))return"Bücher"}if(this.item.platforms){const i=this.item.platforms.toLowerCase();if(i.includes("steam")||i.includes("ps")||i.includes("xbox")||i.includes("nintendo")||i.includes("pc"))return"Game";if(i.includes("netflix")||i.includes("hulu")||i.includes("disney")||i.includes("hbo"))return"Series";if(i.includes("cinema")||i.includes("theater"))return"Movie";if(i.includes("book")||i.includes("kindle")||i.includes("audible")||i.includes("author"))return"Bücher"}return"Media"},getTypeTagClass(){return`type-${this.getTypeTagText().toLowerCase()}`},getNextSeasonCountdown(){if(!this.item.nextSeasonRelease)return"";const n=new Date(this.item.nextSeasonRelease),t=new Date;t.setHours(0,0,0,0),n.setHours(0,0,0,0);const s=n.getTime()-t.getTime(),e=Math.ceil(s/(1e3*3600*24));return e>0?e===1?"Tomorrow!":e<=7?`${e} days`:e<=30?`${e} days`:`${Math.ceil(e/30)} months`:e===0?"Today!":"Released"},getCategoryClass(){var t;const n=(t=this.item.category)==null?void 0:t.toLowerCase();return n==="movies"||n==="movie"?"category-movies":n==="books"||n==="buecher"?"category-books":n==="series"||n==="tv"?"category-series":n==="games"||n==="game"?"category-games":"category-default"},getCategoryIcon(){var t;const n=(t=this.item.category)==null?void 0:t.toLowerCase();return n==="movies"||n==="movie"?"🎬":n==="books"||n==="buecher"?"📚":n==="series"||n==="tv"?"📺":n==="games"||n==="game"?"🎮":"📁"},getCategoryStyle(){var t;const n=(t=this.item.category)==null?void 0:t.toLowerCase();if(n==="games"||n==="game"){const s=this.item.rating||0;return this.getGameStyleByRating(s)}return{}},getGameStyleByRating(n){return n>=4.5?{"--game-primary":"#ffd700","--game-secondary":"#ffed4e","--game-accent":"#ff6b35","--game-glow":"0 0 20px rgba(255, 215, 0, 0.6)","--game-border":"3px solid #ffd700"}:n>=4?{"--game-primary":"#00d4ff","--game-secondary":"#4a9eff","--game-accent":"#00ff88","--game-glow":"0 0 15px rgba(0, 212, 255, 0.5)","--game-border":"3px solid #00d4ff"}:n>=3.5?{"--game-primary":"#00ff88","--game-secondary":"#4caf50","--game-accent":"#8bc34a","--game-glow":"0 0 12px rgba(0, 255, 136, 0.4)","--game-border":"3px solid #00ff88"}:n>=3?{"--game-primary":"#ff9800","--game-secondary":"#ffc107","--game-accent":"#ff5722","--game-glow":"0 0 10px rgba(255, 152, 0, 0.3)","--game-border":"3px solid #ff9800"}:n>=2?{"--game-primary":"#ff5722","--game-secondary":"#f44336","--game-accent":"#d32f2f","--game-glow":"0 0 8px rgba(255, 87, 34, 0.3)","--game-border":"3px solid #ff5722"}:{"--game-primary":"#9e9e9e","--game-secondary":"#757575","--game-accent":"#616161","--game-glow":"0 0 5px rgba(158, 158, 158, 0.2)","--game-border":"3px solid #9e9e9e"}}}},yt={class:"media-image"},pt=["src","alt"],ht={key:1,class:"no-image"},wt={class:"no-image-icon"},bt={class:"media-info"},It={class:"media-title"},St={class:"media-meta"},kt={key:0,class:"media-release"},Ct={key:1},Tt={key:1,class:"media-rating"},At={key:0,class:"media-platforms"},xt={key:1,class:"media-genre"},Mt={key:2,class:"media-airing"},_t={key:0,class:"next-season"},Dt={key:1,class:"countdown"},Ut={key:3,class:"watchlist-type-tag"};function Rt(n,t,s,e,i,g){return c(),m("div",{class:K(["media-item",g.getCategoryClass()]),style:Oe(g.getCategoryStyle()),onClick:t[1]||(t[1]=(...a)=>g.editItem&&g.editItem(...a))},[o("div",yt,[s.item.path?(c(),m("img",{key:0,src:g.getImageUrl(s.item.path),alt:s.item.title,onError:t[0]||(t[0]=(...a)=>g.handleImageError&&g.handleImageError(...a))},null,40,pt)):(c(),m("div",ht,[o("span",wt,f(g.getCategoryIcon()),1)]))]),o("div",bt,[o("h3",It,f(s.item.title),1),o("div",St,[s.item.release?(c(),m("span",kt,[g.isWatchlistItem&&s.item.release?(c(),m("span",{key:0,class:K(g.getWatchlistReleaseStatusClass())},f(g.getWatchlistReleaseStatus()),3)):(c(),m("span",Ct,f(g.formatDate(s.item.release)),1))])):p("",!0),s.item.rating?(c(),m("span",Tt,f("★".repeat(Math.max(0,Math.min(5,Math.floor(s.item.rating)))))+f("☆".repeat(Math.max(0,5-Math.max(0,Math.min(5,Math.floor(s.item.rating)))))),1)):p("",!0)]),s.item.platforms?(c(),m("div",At,f(s.item.platforms),1)):p("",!0),s.item.genre?(c(),m("div",xt,f(s.item.genre),1)):p("",!0),s.item.isAiring?(c(),m("div",Mt,[t[2]||(t[2]=o("span",{class:"airing-badge"},[o("span",{class:"airing-dot"}),re(" Airing ")],-1)),s.item.nextSeason?(c(),m("span",_t,"S"+f(s.item.nextSeason),1)):p("",!0),s.item.nextSeasonRelease?(c(),m("span",Dt,f(g.getNextSeasonCountdown()),1)):p("",!0)])):p("",!0),g.showWatchlistTag?(c(),m("div",Ut,[o("span",{class:K(["type-tag",g.getTypeTagClass()])},f(g.getTypeTagText()),3)])):p("",!0)]),t[3]||(t[3]=o("div",{class:"edit-indicator"},[o("span",{class:"edit-icon"},"✏️")],-1))],6)}const Ft=W(vt,[["render",Rt],["__scopeId","data-v-8da80e20"]]),Pt={name:"FloatingActionButton",props:{showMenu:{type:Boolean,default:!1},showDeleteAll:{type:Boolean,default:!1},categoryName:{type:String,default:""},itemCount:{type:Number,default:0}},emits:["toggleMenu","addNewItem","bulkAddItems","importFromTxt","importFromAPI","createCollection","deleteAllInCategory"]},Bt={class:"floating-actions"},Et={class:"menu-text"},Lt={class:"item-count-badge"};function Nt(n,t,s,e,i,g){return c(),m("div",Bt,[o("div",{class:K(["floating-menu",{show:s.showMenu}])},[o("button",{class:"floating-menu-item",onClick:t[0]||(t[0]=a=>n.$emit("addNewItem"))},[...t[7]||(t[7]=[o("span",{class:"menu-icon"},"➕",-1),o("span",{class:"menu-text"},"Add Item",-1)])]),o("button",{class:"floating-menu-item",onClick:t[1]||(t[1]=a=>n.$emit("bulkAddItems"))},[...t[8]||(t[8]=[o("span",{class:"menu-icon"},"📦",-1),o("span",{class:"menu-text"},"Bulk Add",-1)])]),o("button",{class:"floating-menu-item",onClick:t[2]||(t[2]=a=>n.$emit("importFromTxt"))},[...t[9]||(t[9]=[o("span",{class:"menu-icon"},"📄",-1),o("span",{class:"menu-text"},"Import from TXT",-1)])]),o("button",{class:"floating-menu-item",onClick:t[3]||(t[3]=a=>n.$emit("importFromAPI"))},[...t[10]||(t[10]=[o("span",{class:"menu-icon"},"🌐",-1),o("span",{class:"menu-text"},"Import from API",-1)])]),o("button",{class:"floating-menu-item",onClick:t[4]||(t[4]=a=>n.$emit("createCollection"))},[...t[11]||(t[11]=[o("span",{class:"menu-icon"},"📚",-1),o("span",{class:"menu-text"},"Create Collection",-1)])]),s.showDeleteAll&&s.itemCount>0?(c(),m("button",{key:0,class:"floating-menu-item delete-all-item",onClick:t[5]||(t[5]=a=>n.$emit("deleteAllInCategory"))},[t[12]||(t[12]=o("span",{class:"menu-icon"},"🗑️",-1)),o("span",Et,"Delete All "+f(s.categoryName),1),o("span",Lt,"("+f(s.itemCount)+")",1)])):p("",!0)],2),o("button",{class:"floating-add-btn",onClick:t[6]||(t[6]=a=>n.$emit("toggleMenu"))},f(s.showMenu?"✕":"+"),1)])}const Gt=W(Pt,[["render",Nt],["__scopeId","data-v-19731834"]]),Vt={name:"EditModal",props:{item:{type:Object,default:null},currentCategory:{type:String,default:"watchlist"}},emits:["close","save","delete"],setup(n,{emit:t}){const s=w(!1),e=w(""),i=w([]),g=w(null),a=w(null),u=w(""),r=Ye({category:"watchlist",title:"",release:"",rating:"",count:"",platforms:"",genre:"",link:"",path:"",discovered:"",spielzeit:"",isAiring:!1,nextSeason:"",nextSeasonRelease:"",imageUrl:"",watchlistType:""}),P=R(()=>!!n.item),D=R(()=>r.category==="game"),B=R(()=>r.category==="series"),z=R(()=>r.category==="watchlist");ce(()=>n.item,l=>{l?Object.keys(r).forEach(b=>{r[b]=l[b]||""}):Object.keys(r).forEach(b=>{b==="category"?r[b]=n.currentCategory||"watchlist":b==="release"?r[b]=new Date().toISOString().split("T")[0]:r[b]=""})},{immediate:!0}),ce(()=>n.currentCategory,l=>{!n.item&&l&&(r.category=l)});const C=async()=>{if(!r.title){e.value="Title is required";return}if(r.category==="watchlist"&&!r.watchlistType){e.value="Please select a type for watchlist items";return}if(r.category==="watchlist"&&!r.release){e.value="Release date is required for watchlist items";return}s.value=!0,e.value="";try{const l={...r};u.value?(l.path=u.value,l.imageUrl=u.value):l.imageUrl&&l.imageUrl.trim()?l.path=l.imageUrl:(l.imageUrl=null,l.path=null),Object.keys(l).forEach(b=>{l[b]===""&&b!=="watchlistType"&&(l[b]=null)}),l.rating&&(l.rating=parseFloat(l.rating)),l.count&&(l.count=parseInt(l.count)),l.spielzeit&&(l.spielzeit=parseInt(l.spielzeit)),l.nextSeason&&(l.nextSeason=parseInt(l.nextSeason)),t("save",l)}catch(l){e.value=l.message||"Failed to save item"}finally{s.value=!1}},I=()=>{e.value="",t("close")},y=()=>{t("delete",n.item),I()},U=async()=>{if(u.value){i.value=[];return}if(g.value&&clearTimeout(g.value),!r.title||r.title.length<3){i.value=[];return}g.value=setTimeout(async()=>{try{console.log("🔍 EditModal API Search:",{title:r.title,category:r.category,watchlistType:r.watchlistType});const l=r.category==="watchlist"?r.watchlistType:r.category;if(r.category==="watchlist"&&!r.watchlistType){i.value=[];return}let b=[],N=[];if(l==="buecher"){console.log("📚 Searching Google Books API for:",r.title);const T=await ut.searchBooks(r.title,10);T.success&&T.data?(console.log("📚 Google Books API Success:",T.data.length,"results"),N=T.data.map(_=>({title:_.title,release:_.publishedDate?O(_.publishedDate):"",genre:_.categories?_.categories.join(", "):"",platforms:"",link:_.infoLink||_.previewLink||"",imageUrl:_.imageUrl||"",rating:"",apiSource:"google_books",id:_.id,author:_.author,description:_.description,publisher:_.publisher,isbn10:_.isbn10,isbn13:_.isbn13})),console.log("📚 Formatted Google Books results:",N)):console.warn("📚 Google Books API failed:",T.error)}else console.log("🎬 Searching Media API for:",r.title,"category:",l),b=await We.searchApi(r.title,l,10),b&&b.length>0&&(N=b.map(T=>({title:T.title,release:T.release,genre:T.overview||"",platforms:T.platforms||"",link:T.link||"",imageUrl:T.image||"",rating:T.rating||"",apiSource:T.api_source||"",id:T.id||""})));N.length>0?(console.log("✅ API Search Results:",N.length,"items found"),i.value=N):(console.log("❌ No API results found"),i.value=[{title:`"${r.title}" - Keine Ergebnisse gefunden`,release:"",genre:"Bitte manuell ausfüllen",isPlaceholder:!0}])}catch(l){console.error("❌ API search failed:",l),i.value=[{title:`"${r.title}" - API nicht verfügbar`,release:"",genre:"Bitte manuell ausfüllen",isPlaceholder:!0}]}},500)},L=async l=>{if(l.isPlaceholder){i.value=[];return}if(console.log("📚 Selecting API result:",{title:l.title,apiSource:l.apiSource,author:l.author}),r.title=l.title,l.release&&(r.release=l.release),l.platforms&&(r.platforms=l.platforms),l.genre&&(r.genre=l.genre),l.link&&(r.link=l.link),l.rating&&(r.rating=l.rating),l.apiSource==="google_books"){if(console.log("📚 Filling Google Books data:",{author:l.author,description:l.description,publisher:l.publisher,isbn10:l.isbn10,isbn13:l.isbn13}),l.author&&(r.platforms=l.author),l.description){const b=r.genre||"";r.genre=b?`${b} | ${l.description.substring(0,100)}...`:l.description.substring(0,200)}if(l.publisher){const b=r.link||"";r.link=b||`Publisher: ${l.publisher}`}}l.imageUrl?(r.imageUrl=l.imageUrl,r.path=l.imageUrl):(r.imageUrl="",r.path=""),i.value=[]},E=l=>l?new Date(l).toLocaleDateString():"",O=l=>{if(!l)return"";let b;if(typeof l=="string"){if(/^\d{4}$/.test(l))return`${l}-01-01`;if(/^\d{4}-\d{2}$/.test(l))return`${l}-01`;if(/^\d{4}-\d{2}-\d{2}$/.test(l))return l;b=new Date(l)}else b=new Date(l);return isNaN(b.getTime())?(console.warn("📚 Invalid date format:",l),""):b.toISOString().split("T")[0]};return{form:r,loading:s,error:e,apiResults:i,isEditing:P,isGame:D,isSeries:B,isWatchlist:z,imageUploadRef:a,uploadedImagePath:u,handleSave:C,closeModal:I,deleteItem:y,searchApi:U,selectApiResult:L,formatDate:E,formatDateForInput:O,ensureHttpsUrl:l=>l&&(l.startsWith("http://")?l.replace("http://","https://"):l),getReleasePreview:()=>{var _;if(!r.release)return"";const l=new Date(r.release),b=new Date;b.setHours(0,0,0,0),l.setHours(0,0,0,0);const N=l.getTime()-b.getTime(),T=Math.ceil(N/(1e3*3600*24));if(T>0)return T===1?"Tomorrow!":T<=7?`${T} days left`:T<=30?`${T} days left`:`${Math.ceil(T/30)} months left`;if(T===0)return"Released today!";{const H=((_=r.watchlistType)==null?void 0:_.toLowerCase())||"media";return H==="game"?"Unplayed yet":H==="series"||H==="movie"?"Unwatched yet":"Unconsumed yet"}},triggerImageUpload:()=>{var l;(l=a.value)==null||l.click()},handleImageUpload:async l=>{const b=l.target.files[0];if(b){if(!b.type.startsWith("image/")){e.value="Please select a valid image file";return}if(b.size>10*1024*1024){e.value="Image file too large. Maximum size is 10MB";return}s.value=!0,e.value="";try{const N=r.title.replace(/[^a-zA-Z0-9\s\-_\.]/g,"").trim()||"item",T=Date.now(),_=b.name.split(".").pop()||"jpg",H=`images_downloads/uploads/${N}_${T}.${_}`,Q=await We.uploadImage(b,H);Q.success?(u.value=Q.saved,r.path=Q.saved,r.imageUrl=Q.saved):e.value=Q.error||"Failed to upload image"}catch(N){e.value=N.message||"Failed to upload image"}finally{s.value=!1}}},getImagePreviewUrl:()=>u.value?`/storage/${u.value}`:r.imageUrl?r.imageUrl.startsWith("http")?r.imageUrl:`/storage/${r.imageUrl}`:"",handleImageError:l=>{console.warn("Image preview failed:",l.target.src),l.target.style.display="none"},clearImage:()=>{r.imageUrl="",r.path="",u.value="",a.value&&(a.value.value="")},removeUploadedImage:()=>{u.value="",r.imageUrl===u.value&&(r.imageUrl=""),r.path===u.value&&(r.path=""),a.value&&(a.value.value="")}}}},zt={class:"form-header"},Wt={class:"form-group category-group"},Ot={class:"form-group title-group"},jt={class:"search-container"},qt=["placeholder","disabled"],Ht={key:0,class:"search-results"},Qt=["onClick"],Jt={class:"result-thumbnail"},Kt=["src","alt"],Xt={key:1,class:"no-image"},Yt={class:"result-content"},Zt={class:"result-title"},$t={class:"result-meta"},eo={key:0},to={key:1},oo={key:2,class:"rating"},ao={class:"form-row"},so={class:"form-group"},no={for:"release"},lo={key:0,class:"required"},io=["required"],ro={key:0,class:"field-hint"},co={key:1,class:"release-preview"},mo={class:"form-group"},uo={class:"form-row"},go={class:"form-group"},fo={class:"form-group"},vo={class:"form-row"},yo={class:"form-group"},po={class:"form-group"},ho={key:0,class:"form-row"},wo={class:"form-group"},bo={key:0,class:"field-error"},Io={class:"form-row"},So={class:"form-group"},ko={class:"form-group"},Co={key:1,class:"form-row"},To={class:"form-group"},Ao={key:2,class:"form-row"},xo={class:"form-group"},Mo={key:0,class:"form-group"},_o={key:3,class:"form-row"},Do={class:"form-group"},Uo={class:"form-row"},Ro={class:"form-group"},Fo={class:"form-group"},Po={class:"image-upload-container"},Bo=["disabled"],Eo={key:0,class:"upload-success"},Lo={key:4,class:"form-row"},No={class:"form-group image-preview-group"},Go={class:"image-preview"},Vo=["src","alt"],zo={key:5,class:"error-message"},Wo={class:"modal-buttons"},Oo=["disabled"],jo=["disabled"],qo=["disabled"],Ho=["disabled"];function Qo(n,t,s,e,i,g){return c(),m("div",{class:"modal",onClick:t[27]||(t[27]=(...a)=>e.closeModal&&e.closeModal(...a))},[o("div",{class:"modal-content",onClick:t[26]||(t[26]=X(()=>{},["stop"]))},[o("h2",null,f(e.isEditing?"Edit Item":"Add Item"),1),o("form",{onSubmit:t[25]||(t[25]=X((...a)=>e.handleSave&&e.handleSave(...a),["prevent"]))},[o("div",zt,[o("div",Wt,[t[29]||(t[29]=o("label",{for:"category"},"Category:",-1)),x(o("select",{id:"category","onUpdate:modelValue":t[0]||(t[0]=a=>e.form.category=a),required:""},[...t[28]||(t[28]=[ze('<option value="watchlist" data-v-05f814f0>Watchlist</option><option value="game" data-v-05f814f0>Game</option><option value="series" data-v-05f814f0>Series</option><option value="movie" data-v-05f814f0>Movie</option><option value="buecher" data-v-05f814f0>Bücher</option>',5)])],512),[[de,e.form.category]])]),o("div",Ot,[t[30]||(t[30]=o("label",{for:"title"},"Title:",-1)),o("div",jt,[x(o("input",{type:"text",id:"title","onUpdate:modelValue":t[1]||(t[1]=a=>e.form.title=a),onInput:t[2]||(t[2]=(...a)=>e.searchApi&&e.searchApi(...a)),required:"",placeholder:e.isWatchlist?"Enter title (API search + manual input available)":"Enter title",disabled:e.loading},null,40,qt),[[F,e.form.title]]),e.apiResults.length>0?(c(),m("div",Ht,[(c(!0),m(me,null,ue(e.apiResults,a=>(c(),m("div",{key:a.title,class:"search-result-item",onClick:u=>e.selectApiResult(a)},[o("div",Jt,[a.imageUrl?(c(),m("img",{key:0,src:e.ensureHttpsUrl(a.imageUrl),alt:a.title},null,8,Kt)):(c(),m("div",Xt,[o("span",null,f(a.title.charAt(0).toUpperCase()),1)]))]),o("div",Yt,[o("div",Zt,f(a.title),1),o("div",$t,[a.release?(c(),m("span",eo,f(e.formatDate(a.release)),1)):p("",!0),a.genre?(c(),m("span",to,f(a.genre),1)):p("",!0),a.rating?(c(),m("span",oo,"⭐ "+f(a.rating),1)):p("",!0)])])],8,Qt))),128))])):p("",!0)])])]),o("div",ao,[o("div",so,[o("label",no,[re(f(e.isWatchlist?"Release Date:":"Release:")+" ",1),e.isWatchlist?(c(),m("span",lo,"*")):p("",!0)]),x(o("input",{type:"date",id:"release","onUpdate:modelValue":t[3]||(t[3]=a=>e.form.release=a),required:e.isWatchlist},null,8,io),[[F,e.form.release]]),e.isWatchlist?(c(),m("div",ro," 📅 Set the release date to track countdown or status ")):p("",!0),e.isWatchlist&&e.form.release?(c(),m("div",co,[t[31]||(t[31]=o("strong",null,"Preview:",-1)),re(" "+f(e.getReleasePreview()),1)])):p("",!0)]),o("div",mo,[t[32]||(t[32]=o("label",{for:"rating"},"Rating:",-1)),x(o("input",{type:"number",id:"rating","onUpdate:modelValue":t[4]||(t[4]=a=>e.form.rating=a),step:"0.1",min:"0",max:"10",placeholder:"0-10"},null,512),[[F,e.form.rating]])])]),o("div",uo,[o("div",go,[t[33]||(t[33]=o("label",{for:"views"},"Views:",-1)),x(o("input",{type:"number",id:"views","onUpdate:modelValue":t[5]||(t[5]=a=>e.form.count=a),min:"0",placeholder:"0"},null,512),[[F,e.form.count]])]),o("div",fo,[t[34]||(t[34]=o("label",{for:"discovered"},"Discovered:",-1)),x(o("input",{type:"date",id:"discovered","onUpdate:modelValue":t[6]||(t[6]=a=>e.form.discovered=a)},null,512),[[F,e.form.discovered]])])]),o("div",vo,[o("div",yo,[t[35]||(t[35]=o("label",{for:"platforms"},"Platforms:",-1)),x(o("input",{type:"text",id:"platforms","onUpdate:modelValue":t[7]||(t[7]=a=>e.form.platforms=a),placeholder:"PC, PS5, Xbox"},null,512),[[F,e.form.platforms]])]),o("div",po,[t[36]||(t[36]=o("label",{for:"genre"},"Genre:",-1)),x(o("input",{type:"text",id:"genre","onUpdate:modelValue":t[8]||(t[8]=a=>e.form.genre=a),placeholder:"Action, Adventure, RPG"},null,512),[[F,e.form.genre]])])]),e.form.category==="watchlist"?(c(),m("div",ho,[o("div",wo,[t[38]||(t[38]=o("label",{for:"watchlistType"},[re("Type: "),o("span",{class:"required"},"*")],-1)),x(o("select",{id:"watchlistType","onUpdate:modelValue":t[9]||(t[9]=a=>e.form.watchlistType=a)},[...t[37]||(t[37]=[ze('<option value="" data-v-05f814f0>Select Type</option><option value="game" data-v-05f814f0>Game</option><option value="series" data-v-05f814f0>Series</option><option value="movie" data-v-05f814f0>Movie</option><option value="buecher" data-v-05f814f0>Bücher</option>',5)])],512),[[de,e.form.watchlistType]]),e.form.category==="watchlist"&&!e.form.watchlistType?(c(),m("div",bo," Please select a type for watchlist items ")):p("",!0)])])):p("",!0),o("div",Io,[o("div",So,[t[39]||(t[39]=o("label",{for:"link"},"Link:",-1)),x(o("input",{type:"url",id:"link","onUpdate:modelValue":t[10]||(t[10]=a=>e.form.link=a),placeholder:"https://..."},null,512),[[F,e.form.link]])]),o("div",ko,[t[40]||(t[40]=o("label",{for:"path"},"Image Path:",-1)),x(o("input",{type:"text",id:"path","onUpdate:modelValue":t[11]||(t[11]=a=>e.form.path=a),placeholder:"images/movies/filename.jpg"},null,512),[[F,e.form.path]])])]),e.isGame?(c(),m("div",Co,[o("div",To,[t[41]||(t[41]=o("label",{for:"playtime"},"Playtime (Minutes):",-1)),x(o("input",{type:"number",id:"playtime","onUpdate:modelValue":t[12]||(t[12]=a=>e.form.spielzeit=a),min:"0",placeholder:"0"},null,512),[[F,e.form.spielzeit]])])])):p("",!0),e.isSeries?(c(),m("div",Ao,[o("div",xo,[t[43]||(t[43]=o("label",{for:"isAiring"},"Status:",-1)),x(o("select",{id:"isAiring","onUpdate:modelValue":t[13]||(t[13]=a=>e.form.isAiring=a)},[...t[42]||(t[42]=[o("option",{value:!1},"Finished",-1),o("option",{value:!0},"Airing",-1)])],512),[[de,e.form.isAiring]])]),e.form.isAiring?(c(),m("div",Mo,[t[44]||(t[44]=o("label",{for:"nextSeason"},"Next Season:",-1)),x(o("input",{type:"number",id:"nextSeason","onUpdate:modelValue":t[14]||(t[14]=a=>e.form.nextSeason=a),min:"1",placeholder:"1"},null,512),[[F,e.form.nextSeason]])])):p("",!0)])):p("",!0),e.form.isAiring?(c(),m("div",_o,[o("div",Do,[t[45]||(t[45]=o("label",{for:"nextSeasonRelease"},"Next Season Release:",-1)),x(o("input",{type:"date",id:"nextSeasonRelease","onUpdate:modelValue":t[15]||(t[15]=a=>e.form.nextSeasonRelease=a)},null,512),[[F,e.form.nextSeasonRelease]])])])):p("",!0),o("div",Uo,[o("div",Ro,[t[46]||(t[46]=o("label",{for:"imageUrl"},"Image URL (optional):",-1)),x(o("input",{type:"text",id:"imageUrl","onUpdate:modelValue":t[16]||(t[16]=a=>e.form.imageUrl=a),placeholder:"https://... or leave empty for API images"},null,512),[[F,e.form.imageUrl]])]),o("div",Fo,[t[47]||(t[47]=o("label",{for:"imageUpload"},"Upload Image:",-1)),o("div",Po,[o("input",{type:"file",id:"imageUpload",ref:"imageUploadRef",onChange:t[17]||(t[17]=(...a)=>e.handleImageUpload&&e.handleImageUpload(...a)),accept:"image/*",style:{display:"none"}},null,544),o("button",{type:"button",onClick:t[18]||(t[18]=(...a)=>e.triggerImageUpload&&e.triggerImageUpload(...a)),class:"upload-btn",disabled:e.loading}," 📁 Choose Image ",8,Bo),e.uploadedImagePath?(c(),m("div",Eo,[re(" ✅ Image uploaded: "+f(e.uploadedImagePath)+" ",1),o("button",{type:"button",onClick:t[19]||(t[19]=(...a)=>e.removeUploadedImage&&e.removeUploadedImage(...a)),class:"remove-uploaded-btn",title:"Remove uploaded image to enable API search"}," ✕ Remove ")])):p("",!0)])])]),e.form.imageUrl||e.uploadedImagePath?(c(),m("div",Lo,[o("div",No,[t[48]||(t[48]=o("label",null,"Image Preview:",-1)),o("div",Go,[o("img",{src:e.getImagePreviewUrl(),alt:e.form.title,onError:t[20]||(t[20]=(...a)=>e.handleImageError&&e.handleImageError(...a))},null,40,Vo),o("button",{type:"button",onClick:t[21]||(t[21]=(...a)=>e.clearImage&&e.clearImage(...a)),class:"clear-image-btn",title:"Remove image"}," ✕ ")])])])):p("",!0),e.error?(c(),m("div",zo,f(e.error),1)):p("",!0),o("div",Wo,[o("button",{type:"submit",disabled:e.loading},f(e.loading?"Saving...":"Save"),9,Oo),o("button",{type:"button",onClick:t[22]||(t[22]=(...a)=>e.closeModal&&e.closeModal(...a)),disabled:e.loading}," Cancel ",8,jo),e.isEditing?(c(),m("button",{key:0,type:"button",onClick:t[23]||(t[23]=(...a)=>e.deleteItem&&e.deleteItem(...a)),disabled:e.loading,class:"delete-btn"}," Delete ",8,qo)):p("",!0),o("button",{type:"button",onClick:t[24]||(t[24]=(...a)=>e.handleSave&&e.handleSave(...a)),disabled:e.loading,class:"check-btn",title:"Add to list"}," ✓ ",8,Ho)])],32)])])}const Jo=W(Vt,[["render",Qo],["__scopeId","data-v-05f814f0"]]),Ko={name:"BulkAddModal",props:{show:{type:Boolean,default:!1},currentCategory:{type:String,default:""}},emits:["close","save"],setup(n,{emit:t}){const s=w(!1),e=w(null),i=w(0),g=w([]),a=w(!1),u=w({category:"",itemsText:"",defaultRating:null,defaultPlatforms:"",defaultGenre:""}),r=R(()=>{if(!u.value.itemsText||!u.value.itemsText.trim())return[];const C=u.value.itemsText.split(`
`).map(I=>I.trim()).filter(I=>I.length>0).map(I=>{const y=I.split("|").map(U=>U.trim());return{searchTerm:y[0]||"",additionalInfo:y[1]||null}});return g.value&&g.value.length>0?C.map((I,y)=>{const U=g.value[y];return{searchTerm:I.searchTerm,additionalInfo:I.additionalInfo,title:(U==null?void 0:U.title)||I.searchTerm,apiData:U||null,hasApiData:!!U}}):C.map(I=>({searchTerm:I.searchTerm,additionalInfo:I.additionalInfo,title:I.searchTerm,apiData:null,hasApiData:!1}))}),P=R(()=>u.value.category&&u.value.itemsText.trim()&&r.value&&r.value.length>0&&!a.value),D=()=>{e.value=null,t("close")},B=async()=>{if(!(!u.value.category||!u.value.itemsText||!u.value.itemsText.trim())){a.value=!0,i.value=0,g.value=[],e.value=null;try{const C=u.value.itemsText.split(`
`).map(y=>y.trim()).filter(y=>y.length>0).map(y=>y.split("|")[0].trim()),I=[];for(let y=0;y<C.length;y++){const U=C[y];i.value=Math.round((y+1)/C.length*100);try{const L=await We.searchApi(U,u.value.category,1);if(L&&L.length>0){const E=L[0];I.push({title:E.title,release:E.release,rating:E.rating?Math.round(E.rating):null,platforms:E.platforms||u.value.defaultPlatforms,genre:E.genre||u.value.defaultGenre,link:E.link,path:E.image,external_id:E.id,api_source:E.api_source})}else I.push({title:U,release:null,rating:u.value.defaultRating,platforms:u.value.defaultPlatforms,genre:u.value.defaultGenre,link:null,path:null,external_id:null,api_source:null})}catch(L){console.warn(`Search failed for "${U}":`,L),I.push({title:U,release:null,rating:u.value.defaultRating,platforms:u.value.defaultPlatforms,genre:u.value.defaultGenre,link:null,path:null,external_id:null,api_source:null})}await new Promise(L=>setTimeout(L,200))}g.value=I||[]}catch(C){e.value="Failed to search API data: "+(C.message||"Unknown error"),console.error("API search error:",C)}finally{a.value=!1,i.value=100}}},z=async()=>{if(!(!P.value||!r.value)){s.value=!0,e.value=null;try{const C=r.value.map(I=>{const y=I.apiData;return{title:I.title,category:u.value.category,release:(y==null?void 0:y.release)||null,rating:(y==null?void 0:y.rating)||u.value.defaultRating||null,platforms:(y==null?void 0:y.platforms)||u.value.defaultPlatforms||null,genre:(y==null?void 0:y.genre)||u.value.defaultGenre||null,link:(y==null?void 0:y.link)||null,path:(y==null?void 0:y.path)||null,external_id:(y==null?void 0:y.external_id)||null,count:0,is_airing:!1,spielzeit:0}});t("save",C),u.value={category:"",itemsText:"",defaultRating:null,defaultPlatforms:"",defaultGenre:""},g.value=[]}catch(C){e.value=C.message||"Failed to add items",console.error("Bulk add error:",C)}finally{s.value=!1}}};return ce([()=>u.value.category,()=>u.value.itemsText],([C,I])=>{C&&I&&I.trim()&&!a.value&&setTimeout(()=>{u.value.category===C&&u.value.itemsText===I&&!a.value&&B()},1e3)}),ce(()=>n.show,C=>{C&&n.currentCategory?u.value.category=n.currentCategory:C||(u.value={category:"",itemsText:"",defaultRating:null,defaultPlatforms:"",defaultGenre:""},g.value=[],e.value=null,a.value=!1,i.value=0)}),{loading:s,error:e,bulkData:u,previewItems:r,canSave:P,closeModal:D,searchApiData:B,saveBulkItems:z,isSearching:a,searchProgress:i}}},Xo={class:"modal-header"},Yo={class:"modal-body"},Zo={class:"bulk-add-form"},$o={class:"form-group"},ea={class:"form-group"},ta={class:"form-group"},oa={class:"form-group"},aa={class:"form-group"},sa={key:0,class:"search-progress"},na={class:"progress-bar"},la={class:"progress-text"},ia={key:1,class:"preview-section"},ra={class:"preview-list"},da={class:"item-main"},ca={class:"item-title"},ma={key:0,class:"api-badge"},ua={key:1,class:"manual-badge"},ga={key:0,class:"item-info"},fa={key:1,class:"item-details"},va={key:0,class:"item-release"},ya={key:1,class:"item-rating"},pa={key:2,class:"item-genre"},ha={key:0,class:"preview-more"},wa={class:"modal-footer"},ba=["disabled"],Ia={key:0},Sa={key:1},ka={key:2};function Ca(n,t,s,e,i,g){return s.show?(c(),m("div",{key:0,class:"modal-overlay",onClick:t[9]||(t[9]=(...a)=>e.closeModal&&e.closeModal(...a))},[o("div",{class:"modal-content",onClick:t[8]||(t[8]=X(()=>{},["stop"]))},[o("div",Xo,[t[10]||(t[10]=o("h2",null,"Bulk Add Items",-1)),o("button",{class:"close-btn",onClick:t[0]||(t[0]=(...a)=>e.closeModal&&e.closeModal(...a))},"✕")]),o("div",Yo,[o("div",Zo,[o("div",$o,[t[12]||(t[12]=o("label",{for:"category"},"Category *",-1)),x(o("select",{id:"category","onUpdate:modelValue":t[1]||(t[1]=a=>e.bulkData.category=a),required:""},[...t[11]||(t[11]=[ze('<option value="" data-v-0ecb5be6>Select Category</option><option value="game" data-v-0ecb5be6>Game</option><option value="series" data-v-0ecb5be6>Series</option><option value="movie" data-v-0ecb5be6>Movie</option><option value="buecher" data-v-0ecb5be6>Bücher</option><option value="watchlist" data-v-0ecb5be6>Watchlist</option>',6)])],512),[[de,e.bulkData.category]])]),o("div",ea,[t[13]||(t[13]=o("label",{for:"items-text"},"Items (one per line) *",-1)),x(o("textarea",{id:"items-text","onUpdate:modelValue":t[2]||(t[2]=a=>e.bulkData.itemsText=a),placeholder:`Enter items one per line, for example:
The Witcher 3
Cyberpunk 2077
Red Dead Redemption 2`,rows:"10",required:""},null,512),[[F,e.bulkData.itemsText]]),t[14]||(t[14]=o("small",{class:"help-text"},"Enter one item per line. The system will automatically search the API for each title and use the official names, images, and details. You can add additional info using: Title | Additional Info",-1))]),o("div",ta,[t[15]||(t[15]=o("label",{for:"default-rating"},"Default Rating",-1)),x(o("input",{id:"default-rating","onUpdate:modelValue":t[3]||(t[3]=a=>e.bulkData.defaultRating=a),type:"number",min:"0",max:"10",step:"0.1",placeholder:"Optional rating for all items"},null,512),[[F,e.bulkData.defaultRating,void 0,{number:!0}]])]),o("div",oa,[t[16]||(t[16]=o("label",{for:"default-platforms"},"Default Platforms",-1)),x(o("input",{id:"default-platforms","onUpdate:modelValue":t[4]||(t[4]=a=>e.bulkData.defaultPlatforms=a),type:"text",placeholder:"e.g., PC, PS5, Xbox"},null,512),[[F,e.bulkData.defaultPlatforms]])]),o("div",aa,[t[17]||(t[17]=o("label",{for:"default-genre"},"Default Genre",-1)),x(o("input",{id:"default-genre","onUpdate:modelValue":t[5]||(t[5]=a=>e.bulkData.defaultGenre=a),type:"text",placeholder:"e.g., Action, Adventure, RPG"},null,512),[[F,e.bulkData.defaultGenre]])])]),e.isSearching?(c(),m("div",sa,[o("div",na,[o("div",{class:"progress-fill",style:Oe({width:e.searchProgress+"%"})},null,4)]),o("span",la,"Searching API for "+f(e.previewItems?e.previewItems.length:0)+" items... "+f(e.searchProgress)+"%",1)])):p("",!0),e.previewItems&&e.previewItems.length>0&&!e.isSearching?(c(),m("div",ia,[o("h3",null,"Preview ("+f(e.previewItems.length)+" items)",1),o("div",ra,[(c(!0),m(me,null,ue(e.previewItems.slice(0,10),(a,u)=>(c(),m("div",{key:u,class:K(["preview-item",{"has-api-data":a.hasApiData}])},[o("div",da,[o("span",ca,f(a.title),1),a.hasApiData?(c(),m("span",ma,"✓ API")):(c(),m("span",ua,"Manual"))]),a.additionalInfo?(c(),m("div",ga," | "+f(a.additionalInfo),1)):p("",!0),a.apiData?(c(),m("div",fa,[a.apiData.release?(c(),m("small",va,f(a.apiData.release),1)):p("",!0),a.apiData.rating?(c(),m("small",ya,"⭐ "+f(a.apiData.rating),1)):p("",!0),a.apiData.genre?(c(),m("small",pa,f(a.apiData.genre),1)):p("",!0)])):p("",!0)],2))),128)),e.previewItems&&e.previewItems.length>10?(c(),m("div",ha," ... and "+f(e.previewItems.length-10)+" more items ",1)):p("",!0)])])):p("",!0)]),o("div",wa,[o("button",{class:"btn btn-secondary",onClick:t[6]||(t[6]=(...a)=>e.closeModal&&e.closeModal(...a))},"Cancel"),o("button",{class:"btn btn-primary",onClick:t[7]||(t[7]=(...a)=>e.saveBulkItems&&e.saveBulkItems(...a)),disabled:!e.canSave||e.loading},[e.loading?(c(),m("span",Ia,"Adding "+f(e.previewItems?e.previewItems.length:0)+" items...",1)):e.isSearching?(c(),m("span",Sa,"Searching API...")):(c(),m("span",ka,"Add "+f(e.previewItems?e.previewItems.length:0)+" Items",1))],8,ba)])])])):p("",!0)}const Ta=W(Ko,[["render",Ca],["__scopeId","data-v-0ecb5be6"]]),Aa={name:"TxtImportModal",props:{show:{type:Boolean,default:!1}},emits:["close","fileProcessed"],methods:{handleFileUpload(n){const t=n.target.files[0];if(!t)return;if(!t.name.toLowerCase().endsWith(".txt")){alert("Bitte wählen Sie eine .txt Datei aus.");return}const s=new FileReader;s.onload=e=>{const i=e.target.result;this.$emit("fileProcessed",i)},s.readAsText(t,"UTF-8")}}},xa={class:"file-upload-area"},Ma={class:"modal-buttons"};function _a(n,t,s,e,i,g){return s.show?(c(),m("div",{key:0,class:"modal",onClick:t[3]||(t[3]=a=>n.$emit("close"))},[o("div",{class:"modal-content",onClick:t[2]||(t[2]=X(()=>{},["stop"]))},[t[5]||(t[5]=o("h2",null,"📄 Import from TXT File",-1)),t[6]||(t[6]=o("p",null,"Wählen Sie eine .txt Datei mit einer Liste von Titeln aus, um zu prüfen, welche Items in der aktuellen Kategorie fehlen.",-1)),o("div",xa,[o("input",{type:"file",id:"txtFileInput",accept:".txt",onChange:t[0]||(t[0]=(...a)=>g.handleFileUpload&&g.handleFileUpload(...a)),style:{display:"none"}},null,32),t[4]||(t[4]=o("label",{for:"txtFileInput",class:"file-upload-label"},[o("span",{class:"upload-icon"},"📁"),o("span",{class:"upload-text"},"TXT-Datei auswählen"),o("span",{class:"upload-hint"},"Eine .txt Datei mit einer Liste von Titeln")],-1))]),o("div",Ma,[o("button",{type:"button",onClick:t[1]||(t[1]=a=>n.$emit("close"))}," Cancel ")])])])):p("",!0)}const Da=W(Aa,[["render",_a],["__scopeId","data-v-d761bd17"]]),Ua={name:"TxtImportResultsModal",props:{show:{type:Boolean,default:!1},results:{type:Object,default:null}},emits:["close"]},Ra={class:"results-summary"},Fa={class:"summary-item"},Pa={class:"summary-value"},Ba={class:"summary-item"},Ea={class:"summary-value"},La={class:"summary-item"},Na={class:"summary-value existing"},Ga={class:"summary-item"},Va={class:"summary-value missing"},za={key:0,class:"missing-items"},Wa={class:"items-list"},Oa={key:1,class:"existing-items"},ja={class:"items-list"},qa={class:"modal-buttons"};function Ha(n,t,s,e,i,g){return s.show&&s.results?(c(),m("div",{key:0,class:"modal",onClick:t[2]||(t[2]=a=>n.$emit("close"))},[o("div",{class:"modal-content results-modal",onClick:t[1]||(t[1]=X(()=>{},["stop"]))},[t[7]||(t[7]=o("h2",null,"📊 TXT Import Ergebnisse",-1)),o("div",Ra,[o("div",Fa,[t[3]||(t[3]=o("span",{class:"summary-label"},"Kategorie:",-1)),o("span",Pa,f(s.results.categoryName),1)]),o("div",Ba,[t[4]||(t[4]=o("span",{class:"summary-label"},"Titel in Datei:",-1)),o("span",Ea,f(s.results.totalInFile),1)]),o("div",La,[t[5]||(t[5]=o("span",{class:"summary-label"},"Bereits vorhanden:",-1)),o("span",Na,f(s.results.existingItems.length),1)]),o("div",Ga,[t[6]||(t[6]=o("span",{class:"summary-label"},"Fehlende Titel:",-1)),o("span",Va,f(s.results.missingItems.length),1)])]),s.results.missingItems.length>0?(c(),m("div",za,[o("h3",null,"❌ Fehlende Titel ("+f(s.results.missingItems.length)+"):",1),o("div",Wa,[(c(!0),m(me,null,ue(s.results.missingItems,(a,u)=>(c(),m("div",{key:u,class:"missing-item"},f(a),1))),128))])])):p("",!0),s.results.existingItems.length>0?(c(),m("div",Oa,[o("h3",null,"✅ Bereits vorhanden ("+f(s.results.existingItems.length)+"):",1),o("div",ja,[(c(!0),m(me,null,ue(s.results.existingItems,(a,u)=>(c(),m("div",{key:u,class:"existing-item"},f(a),1))),128))])])):p("",!0),o("div",qa,[o("button",{type:"button",onClick:t[0]||(t[0]=a=>n.$emit("close"))}," Schließen ")])])])):p("",!0)}const Qa=W(Ua,[["render",Ha],["__scopeId","data-v-ec385b83"]]),Ja={name:"SimpleAddItem",setup(){const n=w(!1),t=w(null),s=Ye({title:"Test Game",category:"game",release:"2003-01-01",count:1});return{form:s,loading:n,result:t,addItem:async()=>{n.value=!0,t.value=null;try{const i="https://teabubble.attrebi.ch",g=await fetch(`${i}/api/login`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:"admin@teabubble.attrebi.ch",password:"admin123"})});if(!g.ok)throw new Error("Login failed");const u=(await g.json()).token,P=await(await fetch(`${i}/api/media`,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${u}`},body:JSON.stringify(s)})).json();P.success?t.value={success:!0,message:`Success! Item added with ID: ${P.data.id}`}:t.value={success:!1,message:`Error: ${JSON.stringify(P)}`}}catch(i){t.value={success:!1,message:`Error: ${i.message}`}}finally{n.value=!1}}}}},Ka={class:"simple-add-item"},Xa=["disabled"];function Ya(n,t,s,e,i,g){return c(),m("div",Ka,[t[10]||(t[10]=o("h3",null,"Simple Add Item Test",-1)),o("form",{onSubmit:t[4]||(t[4]=X((...a)=>e.addItem&&e.addItem(...a),["prevent"]))},[o("div",null,[t[5]||(t[5]=o("label",null,"Title:",-1)),x(o("input",{"onUpdate:modelValue":t[0]||(t[0]=a=>e.form.title=a),type:"text",required:""},null,512),[[F,e.form.title]])]),o("div",null,[t[7]||(t[7]=o("label",null,"Category:",-1)),x(o("select",{"onUpdate:modelValue":t[1]||(t[1]=a=>e.form.category=a)},[...t[6]||(t[6]=[o("option",{value:"game"},"Game",-1),o("option",{value:"movie"},"Movie",-1),o("option",{value:"series"},"Series",-1)])],512),[[de,e.form.category]])]),o("div",null,[t[8]||(t[8]=o("label",null,"Release:",-1)),x(o("input",{"onUpdate:modelValue":t[2]||(t[2]=a=>e.form.release=a),type:"date"},null,512),[[F,e.form.release]])]),o("div",null,[t[9]||(t[9]=o("label",null,"Count:",-1)),x(o("input",{"onUpdate:modelValue":t[3]||(t[3]=a=>e.form.count=a),type:"number",min:"0"},null,512),[[F,e.form.count]])]),o("button",{type:"submit",disabled:e.loading},f(e.loading?"Adding...":"Add Item"),9,Xa)],32),e.result?(c(),m("div",{key:0,class:K(["result",e.result.success?"success":"error"])},f(e.result.message),3)):p("",!0)])}const Za=W(Ja,[["render",Ya],["__scopeId","data-v-ac355bf2"]]),$a={name:"MessageBox",props:{show:{type:Boolean,default:!1},type:{type:String,default:"info",validator:n=>["success","error","warning","info"].includes(n)},title:{type:String,default:""},message:{type:String,required:!0},details:{type:String,default:""}},emits:["close"],setup(n,{emit:t}){const s=()=>{t("close")},e=R(()=>{switch(n.type){case"success":return"✅";case"error":return"❌";case"warning":return"⚠️";case"info":return"ℹ️";default:return"ℹ️"}}),i=R(()=>`message-${n.type}`);return{closeMessage:s,icon:e,messageType:i}}},es={class:"message-header"},ts={class:"message-icon"},os={class:"message-title"},as={class:"message-body"},ss={key:0,class:"message-details"},ns={class:"message-footer"};function ls(n,t,s,e,i,g){return s.show?(c(),m("div",{key:0,class:"message-overlay",onClick:t[3]||(t[3]=(...a)=>e.closeMessage&&e.closeMessage(...a))},[o("div",{class:K(["message-box",e.messageType]),onClick:t[2]||(t[2]=X(()=>{},["stop"]))},[o("div",es,[o("span",ts,f(e.icon),1),o("h3",os,f(s.title),1),o("button",{class:"close-btn",onClick:t[0]||(t[0]=(...a)=>e.closeMessage&&e.closeMessage(...a))},"✕")]),o("div",as,[o("p",null,f(s.message),1),s.details?(c(),m("div",ss,[o("pre",null,f(s.details),1)])):p("",!0)]),o("div",ns,[o("button",{class:"btn btn-primary",onClick:t[1]||(t[1]=(...a)=>e.closeMessage&&e.closeMessage(...a))},"OK")])],2)])):p("",!0)}const is=W($a,[["render",ls],["__scopeId","data-v-bb7ddc9c"]]),rs={name:"ConfirmDialog",props:{show:{type:Boolean,default:!1},title:{type:String,default:"Confirm Action"},message:{type:String,required:!0}},emits:["confirm","close"],setup(n,{emit:t}){const s=()=>{t("close")};return{closeDialog:s,confirmAction:()=>{t("confirm"),s()}}}},ds={class:"confirm-header"},cs={class:"confirm-title"},ms={class:"confirm-body"},us={class:"confirm-footer"};function gs(n,t,s,e,i,g){return s.show?(c(),m("div",{key:0,class:"confirm-overlay",onClick:t[4]||(t[4]=(...a)=>e.closeDialog&&e.closeDialog(...a))},[o("div",{class:"confirm-dialog",onClick:t[3]||(t[3]=X(()=>{},["stop"]))},[o("div",ds,[o("h3",cs,f(s.title),1),o("button",{class:"close-btn",onClick:t[0]||(t[0]=(...a)=>e.closeDialog&&e.closeDialog(...a))},"✕")]),o("div",ms,[o("p",null,f(s.message),1)]),o("div",us,[o("button",{class:"btn btn-secondary",onClick:t[1]||(t[1]=(...a)=>e.closeDialog&&e.closeDialog(...a))},"Cancel"),o("button",{class:"btn btn-danger",onClick:t[2]||(t[2]=(...a)=>e.confirmAction&&e.confirmAction(...a))},"Confirm")])])])):p("",!0)}const fs=W(rs,[["render",gs],["__scopeId","data-v-d88dddc3"]]),vs={name:"InputDialog",props:{show:{type:Boolean,default:!1},title:{type:String,default:"Input Required"},message:{type:String,required:!0},placeholder:{type:String,default:""},inputType:{type:String,default:"text"},defaultValue:{type:String,default:""}},emits:["confirm","close"],setup(n,{emit:t}){const s=w(""),e=w(null),i=()=>{t("close")},g=()=>{t("confirm",s.value),i()};return ce(()=>n.show,async a=>{a&&(s.value=n.defaultValue,await nt(),e.value&&(e.value.focus(),e.value.select()))}),{inputValue:s,inputRef:e,closeDialog:i,confirmAction:g}}},ys={class:"input-header"},ps={class:"input-title"},hs={class:"input-body"},ws={class:"input-message"},bs=["type","placeholder"],Is={class:"input-footer"};function Ss(n,t,s,e,i,g){return s.show?(c(),m("div",{key:0,class:"input-overlay",onClick:t[6]||(t[6]=(...a)=>e.closeDialog&&e.closeDialog(...a))},[o("div",{class:"input-dialog",onClick:t[5]||(t[5]=X(()=>{},["stop"]))},[o("div",ys,[o("h3",ps,f(s.title),1),o("button",{class:"close-btn",onClick:t[0]||(t[0]=(...a)=>e.closeDialog&&e.closeDialog(...a))},"✕")]),o("div",hs,[o("p",ws,f(s.message),1),x(o("input",{"onUpdate:modelValue":t[1]||(t[1]=a=>e.inputValue=a),type:s.inputType,placeholder:s.placeholder,class:"input-field",onKeyup:t[2]||(t[2]=st((...a)=>e.confirmAction&&e.confirmAction(...a),["enter"])),ref:"inputRef"},null,40,bs),[[at,e.inputValue]])]),o("div",Is,[o("button",{class:"btn btn-secondary",onClick:t[3]||(t[3]=(...a)=>e.closeDialog&&e.closeDialog(...a))},"Cancel"),o("button",{class:"btn btn-primary",onClick:t[4]||(t[4]=(...a)=>e.confirmAction&&e.confirmAction(...a))},"OK")])])])):p("",!0)}const ks=W(vs,[["render",Ss],["__scopeId","data-v-5aa387a1"]]),Cs={name:"MediaLibrary",components:{MediaItem:Ft,Sidebar:rt,MainHeader:dt,FloatingActionButton:Gt,LoginModal:mt,RegisterModal:ct,EditModal:Jo,BulkAddModal:Ta,TxtImportModal:Da,TxtImportResultsModal:Qa,SimpleAddItem:Za,LoadingSpinner:gt,MessageBox:is,ConfirmDialog:fs,InputDialog:ks},setup(){const n=Ze(),t=$e(),s=et(),e=tt(),i=Xe(),g=w(!1),a=w(null),{sidebarCollapsed:u,mobileSidebarOpen:r,showLoginModal:P,showRegisterModal:D,showEditModal:B,showFloatingMenu:z,showBulkAddModal:C,showTxtImportModal:I,showTxtImportResults:y,editingItem:U,gridColumns:L,sortBy:E,categories:O,txtImportResults:M,isLoggedIn:Y,isAdmin:q,userName:ge,currentCategory:Z,searchQuery:j,categoryCounts:fe,loading:te,error:l,paginatedMedia:b,platforms:N,genres:T,toggleSidebar:_,toggleMobileSidebar:H,closeMobileSidebar:Q,setCategory:ve,clearSearch:Se,togglePlatformFilter:ke,toggleGenreFilter:Ce,toggleAiringFilter:Te,editItem:Ae,closeEditModal:xe,closeBulkAddModal:Me,handleBulkAddItems:ye,handleSaveItem:pe,handleDeleteItem:_e,logout:De,loadMedia:$,toggleFloatingMenu:Ue,addNewItem:ee,bulkAddItems:Re,importFromTxt:Fe,importFromAPI:Pe,createCollection:Be,exportMediaCollection:Ee,exportAsCSV:Le,exportAsJSON:oe,downloadFile:Ne,deleteAllInCategory:Ge,getCategoryDisplayName:ae,navigateToBooks:he,navigateToStatistics:we,navigateToCalendar:be,navigateToFeatures:se,navigateToProfile:Ie,processTxtContent:je,closeTxtImportResults:qe,cleanup:He,router:Ve}=ft(),Qe=R(()=>{try{return ae?ae(Z.value):Z.value}catch(h){return console.error("Error getting category display name:",h),Z.value||"Unknown"}}),Je=h=>{ve(h),ee()},d=()=>{P.value=!1,D.value=!0},v=()=>{P.value=!0},A=h=>{P.value=!1,$()},S=()=>{D.value=!1,$()},k=async()=>{g.value=!0,a.value=null;try{console.log("🔧 Starting admin setup...");const h=await i.adminSetup();h.success?(console.log("✅ Admin setup successful:",h),a.value={type:"success",text:`✅ Admin created and logged in! User: ${h.user.name} (${h.user.email})`},await $(),setTimeout(()=>{a.value=null},5e3)):(console.log("ℹ️ Admin already exists:",h),a.value={type:"info",text:`ℹ️ ${h.message} (${h.admin_count} admin(s) exist)`},setTimeout(()=>{a.value=null},3e3))}catch(h){console.error("❌ Admin setup failed:",h),a.value={type:"error",text:`❌ Admin setup failed: ${h.message||"Unknown error"}`},setTimeout(()=>{a.value=null},5e3)}finally{g.value=!1}},G=()=>{console.log("🔥 DEBUG: Direct admin navigation called!"),console.log("🔥 DEBUG: Router object:",Ve);try{Ve.push("/admin"),console.log("🔥 DEBUG: Successfully navigated to /admin!")}catch(h){console.error("🔥 DEBUG: Error navigating to admin:",h)}};return lt(async()=>{try{if(await $(),Y.value)try{n.initializeRealtimeUpdates()}catch(h){console.error("Error initializing realtime updates:",h)}}catch(h){console.error("Error during initialization:",h)}}),it(()=>{if(Y.value)try{n.cleanupRealtimeUpdates()}catch(h){console.error("Error cleaning up realtime updates:",h)}He()}),{sidebarCollapsed:u,mobileSidebarOpen:r,showLoginModal:P,showRegisterModal:D,showEditModal:B,showFloatingMenu:z,showBulkAddModal:C,showTxtImportModal:I,showTxtImportResults:y,editingItem:U,gridColumns:L,sortBy:E,categories:O,txtImportResults:M,adminSetupLoading:g,adminSetupMessage:a,isLoggedIn:Y,isAdmin:q,userName:ge,currentCategory:Z,currentCategoryDisplayName:Qe,searchQuery:j,categoryCounts:fe,loading:te,error:l,paginatedMedia:b,platforms:N,genres:T,toggleSidebar:_,toggleMobileSidebar:H,closeMobileSidebar:Q,setCategory:ve,clearSearch:Se,navigateToBooks:he,navigateToStatistics:we,navigateToCalendar:be,navigateToFeatures:se,navigateToProfile:Ie,addItemFromSidebar:Je,togglePlatformFilter:ke,toggleGenreFilter:Ce,toggleAiringFilter:Te,editItem:Ae,switchToRegister:d,showAdminLogin:v,handleLoginSuccess:A,handleRegisterSuccess:S,handleAdminSetup:k,debugNavigateToAdmin:G,closeEditModal:xe,closeBulkAddModal:Me,handleBulkAddItems:ye,handleSaveItem:pe,handleDeleteItem:_e,logout:De,loadMedia:$,toggleFloatingMenu:Ue,addNewItem:ee,bulkAddItems:Re,importFromTxt:Fe,importFromAPI:Pe,createCollection:Be,exportMediaCollection:Ee,exportAsCSV:Le,exportAsJSON:oe,downloadFile:Ne,deleteAllInCategory:Ge,getCategoryDisplayName:ae,processTxtContent:je,closeTxtImportResults:qe,messageStore:t,confirmStore:s,inputStore:e}}},Ts={class:"vue-app"},As={class:"main-content"},xs={class:"content-area"},Ms={key:1,class:"error"},_s={key:2},Ds={key:0,class:"admin-setup-container"},Us=["disabled"],Rs={key:0},Fs={key:1};function Ps(n,t,s,e,i,g){const a=V("Sidebar"),u=V("MainHeader"),r=V("LoadingSpinner"),P=V("MediaItem"),D=V("LoginModal"),B=V("RegisterModal"),z=V("EditModal"),C=V("BulkAddModal"),I=V("TxtImportModal"),y=V("TxtImportResultsModal"),U=V("FloatingActionButton"),L=V("MessageBox"),E=V("ConfirmDialog"),O=V("InputDialog");return c(),m("div",Ts,[o("div",{class:K(["mobile-overlay",{show:e.mobileSidebarOpen}]),onClick:t[0]||(t[0]=(...M)=>e.closeMobileSidebar&&e.closeMobileSidebar(...M))},null,2),J(a,{collapsed:e.sidebarCollapsed,"mobile-open":e.mobileSidebarOpen,"is-logged-in":e.isLoggedIn,"is-admin":e.isAdmin,"user-name":e.userName,"current-category":e.currentCategory,"category-counts":e.categoryCounts,platforms:e.platforms,genres:e.genres,categories:e.categories,onToggle:e.toggleSidebar,onSetCategory:e.setCategory,onNavigateToBooks:e.navigateToBooks,onNavigateToStatistics:e.navigateToStatistics,onNavigateToCalendar:e.navigateToCalendar,onNavigateToFeatures:e.navigateToFeatures,onNavigateToProfile:e.navigateToProfile,onNavigateToAdmin:e.debugNavigateToAdmin,onTogglePlatformFilter:e.togglePlatformFilter,onToggleGenreFilter:e.toggleGenreFilter,onToggleAiringFilter:e.toggleAiringFilter,onAddItem:e.addItemFromSidebar,onShowLogin:t[1]||(t[1]=M=>e.showLoginModal=!0),onShowRegister:t[2]||(t[2]=M=>e.showRegisterModal=!0),onShowAdminLogin:e.showAdminLogin,onLogout:e.logout},null,8,["collapsed","mobile-open","is-logged-in","is-admin","user-name","current-category","category-counts","platforms","genres","categories","onToggle","onSetCategory","onNavigateToBooks","onNavigateToStatistics","onNavigateToCalendar","onNavigateToFeatures","onNavigateToProfile","onNavigateToAdmin","onTogglePlatformFilter","onToggleGenreFilter","onToggleAiringFilter","onAddItem","onShowAdminLogin","onLogout"]),o("div",As,[J(u,{"search-query":e.searchQuery,"onUpdate:searchQuery":t[3]||(t[3]=M=>e.searchQuery=M),"grid-columns":e.gridColumns,"onUpdate:gridColumns":t[4]||(t[4]=M=>e.gridColumns=M),"sort-by":e.sortBy,"onUpdate:sortBy":t[5]||(t[5]=M=>e.sortBy=M),onToggleMobileSidebar:e.toggleMobileSidebar,onClearSearch:e.clearSearch},null,8,["search-query","grid-columns","sort-by","onToggleMobileSidebar","onClearSearch"]),o("main",xs,[e.loading?(c(),ie(r,{key:0,message:"Loading media data..."})):e.error?(c(),m("div",Ms,[o("p",null,f(e.error),1),o("button",{onClick:t[6]||(t[6]=(...M)=>e.loadMedia&&e.loadMedia(...M))},"Retry")])):(c(),m("div",_s,[o("div",{class:"grid",style:Oe({gridTemplateColumns:`repeat(${e.gridColumns}, 1fr)`})},[(c(!0),m(me,null,ue(e.paginatedMedia,M=>(c(),ie(P,{key:M.id,item:M,onEdit:e.editItem},null,8,["item","onEdit"]))),128))],4)]))])]),e.isLoggedIn?p("",!0):(c(),m("div",Ds,[o("button",{onClick:t[7]||(t[7]=(...M)=>e.handleAdminSetup&&e.handleAdminSetup(...M)),disabled:e.adminSetupLoading,class:"admin-setup-btn",title:"Setup Admin Account (Creates admin@teabubble.attrebi.ch / admin123)"},[e.adminSetupLoading?(c(),m("span",Rs,"🔧 Setting up...")):(c(),m("span",Fs,"🔧 Admin Setup"))],8,Us),e.adminSetupMessage?(c(),m("div",{key:0,class:K(["admin-setup-message",e.adminSetupMessage.type])},f(e.adminSetupMessage.text),3)):p("",!0)])),e.showLoginModal?(c(),ie(D,{key:1,onClose:t[8]||(t[8]=M=>e.showLoginModal=!1),onSuccess:e.handleLoginSuccess,onSwitchToRegister:e.switchToRegister},null,8,["onSuccess","onSwitchToRegister"])):p("",!0),e.showRegisterModal?(c(),ie(B,{key:2,onClose:t[9]||(t[9]=M=>e.showRegisterModal=!1),onSuccess:e.handleRegisterSuccess},null,8,["onSuccess"])):p("",!0),e.showEditModal?(c(),ie(z,{key:3,item:e.editingItem,"current-category":e.currentCategory,onClose:e.closeEditModal,onSave:e.handleSaveItem,onDelete:e.handleDeleteItem},null,8,["item","current-category","onClose","onSave","onDelete"])):p("",!0),J(C,{show:e.showBulkAddModal,"current-category":e.currentCategory,onClose:e.closeBulkAddModal,onSave:e.handleBulkAddItems},null,8,["show","current-category","onClose","onSave"]),J(I,{show:e.showTxtImportModal,onClose:t[10]||(t[10]=M=>e.showTxtImportModal=!1),onFileProcessed:e.processTxtContent},null,8,["show","onFileProcessed"]),J(y,{show:e.showTxtImportResults,results:e.txtImportResults,onClose:e.closeTxtImportResults},null,8,["show","results","onClose"]),J(U,{"show-menu":e.showFloatingMenu,"show-delete-all":e.isLoggedIn&&e.currentCategory!=="all"&&e.categoryCounts[e.currentCategory]>0,"category-name":e.currentCategoryDisplayName,"item-count":e.categoryCounts[e.currentCategory]||0,onToggleMenu:e.toggleFloatingMenu,onAddNewItem:e.addNewItem,onBulkAddItems:e.bulkAddItems,onImportFromTxt:e.importFromTxt,onImportFromApi:e.importFromAPI,onCreateCollection:e.createCollection,onDeleteAllInCategory:e.deleteAllInCategory},null,8,["show-menu","show-delete-all","category-name","item-count","onToggleMenu","onAddNewItem","onBulkAddItems","onImportFromTxt","onImportFromApi","onCreateCollection","onDeleteAllInCategory"]),J(L,{show:e.messageStore.show,type:e.messageStore.type,title:e.messageStore.title,message:e.messageStore.message,details:e.messageStore.details,onClose:e.messageStore.closeMessage},null,8,["show","type","title","message","details","onClose"]),J(E,{show:e.confirmStore.show,title:e.confirmStore.title,message:e.confirmStore.message,onConfirm:e.confirmStore.confirm,onClose:e.confirmStore.cancel},null,8,["show","title","message","onConfirm","onClose"]),J(O,{show:e.inputStore.show,title:e.inputStore.title,message:e.inputStore.message,placeholder:e.inputStore.placeholder,"input-type":e.inputStore.inputType,"default-value":e.inputStore.defaultValue,onConfirm:e.inputStore.confirm,onClose:e.inputStore.cancel},null,8,["show","title","message","placeholder","input-type","default-value","onConfirm","onClose"])])}const Os=W(Cs,[["render",Ps],["__scopeId","data-v-00efb3cd"]]);export{Os as default};
