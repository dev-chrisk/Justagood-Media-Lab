import{d as bt,r as X,c as we}from"./index-DabYcaMb.js";function We(e,t){return function(){return e.apply(t,arguments)}}const{toString:St}=Object.prototype,{getPrototypeOf:Ie}=Object,{iterator:fe,toStringTag:Xe}=Symbol,pe=(e=>t=>{const r=St.call(t);return e[r]||(e[r]=r.slice(8,-1).toLowerCase())})(Object.create(null)),j=e=>(e=e.toLowerCase(),t=>pe(t)===e),he=e=>t=>typeof t===e,{isArray:Q}=Array,G=he("undefined");function te(e){return e!==null&&!G(e)&&e.constructor!==null&&!G(e.constructor)&&L(e.constructor.isBuffer)&&e.constructor.isBuffer(e)}const Ge=j("ArrayBuffer");function Et(e){let t;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?t=ArrayBuffer.isView(e):t=e&&e.buffer&&Ge(e.buffer),t}const Rt=he("string"),L=he("function"),Qe=he("number"),re=e=>e!==null&&typeof e=="object",At=e=>e===!0||e===!1,le=e=>{if(pe(e)!=="object")return!1;const t=Ie(e);return(t===null||t===Object.prototype||Object.getPrototypeOf(t)===null)&&!(Xe in e)&&!(fe in e)},Tt=e=>{if(!re(e)||te(e))return!1;try{return Object.keys(e).length===0&&Object.getPrototypeOf(e)===Object.prototype}catch{return!1}},Ot=j("Date"),xt=j("File"),Ct=j("Blob"),It=j("FileList"),Pt=e=>re(e)&&L(e.pipe),vt=e=>{let t;return e&&(typeof FormData=="function"&&e instanceof FormData||L(e.append)&&((t=pe(e))==="formdata"||t==="object"&&L(e.toString)&&e.toString()==="[object FormData]"))},kt=j("URLSearchParams"),[Ft,_t,Nt,Ut]=["ReadableStream","Request","Response","Headers"].map(j),Lt=e=>e.trim?e.trim():e.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"");function ne(e,t,{allOwnKeys:r=!1}={}){if(e===null||typeof e>"u")return;let n,s;if(typeof e!="object"&&(e=[e]),Q(e))for(n=0,s=e.length;n<s;n++)t.call(null,e[n],n,e);else{if(te(e))return;const o=r?Object.getOwnPropertyNames(e):Object.keys(e),i=o.length;let l;for(n=0;n<i;n++)l=o[n],t.call(null,e[l],l,e)}}function Ze(e,t){if(te(e))return null;t=t.toLowerCase();const r=Object.keys(e);let n=r.length,s;for(;n-- >0;)if(s=r[n],t===s.toLowerCase())return s;return null}const $=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:global,Ye=e=>!G(e)&&e!==$;function Ae(){const{caseless:e,skipUndefined:t}=Ye(this)&&this||{},r={},n=(s,o)=>{const i=e&&Ze(r,o)||o;le(r[i])&&le(s)?r[i]=Ae(r[i],s):le(s)?r[i]=Ae({},s):Q(s)?r[i]=s.slice():(!t||!G(s))&&(r[i]=s)};for(let s=0,o=arguments.length;s<o;s++)arguments[s]&&ne(arguments[s],n);return r}const Mt=(e,t,r,{allOwnKeys:n}={})=>(ne(t,(s,o)=>{r&&L(s)?e[o]=We(s,r):e[o]=s},{allOwnKeys:n}),e),Bt=e=>(e.charCodeAt(0)===65279&&(e=e.slice(1)),e),jt=(e,t,r,n)=>{e.prototype=Object.create(t.prototype,n),e.prototype.constructor=e,Object.defineProperty(e,"super",{value:t.prototype}),r&&Object.assign(e.prototype,r)},Dt=(e,t,r,n)=>{let s,o,i;const l={};if(t=t||{},e==null)return t;do{for(s=Object.getOwnPropertyNames(e),o=s.length;o-- >0;)i=s[o],(!n||n(i,e,t))&&!l[i]&&(t[i]=e[i],l[i]=!0);e=r!==!1&&Ie(e)}while(e&&(!r||r(e,t))&&e!==Object.prototype);return t},qt=(e,t,r)=>{e=String(e),(r===void 0||r>e.length)&&(r=e.length),r-=t.length;const n=e.indexOf(t,r);return n!==-1&&n===r},Ht=e=>{if(!e)return null;if(Q(e))return e;let t=e.length;if(!Qe(t))return null;const r=new Array(t);for(;t-- >0;)r[t]=e[t];return r},zt=(e=>t=>e&&t instanceof e)(typeof Uint8Array<"u"&&Ie(Uint8Array)),$t=(e,t)=>{const n=(e&&e[fe]).call(e);let s;for(;(s=n.next())&&!s.done;){const o=s.value;t.call(e,o[0],o[1])}},Jt=(e,t)=>{let r;const n=[];for(;(r=e.exec(t))!==null;)n.push(r);return n},Vt=j("HTMLFormElement"),Kt=e=>e.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,function(r,n,s){return n.toUpperCase()+s}),Fe=(({hasOwnProperty:e})=>(t,r)=>e.call(t,r))(Object.prototype),Wt=j("RegExp"),et=(e,t)=>{const r=Object.getOwnPropertyDescriptors(e),n={};ne(r,(s,o)=>{let i;(i=t(s,o,e))!==!1&&(n[o]=i||s)}),Object.defineProperties(e,n)},Xt=e=>{et(e,(t,r)=>{if(L(e)&&["arguments","caller","callee"].indexOf(r)!==-1)return!1;const n=e[r];if(L(n)){if(t.enumerable=!1,"writable"in t){t.writable=!1;return}t.set||(t.set=()=>{throw Error("Can not rewrite read-only method '"+r+"'")})}})},Gt=(e,t)=>{const r={},n=s=>{s.forEach(o=>{r[o]=!0})};return Q(e)?n(e):n(String(e).split(t)),r},Qt=()=>{},Zt=(e,t)=>e!=null&&Number.isFinite(e=+e)?e:t;function Yt(e){return!!(e&&L(e.append)&&e[Xe]==="FormData"&&e[fe])}const er=e=>{const t=new Array(10),r=(n,s)=>{if(re(n)){if(t.indexOf(n)>=0)return;if(te(n))return n;if(!("toJSON"in n)){t[s]=n;const o=Q(n)?[]:{};return ne(n,(i,l)=>{const h=r(i,s+1);!G(h)&&(o[l]=h)}),t[s]=void 0,o}}return n};return r(e,0)},tr=j("AsyncFunction"),rr=e=>e&&(re(e)||L(e))&&L(e.then)&&L(e.catch),tt=((e,t)=>e?setImmediate:t?((r,n)=>($.addEventListener("message",({source:s,data:o})=>{s===$&&o===r&&n.length&&n.shift()()},!1),s=>{n.push(s),$.postMessage(r,"*")}))(`axios@${Math.random()}`,[]):r=>setTimeout(r))(typeof setImmediate=="function",L($.postMessage)),nr=typeof queueMicrotask<"u"?queueMicrotask.bind($):typeof process<"u"&&process.nextTick||tt,sr=e=>e!=null&&L(e[fe]),a={isArray:Q,isArrayBuffer:Ge,isBuffer:te,isFormData:vt,isArrayBufferView:Et,isString:Rt,isNumber:Qe,isBoolean:At,isObject:re,isPlainObject:le,isEmptyObject:Tt,isReadableStream:Ft,isRequest:_t,isResponse:Nt,isHeaders:Ut,isUndefined:G,isDate:Ot,isFile:xt,isBlob:Ct,isRegExp:Wt,isFunction:L,isStream:Pt,isURLSearchParams:kt,isTypedArray:zt,isFileList:It,forEach:ne,merge:Ae,extend:Mt,trim:Lt,stripBOM:Bt,inherits:jt,toFlatObject:Dt,kindOf:pe,kindOfTest:j,endsWith:qt,toArray:Ht,forEachEntry:$t,matchAll:Jt,isHTMLForm:Vt,hasOwnProperty:Fe,hasOwnProp:Fe,reduceDescriptors:et,freezeMethods:Xt,toObjectSet:Gt,toCamelCase:Kt,noop:Qt,toFiniteNumber:Zt,findKey:Ze,global:$,isContextDefined:Ye,isSpecCompliantForm:Yt,toJSONObject:er,isAsyncFn:tr,isThenable:rr,setImmediate:tt,asap:nr,isIterable:sr};function S(e,t,r,n,s){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack,this.message=e,this.name="AxiosError",t&&(this.code=t),r&&(this.config=r),n&&(this.request=n),s&&(this.response=s,this.status=s.status?s.status:null)}a.inherits(S,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:a.toJSONObject(this.config),code:this.code,status:this.status}}});const rt=S.prototype,nt={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach(e=>{nt[e]={value:e}});Object.defineProperties(S,nt);Object.defineProperty(rt,"isAxiosError",{value:!0});S.from=(e,t,r,n,s,o)=>{const i=Object.create(rt);a.toFlatObject(e,i,function(c){return c!==Error.prototype},d=>d!=="isAxiosError");const l=e&&e.message?e.message:"Error",h=t==null&&e?e.code:t;return S.call(i,l,h,r,n,s),e&&i.cause==null&&Object.defineProperty(i,"cause",{value:e,configurable:!0}),i.name=e&&e.name||"Error",o&&Object.assign(i,o),i};const or=null;function Te(e){return a.isPlainObject(e)||a.isArray(e)}function st(e){return a.endsWith(e,"[]")?e.slice(0,-2):e}function _e(e,t,r){return e?e.concat(t).map(function(s,o){return s=st(s),!r&&o?"["+s+"]":s}).join(r?".":""):t}function ir(e){return a.isArray(e)&&!e.some(Te)}const ar=a.toFlatObject(a,{},null,function(t){return/^is[A-Z]/.test(t)});function me(e,t,r){if(!a.isObject(e))throw new TypeError("target must be an object");t=t||new FormData,r=a.toFlatObject(r,{metaTokens:!0,dots:!1,indexes:!1},!1,function(w,m){return!a.isUndefined(m[w])});const n=r.metaTokens,s=r.visitor||c,o=r.dots,i=r.indexes,h=(r.Blob||typeof Blob<"u"&&Blob)&&a.isSpecCompliantForm(t);if(!a.isFunction(s))throw new TypeError("visitor must be a function");function d(u){if(u===null)return"";if(a.isDate(u))return u.toISOString();if(a.isBoolean(u))return u.toString();if(!h&&a.isBlob(u))throw new S("Blob is not supported. Use a Buffer instead.");return a.isArrayBuffer(u)||a.isTypedArray(u)?h&&typeof Blob=="function"?new Blob([u]):Buffer.from(u):u}function c(u,w,m){let x=u;if(u&&!m&&typeof u=="object"){if(a.endsWith(w,"{}"))w=n?w:w.slice(0,-2),u=JSON.stringify(u);else if(a.isArray(u)&&ir(u)||(a.isFileList(u)||a.endsWith(w,"[]"))&&(x=a.toArray(u)))return w=st(w),x.forEach(function(I,k){!(a.isUndefined(I)||I===null)&&t.append(i===!0?_e([w],k,o):i===null?w:w+"[]",d(I))}),!1}return Te(u)?!0:(t.append(_e(m,w,o),d(u)),!1)}const g=[],E=Object.assign(ar,{defaultVisitor:c,convertValue:d,isVisitable:Te});function P(u,w){if(!a.isUndefined(u)){if(g.indexOf(u)!==-1)throw Error("Circular reference detected in "+w.join("."));g.push(u),a.forEach(u,function(x,U){(!(a.isUndefined(x)||x===null)&&s.call(t,x,a.isString(U)?U.trim():U,w,E))===!0&&P(x,w?w.concat(U):[U])}),g.pop()}}if(!a.isObject(e))throw new TypeError("data must be an object");return P(e),t}function Ne(e){const t={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(e).replace(/[!'()~]|%20|%00/g,function(n){return t[n]})}function Pe(e,t){this._pairs=[],e&&me(e,this,t)}const ot=Pe.prototype;ot.append=function(t,r){this._pairs.push([t,r])};ot.toString=function(t){const r=t?function(n){return t.call(this,n,Ne)}:Ne;return this._pairs.map(function(s){return r(s[0])+"="+r(s[1])},"").join("&")};function lr(e){return encodeURIComponent(e).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+")}function it(e,t,r){if(!t)return e;const n=r&&r.encode||lr;a.isFunction(r)&&(r={serialize:r});const s=r&&r.serialize;let o;if(s?o=s(t,r):o=a.isURLSearchParams(t)?t.toString():new Pe(t,r).toString(n),o){const i=e.indexOf("#");i!==-1&&(e=e.slice(0,i)),e+=(e.indexOf("?")===-1?"?":"&")+o}return e}class Ue{constructor(){this.handlers=[]}use(t,r,n){return this.handlers.push({fulfilled:t,rejected:r,synchronous:n?n.synchronous:!1,runWhen:n?n.runWhen:null}),this.handlers.length-1}eject(t){this.handlers[t]&&(this.handlers[t]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(t){a.forEach(this.handlers,function(n){n!==null&&t(n)})}}const at={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},cr=typeof URLSearchParams<"u"?URLSearchParams:Pe,ur=typeof FormData<"u"?FormData:null,dr=typeof Blob<"u"?Blob:null,fr={isBrowser:!0,classes:{URLSearchParams:cr,FormData:ur,Blob:dr},protocols:["http","https","file","blob","url","data"]},ve=typeof window<"u"&&typeof document<"u",Oe=typeof navigator=="object"&&navigator||void 0,pr=ve&&(!Oe||["ReactNative","NativeScript","NS"].indexOf(Oe.product)<0),hr=typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&typeof self.importScripts=="function",mr=ve&&window.location.href||"http://localhost",gr=Object.freeze(Object.defineProperty({__proto__:null,hasBrowserEnv:ve,hasStandardBrowserEnv:pr,hasStandardBrowserWebWorkerEnv:hr,navigator:Oe,origin:mr},Symbol.toStringTag,{value:"Module"})),_={...gr,...fr};function yr(e,t){return me(e,new _.classes.URLSearchParams,{visitor:function(r,n,s,o){return _.isNode&&a.isBuffer(r)?(this.append(n,r.toString("base64")),!1):o.defaultVisitor.apply(this,arguments)},...t})}function wr(e){return a.matchAll(/\w+|\[(\w*)]/g,e).map(t=>t[0]==="[]"?"":t[1]||t[0])}function br(e){const t={},r=Object.keys(e);let n;const s=r.length;let o;for(n=0;n<s;n++)o=r[n],t[o]=e[o];return t}function lt(e){function t(r,n,s,o){let i=r[o++];if(i==="__proto__")return!0;const l=Number.isFinite(+i),h=o>=r.length;return i=!i&&a.isArray(s)?s.length:i,h?(a.hasOwnProp(s,i)?s[i]=[s[i],n]:s[i]=n,!l):((!s[i]||!a.isObject(s[i]))&&(s[i]=[]),t(r,n,s[i],o)&&a.isArray(s[i])&&(s[i]=br(s[i])),!l)}if(a.isFormData(e)&&a.isFunction(e.entries)){const r={};return a.forEachEntry(e,(n,s)=>{t(wr(n),s,r,0)}),r}return null}function Sr(e,t,r){if(a.isString(e))try{return(t||JSON.parse)(e),a.trim(e)}catch(n){if(n.name!=="SyntaxError")throw n}return(r||JSON.stringify)(e)}const se={transitional:at,adapter:["xhr","http","fetch"],transformRequest:[function(t,r){const n=r.getContentType()||"",s=n.indexOf("application/json")>-1,o=a.isObject(t);if(o&&a.isHTMLForm(t)&&(t=new FormData(t)),a.isFormData(t))return s?JSON.stringify(lt(t)):t;if(a.isArrayBuffer(t)||a.isBuffer(t)||a.isStream(t)||a.isFile(t)||a.isBlob(t)||a.isReadableStream(t))return t;if(a.isArrayBufferView(t))return t.buffer;if(a.isURLSearchParams(t))return r.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),t.toString();let l;if(o){if(n.indexOf("application/x-www-form-urlencoded")>-1)return yr(t,this.formSerializer).toString();if((l=a.isFileList(t))||n.indexOf("multipart/form-data")>-1){const h=this.env&&this.env.FormData;return me(l?{"files[]":t}:t,h&&new h,this.formSerializer)}}return o||s?(r.setContentType("application/json",!1),Sr(t)):t}],transformResponse:[function(t){const r=this.transitional||se.transitional,n=r&&r.forcedJSONParsing,s=this.responseType==="json";if(a.isResponse(t)||a.isReadableStream(t))return t;if(t&&a.isString(t)&&(n&&!this.responseType||s)){const i=!(r&&r.silentJSONParsing)&&s;try{return JSON.parse(t,this.parseReviver)}catch(l){if(i)throw l.name==="SyntaxError"?S.from(l,S.ERR_BAD_RESPONSE,this,null,this.response):l}}return t}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:_.classes.FormData,Blob:_.classes.Blob},validateStatus:function(t){return t>=200&&t<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};a.forEach(["delete","get","head","post","put","patch"],e=>{se.headers[e]={}});const Er=a.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),Rr=e=>{const t={};let r,n,s;return e&&e.split(`
`).forEach(function(i){s=i.indexOf(":"),r=i.substring(0,s).trim().toLowerCase(),n=i.substring(s+1).trim(),!(!r||t[r]&&Er[r])&&(r==="set-cookie"?t[r]?t[r].push(n):t[r]=[n]:t[r]=t[r]?t[r]+", "+n:n)}),t},Le=Symbol("internals");function ee(e){return e&&String(e).trim().toLowerCase()}function ce(e){return e===!1||e==null?e:a.isArray(e)?e.map(ce):String(e)}function Ar(e){const t=Object.create(null),r=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let n;for(;n=r.exec(e);)t[n[1]]=n[2];return t}const Tr=e=>/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(e.trim());function be(e,t,r,n,s){if(a.isFunction(n))return n.call(this,t,r);if(s&&(t=r),!!a.isString(t)){if(a.isString(n))return t.indexOf(n)!==-1;if(a.isRegExp(n))return n.test(t)}}function Or(e){return e.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(t,r,n)=>r.toUpperCase()+n)}function xr(e,t){const r=a.toCamelCase(" "+t);["get","set","has"].forEach(n=>{Object.defineProperty(e,n+r,{value:function(s,o,i){return this[n].call(this,t,s,o,i)},configurable:!0})})}let M=class{constructor(t){t&&this.set(t)}set(t,r,n){const s=this;function o(l,h,d){const c=ee(h);if(!c)throw new Error("header name must be a non-empty string");const g=a.findKey(s,c);(!g||s[g]===void 0||d===!0||d===void 0&&s[g]!==!1)&&(s[g||h]=ce(l))}const i=(l,h)=>a.forEach(l,(d,c)=>o(d,c,h));if(a.isPlainObject(t)||t instanceof this.constructor)i(t,r);else if(a.isString(t)&&(t=t.trim())&&!Tr(t))i(Rr(t),r);else if(a.isObject(t)&&a.isIterable(t)){let l={},h,d;for(const c of t){if(!a.isArray(c))throw TypeError("Object iterator must return a key-value pair");l[d=c[0]]=(h=l[d])?a.isArray(h)?[...h,c[1]]:[h,c[1]]:c[1]}i(l,r)}else t!=null&&o(r,t,n);return this}get(t,r){if(t=ee(t),t){const n=a.findKey(this,t);if(n){const s=this[n];if(!r)return s;if(r===!0)return Ar(s);if(a.isFunction(r))return r.call(this,s,n);if(a.isRegExp(r))return r.exec(s);throw new TypeError("parser must be boolean|regexp|function")}}}has(t,r){if(t=ee(t),t){const n=a.findKey(this,t);return!!(n&&this[n]!==void 0&&(!r||be(this,this[n],n,r)))}return!1}delete(t,r){const n=this;let s=!1;function o(i){if(i=ee(i),i){const l=a.findKey(n,i);l&&(!r||be(n,n[l],l,r))&&(delete n[l],s=!0)}}return a.isArray(t)?t.forEach(o):o(t),s}clear(t){const r=Object.keys(this);let n=r.length,s=!1;for(;n--;){const o=r[n];(!t||be(this,this[o],o,t,!0))&&(delete this[o],s=!0)}return s}normalize(t){const r=this,n={};return a.forEach(this,(s,o)=>{const i=a.findKey(n,o);if(i){r[i]=ce(s),delete r[o];return}const l=t?Or(o):String(o).trim();l!==o&&delete r[o],r[l]=ce(s),n[l]=!0}),this}concat(...t){return this.constructor.concat(this,...t)}toJSON(t){const r=Object.create(null);return a.forEach(this,(n,s)=>{n!=null&&n!==!1&&(r[s]=t&&a.isArray(n)?n.join(", "):n)}),r}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(([t,r])=>t+": "+r).join(`
`)}getSetCookie(){return this.get("set-cookie")||[]}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(t){return t instanceof this?t:new this(t)}static concat(t,...r){const n=new this(t);return r.forEach(s=>n.set(s)),n}static accessor(t){const n=(this[Le]=this[Le]={accessors:{}}).accessors,s=this.prototype;function o(i){const l=ee(i);n[l]||(xr(s,i),n[l]=!0)}return a.isArray(t)?t.forEach(o):o(t),this}};M.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]);a.reduceDescriptors(M.prototype,({value:e},t)=>{let r=t[0].toUpperCase()+t.slice(1);return{get:()=>e,set(n){this[r]=n}}});a.freezeMethods(M);function Se(e,t){const r=this||se,n=t||r,s=M.from(n.headers);let o=n.data;return a.forEach(e,function(l){o=l.call(r,o,s.normalize(),t?t.status:void 0)}),s.normalize(),o}function ct(e){return!!(e&&e.__CANCEL__)}function Z(e,t,r){S.call(this,e??"canceled",S.ERR_CANCELED,t,r),this.name="CanceledError"}a.inherits(Z,S,{__CANCEL__:!0});function ut(e,t,r){const n=r.config.validateStatus;!r.status||!n||n(r.status)?e(r):t(new S("Request failed with status code "+r.status,[S.ERR_BAD_REQUEST,S.ERR_BAD_RESPONSE][Math.floor(r.status/100)-4],r.config,r.request,r))}function Cr(e){const t=/^([-+\w]{1,25})(:?\/\/|:)/.exec(e);return t&&t[1]||""}function Ir(e,t){e=e||10;const r=new Array(e),n=new Array(e);let s=0,o=0,i;return t=t!==void 0?t:1e3,function(h){const d=Date.now(),c=n[o];i||(i=d),r[s]=h,n[s]=d;let g=o,E=0;for(;g!==s;)E+=r[g++],g=g%e;if(s=(s+1)%e,s===o&&(o=(o+1)%e),d-i<t)return;const P=c&&d-c;return P?Math.round(E*1e3/P):void 0}}function Pr(e,t){let r=0,n=1e3/t,s,o;const i=(d,c=Date.now())=>{r=c,s=null,o&&(clearTimeout(o),o=null),e(...d)};return[(...d)=>{const c=Date.now(),g=c-r;g>=n?i(d,c):(s=d,o||(o=setTimeout(()=>{o=null,i(s)},n-g)))},()=>s&&i(s)]}const de=(e,t,r=3)=>{let n=0;const s=Ir(50,250);return Pr(o=>{const i=o.loaded,l=o.lengthComputable?o.total:void 0,h=i-n,d=s(h),c=i<=l;n=i;const g={loaded:i,total:l,progress:l?i/l:void 0,bytes:h,rate:d||void 0,estimated:d&&l&&c?(l-i)/d:void 0,event:o,lengthComputable:l!=null,[t?"download":"upload"]:!0};e(g)},r)},Me=(e,t)=>{const r=e!=null;return[n=>t[0]({lengthComputable:r,total:e,loaded:n}),t[1]]},Be=e=>(...t)=>a.asap(()=>e(...t)),vr=_.hasStandardBrowserEnv?((e,t)=>r=>(r=new URL(r,_.origin),e.protocol===r.protocol&&e.host===r.host&&(t||e.port===r.port)))(new URL(_.origin),_.navigator&&/(msie|trident)/i.test(_.navigator.userAgent)):()=>!0,kr=_.hasStandardBrowserEnv?{write(e,t,r,n,s,o){const i=[e+"="+encodeURIComponent(t)];a.isNumber(r)&&i.push("expires="+new Date(r).toGMTString()),a.isString(n)&&i.push("path="+n),a.isString(s)&&i.push("domain="+s),o===!0&&i.push("secure"),document.cookie=i.join("; ")},read(e){const t=document.cookie.match(new RegExp("(^|;\\s*)("+e+")=([^;]*)"));return t?decodeURIComponent(t[3]):null},remove(e){this.write(e,"",Date.now()-864e5)}}:{write(){},read(){return null},remove(){}};function Fr(e){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(e)}function _r(e,t){return t?e.replace(/\/?\/$/,"")+"/"+t.replace(/^\/+/,""):e}function dt(e,t,r){let n=!Fr(t);return e&&(n||r==!1)?_r(e,t):t}const je=e=>e instanceof M?{...e}:e;function V(e,t){t=t||{};const r={};function n(d,c,g,E){return a.isPlainObject(d)&&a.isPlainObject(c)?a.merge.call({caseless:E},d,c):a.isPlainObject(c)?a.merge({},c):a.isArray(c)?c.slice():c}function s(d,c,g,E){if(a.isUndefined(c)){if(!a.isUndefined(d))return n(void 0,d,g,E)}else return n(d,c,g,E)}function o(d,c){if(!a.isUndefined(c))return n(void 0,c)}function i(d,c){if(a.isUndefined(c)){if(!a.isUndefined(d))return n(void 0,d)}else return n(void 0,c)}function l(d,c,g){if(g in t)return n(d,c);if(g in e)return n(void 0,d)}const h={url:o,method:o,data:o,baseURL:i,transformRequest:i,transformResponse:i,paramsSerializer:i,timeout:i,timeoutMessage:i,withCredentials:i,withXSRFToken:i,adapter:i,responseType:i,xsrfCookieName:i,xsrfHeaderName:i,onUploadProgress:i,onDownloadProgress:i,decompress:i,maxContentLength:i,maxBodyLength:i,beforeRedirect:i,transport:i,httpAgent:i,httpsAgent:i,cancelToken:i,socketPath:i,responseEncoding:i,validateStatus:l,headers:(d,c,g)=>s(je(d),je(c),g,!0)};return a.forEach(Object.keys({...e,...t}),function(c){const g=h[c]||s,E=g(e[c],t[c],c);a.isUndefined(E)&&g!==l||(r[c]=E)}),r}const ft=e=>{const t=V({},e);let{data:r,withXSRFToken:n,xsrfHeaderName:s,xsrfCookieName:o,headers:i,auth:l}=t;if(t.headers=i=M.from(i),t.url=it(dt(t.baseURL,t.url,t.allowAbsoluteUrls),e.params,e.paramsSerializer),l&&i.set("Authorization","Basic "+btoa((l.username||"")+":"+(l.password?unescape(encodeURIComponent(l.password)):""))),a.isFormData(r)){if(_.hasStandardBrowserEnv||_.hasStandardBrowserWebWorkerEnv)i.setContentType(void 0);else if(a.isFunction(r.getHeaders)){const h=r.getHeaders(),d=["content-type","content-length"];Object.entries(h).forEach(([c,g])=>{d.includes(c.toLowerCase())&&i.set(c,g)})}}if(_.hasStandardBrowserEnv&&(n&&a.isFunction(n)&&(n=n(t)),n||n!==!1&&vr(t.url))){const h=s&&o&&kr.read(o);h&&i.set(s,h)}return t},Nr=typeof XMLHttpRequest<"u",Ur=Nr&&function(e){return new Promise(function(r,n){const s=ft(e);let o=s.data;const i=M.from(s.headers).normalize();let{responseType:l,onUploadProgress:h,onDownloadProgress:d}=s,c,g,E,P,u;function w(){P&&P(),u&&u(),s.cancelToken&&s.cancelToken.unsubscribe(c),s.signal&&s.signal.removeEventListener("abort",c)}let m=new XMLHttpRequest;m.open(s.method.toUpperCase(),s.url,!0),m.timeout=s.timeout;function x(){if(!m)return;const I=M.from("getAllResponseHeaders"in m&&m.getAllResponseHeaders()),B={data:!l||l==="text"||l==="json"?m.responseText:m.response,status:m.status,statusText:m.statusText,headers:I,config:e,request:m};ut(function(N){r(N),w()},function(N){n(N),w()},B),m=null}"onloadend"in m?m.onloadend=x:m.onreadystatechange=function(){!m||m.readyState!==4||m.status===0&&!(m.responseURL&&m.responseURL.indexOf("file:")===0)||setTimeout(x)},m.onabort=function(){m&&(n(new S("Request aborted",S.ECONNABORTED,e,m)),m=null)},m.onerror=function(k){const B=k&&k.message?k.message:"Network Error",q=new S(B,S.ERR_NETWORK,e,m);q.event=k||null,n(q),m=null},m.ontimeout=function(){let k=s.timeout?"timeout of "+s.timeout+"ms exceeded":"timeout exceeded";const B=s.transitional||at;s.timeoutErrorMessage&&(k=s.timeoutErrorMessage),n(new S(k,B.clarifyTimeoutError?S.ETIMEDOUT:S.ECONNABORTED,e,m)),m=null},o===void 0&&i.setContentType(null),"setRequestHeader"in m&&a.forEach(i.toJSON(),function(k,B){m.setRequestHeader(B,k)}),a.isUndefined(s.withCredentials)||(m.withCredentials=!!s.withCredentials),l&&l!=="json"&&(m.responseType=s.responseType),d&&([E,u]=de(d,!0),m.addEventListener("progress",E)),h&&m.upload&&([g,P]=de(h),m.upload.addEventListener("progress",g),m.upload.addEventListener("loadend",P)),(s.cancelToken||s.signal)&&(c=I=>{m&&(n(!I||I.type?new Z(null,e,m):I),m.abort(),m=null)},s.cancelToken&&s.cancelToken.subscribe(c),s.signal&&(s.signal.aborted?c():s.signal.addEventListener("abort",c)));const U=Cr(s.url);if(U&&_.protocols.indexOf(U)===-1){n(new S("Unsupported protocol "+U+":",S.ERR_BAD_REQUEST,e));return}m.send(o||null)})},Lr=(e,t)=>{const{length:r}=e=e?e.filter(Boolean):[];if(t||r){let n=new AbortController,s;const o=function(d){if(!s){s=!0,l();const c=d instanceof Error?d:this.reason;n.abort(c instanceof S?c:new Z(c instanceof Error?c.message:c))}};let i=t&&setTimeout(()=>{i=null,o(new S(`timeout ${t} of ms exceeded`,S.ETIMEDOUT))},t);const l=()=>{e&&(i&&clearTimeout(i),i=null,e.forEach(d=>{d.unsubscribe?d.unsubscribe(o):d.removeEventListener("abort",o)}),e=null)};e.forEach(d=>d.addEventListener("abort",o));const{signal:h}=n;return h.unsubscribe=()=>a.asap(l),h}},Mr=function*(e,t){let r=e.byteLength;if(r<t){yield e;return}let n=0,s;for(;n<r;)s=n+t,yield e.slice(n,s),n=s},Br=async function*(e,t){for await(const r of jr(e))yield*Mr(r,t)},jr=async function*(e){if(e[Symbol.asyncIterator]){yield*e;return}const t=e.getReader();try{for(;;){const{done:r,value:n}=await t.read();if(r)break;yield n}}finally{await t.cancel()}},De=(e,t,r,n)=>{const s=Br(e,t);let o=0,i,l=h=>{i||(i=!0,n&&n(h))};return new ReadableStream({async pull(h){try{const{done:d,value:c}=await s.next();if(d){l(),h.close();return}let g=c.byteLength;if(r){let E=o+=g;r(E)}h.enqueue(new Uint8Array(c))}catch(d){throw l(d),d}},cancel(h){return l(h),s.return()}},{highWaterMark:2})},qe=64*1024,{isFunction:ae}=a,Dr=(({Request:e,Response:t})=>({Request:e,Response:t}))(a.global),{ReadableStream:He,TextEncoder:ze}=a.global,$e=(e,...t)=>{try{return!!e(...t)}catch{return!1}},qr=e=>{e=a.merge.call({skipUndefined:!0},Dr,e);const{fetch:t,Request:r,Response:n}=e,s=t?ae(t):typeof fetch=="function",o=ae(r),i=ae(n);if(!s)return!1;const l=s&&ae(He),h=s&&(typeof ze=="function"?(u=>w=>u.encode(w))(new ze):async u=>new Uint8Array(await new r(u).arrayBuffer())),d=o&&l&&$e(()=>{let u=!1;const w=new r(_.origin,{body:new He,method:"POST",get duplex(){return u=!0,"half"}}).headers.has("Content-Type");return u&&!w}),c=i&&l&&$e(()=>a.isReadableStream(new n("").body)),g={stream:c&&(u=>u.body)};s&&["text","arrayBuffer","blob","formData","stream"].forEach(u=>{!g[u]&&(g[u]=(w,m)=>{let x=w&&w[u];if(x)return x.call(w);throw new S(`Response type '${u}' is not supported`,S.ERR_NOT_SUPPORT,m)})});const E=async u=>{if(u==null)return 0;if(a.isBlob(u))return u.size;if(a.isSpecCompliantForm(u))return(await new r(_.origin,{method:"POST",body:u}).arrayBuffer()).byteLength;if(a.isArrayBufferView(u)||a.isArrayBuffer(u))return u.byteLength;if(a.isURLSearchParams(u)&&(u=u+""),a.isString(u))return(await h(u)).byteLength},P=async(u,w)=>{const m=a.toFiniteNumber(u.getContentLength());return m??E(w)};return async u=>{let{url:w,method:m,data:x,signal:U,cancelToken:I,timeout:k,onDownloadProgress:B,onUploadProgress:q,responseType:N,headers:Y,withCredentials:K="same-origin",fetchOptions:oe}=ft(u),f=t||fetch;N=N?(N+"").toLowerCase():"text";let p=Lr([U,I&&I.toAbortSignal()],k),y=null;const b=p&&p.unsubscribe&&(()=>{p.unsubscribe()});let T;try{if(q&&d&&m!=="get"&&m!=="head"&&(T=await P(Y,x))!==0){let H=new r(w,{method:"POST",body:x,duplex:"half"}),W;if(a.isFormData(x)&&(W=H.headers.get("content-type"))&&Y.setContentType(W),H.body){const[ye,ie]=Me(T,de(Be(q)));x=De(H.body,qe,ye,ie)}}a.isString(K)||(K=K?"include":"omit");const O=o&&"credentials"in r.prototype,R={...oe,signal:p,method:m.toUpperCase(),headers:Y.normalize().toJSON(),body:x,duplex:"half",credentials:O?K:void 0};y=o&&new r(w,R);let A=await(o?f(y,oe):f(w,R));const F=c&&(N==="stream"||N==="response");if(c&&(B||F&&b)){const H={};["status","statusText","headers"].forEach(ke=>{H[ke]=A[ke]});const W=a.toFiniteNumber(A.headers.get("content-length")),[ye,ie]=B&&Me(W,de(Be(B),!0))||[];A=new n(De(A.body,qe,ye,()=>{ie&&ie(),b&&b()}),H)}N=N||"text";let wt=await g[a.findKey(g,N)||"text"](A,u);return!F&&b&&b(),await new Promise((H,W)=>{ut(H,W,{data:wt,headers:M.from(A.headers),status:A.status,statusText:A.statusText,config:u,request:y})})}catch(O){throw b&&b(),O&&O.name==="TypeError"&&/Load failed|fetch/i.test(O.message)?Object.assign(new S("Network Error",S.ERR_NETWORK,u,y),{cause:O.cause||O}):S.from(O,O&&O.code,u,y)}}},Hr=new Map,pt=e=>{let t=e?e.env:{};const{fetch:r,Request:n,Response:s}=t,o=[n,s,r];let i=o.length,l=i,h,d,c=Hr;for(;l--;)h=o[l],d=c.get(h),d===void 0&&c.set(h,d=l?new Map:qr(t)),c=d;return d};pt();const xe={http:or,xhr:Ur,fetch:{get:pt}};a.forEach(xe,(e,t)=>{if(e){try{Object.defineProperty(e,"name",{value:t})}catch{}Object.defineProperty(e,"adapterName",{value:t})}});const Je=e=>`- ${e}`,zr=e=>a.isFunction(e)||e===null||e===!1,ht={getAdapter:(e,t)=>{e=a.isArray(e)?e:[e];const{length:r}=e;let n,s;const o={};for(let i=0;i<r;i++){n=e[i];let l;if(s=n,!zr(n)&&(s=xe[(l=String(n)).toLowerCase()],s===void 0))throw new S(`Unknown adapter '${l}'`);if(s&&(a.isFunction(s)||(s=s.get(t))))break;o[l||"#"+i]=s}if(!s){const i=Object.entries(o).map(([h,d])=>`adapter ${h} `+(d===!1?"is not supported by the environment":"is not available in the build"));let l=r?i.length>1?`since :
`+i.map(Je).join(`
`):" "+Je(i[0]):"as no adapter specified";throw new S("There is no suitable adapter to dispatch the request "+l,"ERR_NOT_SUPPORT")}return s},adapters:xe};function Ee(e){if(e.cancelToken&&e.cancelToken.throwIfRequested(),e.signal&&e.signal.aborted)throw new Z(null,e)}function Ve(e){return Ee(e),e.headers=M.from(e.headers),e.data=Se.call(e,e.transformRequest),["post","put","patch"].indexOf(e.method)!==-1&&e.headers.setContentType("application/x-www-form-urlencoded",!1),ht.getAdapter(e.adapter||se.adapter,e)(e).then(function(n){return Ee(e),n.data=Se.call(e,e.transformResponse,n),n.headers=M.from(n.headers),n},function(n){return ct(n)||(Ee(e),n&&n.response&&(n.response.data=Se.call(e,e.transformResponse,n.response),n.response.headers=M.from(n.response.headers))),Promise.reject(n)})}const mt="1.12.2",ge={};["object","boolean","number","function","string","symbol"].forEach((e,t)=>{ge[e]=function(n){return typeof n===e||"a"+(t<1?"n ":" ")+e}});const Ke={};ge.transitional=function(t,r,n){function s(o,i){return"[Axios v"+mt+"] Transitional option '"+o+"'"+i+(n?". "+n:"")}return(o,i,l)=>{if(t===!1)throw new S(s(i," has been removed"+(r?" in "+r:"")),S.ERR_DEPRECATED);return r&&!Ke[i]&&(Ke[i]=!0,console.warn(s(i," has been deprecated since v"+r+" and will be removed in the near future"))),t?t(o,i,l):!0}};ge.spelling=function(t){return(r,n)=>(console.warn(`${n} is likely a misspelling of ${t}`),!0)};function $r(e,t,r){if(typeof e!="object")throw new S("options must be an object",S.ERR_BAD_OPTION_VALUE);const n=Object.keys(e);let s=n.length;for(;s-- >0;){const o=n[s],i=t[o];if(i){const l=e[o],h=l===void 0||i(l,o,e);if(h!==!0)throw new S("option "+o+" must be "+h,S.ERR_BAD_OPTION_VALUE);continue}if(r!==!0)throw new S("Unknown option "+o,S.ERR_BAD_OPTION)}}const ue={assertOptions:$r,validators:ge},D=ue.validators;let J=class{constructor(t){this.defaults=t||{},this.interceptors={request:new Ue,response:new Ue}}async request(t,r){try{return await this._request(t,r)}catch(n){if(n instanceof Error){let s={};Error.captureStackTrace?Error.captureStackTrace(s):s=new Error;const o=s.stack?s.stack.replace(/^.+\n/,""):"";try{n.stack?o&&!String(n.stack).endsWith(o.replace(/^.+\n.+\n/,""))&&(n.stack+=`
`+o):n.stack=o}catch{}}throw n}}_request(t,r){typeof t=="string"?(r=r||{},r.url=t):r=t||{},r=V(this.defaults,r);const{transitional:n,paramsSerializer:s,headers:o}=r;n!==void 0&&ue.assertOptions(n,{silentJSONParsing:D.transitional(D.boolean),forcedJSONParsing:D.transitional(D.boolean),clarifyTimeoutError:D.transitional(D.boolean)},!1),s!=null&&(a.isFunction(s)?r.paramsSerializer={serialize:s}:ue.assertOptions(s,{encode:D.function,serialize:D.function},!0)),r.allowAbsoluteUrls!==void 0||(this.defaults.allowAbsoluteUrls!==void 0?r.allowAbsoluteUrls=this.defaults.allowAbsoluteUrls:r.allowAbsoluteUrls=!0),ue.assertOptions(r,{baseUrl:D.spelling("baseURL"),withXsrfToken:D.spelling("withXSRFToken")},!0),r.method=(r.method||this.defaults.method||"get").toLowerCase();let i=o&&a.merge(o.common,o[r.method]);o&&a.forEach(["delete","get","head","post","put","patch","common"],u=>{delete o[u]}),r.headers=M.concat(i,o);const l=[];let h=!0;this.interceptors.request.forEach(function(w){typeof w.runWhen=="function"&&w.runWhen(r)===!1||(h=h&&w.synchronous,l.unshift(w.fulfilled,w.rejected))});const d=[];this.interceptors.response.forEach(function(w){d.push(w.fulfilled,w.rejected)});let c,g=0,E;if(!h){const u=[Ve.bind(this),void 0];for(u.unshift(...l),u.push(...d),E=u.length,c=Promise.resolve(r);g<E;)c=c.then(u[g++],u[g++]);return c}E=l.length;let P=r;for(;g<E;){const u=l[g++],w=l[g++];try{P=u(P)}catch(m){w.call(this,m);break}}try{c=Ve.call(this,P)}catch(u){return Promise.reject(u)}for(g=0,E=d.length;g<E;)c=c.then(d[g++],d[g++]);return c}getUri(t){t=V(this.defaults,t);const r=dt(t.baseURL,t.url,t.allowAbsoluteUrls);return it(r,t.params,t.paramsSerializer)}};a.forEach(["delete","get","head","options"],function(t){J.prototype[t]=function(r,n){return this.request(V(n||{},{method:t,url:r,data:(n||{}).data}))}});a.forEach(["post","put","patch"],function(t){function r(n){return function(o,i,l){return this.request(V(l||{},{method:t,headers:n?{"Content-Type":"multipart/form-data"}:{},url:o,data:i}))}}J.prototype[t]=r(),J.prototype[t+"Form"]=r(!0)});let Jr=class gt{constructor(t){if(typeof t!="function")throw new TypeError("executor must be a function.");let r;this.promise=new Promise(function(o){r=o});const n=this;this.promise.then(s=>{if(!n._listeners)return;let o=n._listeners.length;for(;o-- >0;)n._listeners[o](s);n._listeners=null}),this.promise.then=s=>{let o;const i=new Promise(l=>{n.subscribe(l),o=l}).then(s);return i.cancel=function(){n.unsubscribe(o)},i},t(function(o,i,l){n.reason||(n.reason=new Z(o,i,l),r(n.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(t){if(this.reason){t(this.reason);return}this._listeners?this._listeners.push(t):this._listeners=[t]}unsubscribe(t){if(!this._listeners)return;const r=this._listeners.indexOf(t);r!==-1&&this._listeners.splice(r,1)}toAbortSignal(){const t=new AbortController,r=n=>{t.abort(n)};return this.subscribe(r),t.signal.unsubscribe=()=>this.unsubscribe(r),t.signal}static source(){let t;return{token:new gt(function(s){t=s}),cancel:t}}};function Vr(e){return function(r){return e.apply(null,r)}}function Kr(e){return a.isObject(e)&&e.isAxiosError===!0}const Ce={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511};Object.entries(Ce).forEach(([e,t])=>{Ce[t]=e});function yt(e){const t=new J(e),r=We(J.prototype.request,t);return a.extend(r,J.prototype,t,{allOwnKeys:!0}),a.extend(r,t,null,{allOwnKeys:!0}),r.create=function(s){return yt(V(e,s))},r}const C=yt(se);C.Axios=J;C.CanceledError=Z;C.CancelToken=Jr;C.isCancel=ct;C.VERSION=mt;C.toFormData=me;C.AxiosError=S;C.Cancel=C.CanceledError;C.all=function(t){return Promise.all(t)};C.spread=Vr;C.isAxiosError=Kr;C.mergeConfig=V;C.AxiosHeaders=M;C.formToJSON=e=>lt(a.isHTMLForm(e)?new FormData(e):e);C.getAdapter=ht.getAdapter;C.HttpStatusCode=Ce;C.default=C;const{Axios:Zr,AxiosError:Yr,CanceledError:en,isCancel:tn,CancelToken:rn,VERSION:nn,all:sn,Cancel:on,isAxiosError:an,spread:ln,toFormData:cn,AxiosHeaders:un,HttpStatusCode:dn,formToJSON:fn,getAdapter:pn,mergeConfig:hn}=C,v=C.create({baseURL:"http://127.0.0.1:8000",headers:{"Content-Type":"application/json"}});v.interceptors.request.use(e=>{const t=localStorage.getItem("authToken");return t&&(e.headers.Authorization=`Bearer ${t}`),e});v.interceptors.response.use(e=>e,e=>{var t;return((t=e.response)==null?void 0:t.status)===401&&(localStorage.removeItem("authToken"),localStorage.removeItem("currentUser")),Promise.reject(e)});const mn={async login(e,t){return(await v.post("/api/login",{email:e,password:t})).data},async register(e,t,r,n){return(await v.post("/api/register",{name:e,email:t,password:r,password_confirmation:n})).data},async logout(){return(await v.post("/api/logout")).data},async validateToken(e){return(await v.get("/api/user",{headers:{Authorization:`Bearer ${e}`}})).data}},z={async getMedia(){const e=localStorage.getItem("authToken"),t=localStorage.getItem("currentUser");if(!e||!t)return[{id:1,title:"Sample Game",category:"game",release:"2023-01-01",rating:8.5,platforms:"PC, PS5",genre:"Action, Adventure",path:null,isNew:!1,__order:0},{id:2,title:"Sample Series",category:"series",release:"2023-02-01",rating:9,platforms:"Netflix",genre:"Drama, Thriller",path:null,isNew:!1,isAiring:!0,nextSeason:2,__order:1},{id:3,title:"Sample Movie",category:"movie",release:"2023-03-01",rating:7.5,platforms:"Cinema",genre:"Comedy, Romance",path:null,isNew:!1,__order:2}];try{return(await v.get("/api/media")).data}catch(r){throw console.error("API Error:",r),r}},async saveMedia(e){return(await v.post("/media_relative.json",e)).data},async fetchApiData(e,t){try{return(await v.post("/api/fetch-api",{title:e,category:t})).data}catch(r){return console.error("API fetch failed:",r),{success:!1,error:r.message}}},async searchApi(e,t,r=10){try{return(await v.get("/api/search",{params:{q:e,category:t,limit:r}})).data}catch(n){return console.error("API search failed:",n),[]}},async deleteMediaItem(e){try{return(await v.delete(`/api/media/${e}`)).data}catch(t){throw console.error("API delete failed:",t),t}},async batchAddMediaItems(e){try{return(await v.post("/api/media/batch-add",{items:e})).data}catch(t){throw console.error("API batch add failed:",t),t}},async batchDeleteMediaItems(e){try{return(await v.post("/api/media/batch-delete",{ids:e})).data}catch(t){throw console.error("API batch delete failed:",t),t}},async addMediaItem(e){try{const t={title:e.title,category:e.category,watchlist_type:e.watchlistType,release:e.release,rating:e.rating?Math.round(e.rating):null,count:e.count||0,platforms:e.platforms,genre:e.genre,link:e.link,path:e.path,discovered:e.discovered,spielzeit:e.spielzeit||0,is_airing:e.isAiring||!1,next_season:e.nextSeason,next_season_release:e.nextSeasonRelease,external_id:e.externalId};return(await v.post("/api/media",t)).data}catch(t){throw console.error("API add media failed:",t),t}},async updateMediaItem(e,t){try{const r={title:t.title,category:t.category,watchlist_type:t.watchlistType,release:t.release,rating:t.rating?Math.round(t.rating):null,count:t.count||0,platforms:t.platforms,genre:t.genre,link:t.link,path:t.path,discovered:t.discovered,spielzeit:t.spielzeit||0,is_airing:t.isAiring||!1,next_season:t.nextSeason,next_season_release:t.nextSeasonRelease,external_id:t.externalId};return(await v.put(`/api/media/${e}`,r)).data}catch(r){throw console.error("API update media failed:",r),r}},async uploadImage(e,t=null){try{const r=new FormData;return r.append("file",e),t&&r.append("dst",t),(await v.post("/api/upload-image",r,{headers:{"Content-Type":"multipart/form-data"}})).data}catch(r){throw console.error("Image upload failed:",r),r}},async downloadImageFromUrl(e,t){try{return(await v.post("/api/download-image",{url:e,path:t})).data}catch(r){throw console.error("Image download failed:",r),r}}};class Wr{constructor(){this.isConnected={value:!1},this.listeners=new Map,this.pollingInterval=null,this.lastUpdate=null,this.pollingIntervalMs=2e3}connect(){if(this.pollingInterval)return;const t=localStorage.getItem("authToken"),r=localStorage.getItem("currentUser");if(!t||!r){console.log("Skipping realtime connection - user not authenticated");return}console.log("Starting polling for real-time updates"),this.isConnected.value=!0,this.lastUpdate=new Date,this.pollingInterval=setInterval(()=>{this.checkForUpdates()},this.pollingIntervalMs)}async checkForUpdates(){try{const t=localStorage.getItem("authToken"),r=localStorage.getItem("currentUser");if(!t||!r)return;const n=await fetch("http://127.0.0.1:8000/api/media",{headers:{Authorization:`Bearer ${t}`,"Content-Type":"application/json"}});if(!n.ok){if(n.status===401){this.disconnect();return}throw new Error(`HTTP error! status: ${n.status}`)}const s=await n.json();s&&s.length>0&&(console.log("Polling found updates:",s.length,"items"),this.listeners.forEach((o,i)=>{try{o({type:"media_updated",items:s,count:s.length,timestamp:new Date().toISOString()})}catch(l){console.error(`Error in listener ${i}:`,l)}})),this.lastUpdate=new Date}catch(t){console.error("Polling error:",t)}}addListener(t,r){this.listeners.set(t,r)}removeListener(t){this.listeners.delete(t)}disconnect(){this.pollingInterval&&(clearInterval(this.pollingInterval),this.pollingInterval=null),this.isConnected.value=!1}destroy(){this.disconnect(),this.listeners.clear()}}const Re=new Wr,gn=bt("media",()=>{const e=X(i()),t=X("game"),r=X(""),n=X([]),s=X(!1),o=X(null);function i(){try{const f=localStorage.getItem("authToken"),p=localStorage.getItem("currentUser");if(!f||!p){const y=localStorage.getItem("mediaData");return y?JSON.parse(y):[]}return[]}catch(f){return console.error("Failed to load media from storage:",f),[]}}function l(){try{const f=localStorage.getItem("authToken"),p=localStorage.getItem("currentUser");(!f||!p)&&localStorage.setItem("mediaData",JSON.stringify(e.value))}catch(f){console.error("Failed to save media to storage:",f)}}const h=we(()=>e.value.length),d=we(()=>{const f={};return e.value.forEach(p=>{const y=p.category||"unknown";f[y]=(f[y]||0)+1}),f}),c=we(()=>{let f=[...e.value];if(t.value&&t.value!=="all"&&(f=f.filter(p=>t.value==="watchlist"?p.category==="watchlist"||p.isNew===!0:p.category===t.value)),r.value){const p=r.value.toLowerCase();f=f.filter(y=>{var b,T,O,R;return((b=y.title)==null?void 0:b.toLowerCase().includes(p))||((T=y.description)==null?void 0:T.toLowerCase().includes(p))||((O=y.genre)==null?void 0:O.toLowerCase().includes(p))||((R=y.platforms)==null?void 0:R.toLowerCase().includes(p))})}return n.value.forEach(p=>{p.type==="platform"?f=f.filter(y=>{var b;return(b=y.platforms)==null?void 0:b.toLowerCase().includes(p.value.toLowerCase())}):p.type==="genre"?f=f.filter(y=>{var b;return(b=y.genre)==null?void 0:b.toLowerCase().includes(p.value.toLowerCase())}):p.type==="airing"&&(p.value==="airing"?f=f.filter(y=>y.isAiring===!0):p.value==="finished"&&(f=f.filter(y=>y.isAiring===!1||y.isAiring===null)))}),f});async function g(){var f,p;s.value=!0,o.value=null;try{const y=localStorage.getItem("authToken"),b=localStorage.getItem("currentUser");if(y&&b)try{const T=await z.getMedia();e.value=T||[]}catch(T){console.warn("API load failed for logged in user:",T),e.value=[]}else{const T=i();if(T.length>0)e.value=T;else{const O=await z.getMedia();e.value=O||[],l()}}}catch(y){o.value=((p=(f=y.response)==null?void 0:f.data)==null?void 0:p.message)||y.message||"Failed to load media data",console.error("Failed to load media:",y)}finally{s.value=!1}}function E(f){t.value=f}function P(f){r.value=f}function u(f){n.value.some(y=>y.type===f.type&&y.value===f.value)||n.value.push(f)}function w(f){n.value=n.value.filter(p=>!(p.type===f.type&&p.value===f.value))}function m(){n.value=[]}async function x(f){var p,y,b;try{const T=localStorage.getItem("authToken"),O=localStorage.getItem("currentUser");if(T&&O)try{const R=await z.addMediaItem(f);return await g(),R}catch(R){if(console.error("API save failed for logged in user:",R),((p=R.response)==null?void 0:p.status)===409){const A=((b=(y=R.response)==null?void 0:y.data)==null?void 0:b.error)||"Ein Eintrag mit diesem Titel und dieser Kategorie existiert bereits.";throw o.value=A,new Error(A)}throw R}else{const R={id:Date.now(),...f,__order:e.value.length};return e.value.push(R),l(),R}}catch(T){throw o.value||(o.value=T.message||"Failed to add media item"),T}}async function U(f,p){var y,b,T;try{const O=localStorage.getItem("authToken"),R=localStorage.getItem("currentUser");if(O&&R)try{const A=await z.updateMediaItem(f,p);return await g(),A}catch(A){if(console.error("API update failed for logged in user:",A),((y=A.response)==null?void 0:y.status)===409){const F=((T=(b=A.response)==null?void 0:b.data)==null?void 0:T.error)||"Ein Eintrag mit diesem Titel und dieser Kategorie existiert bereits.";throw o.value=F,new Error(F)}throw A}else{const A=e.value.findIndex(F=>F.id===f);if(A!==-1)return e.value[A]={...e.value[A],...p},l(),e.value[A];throw new Error("Media item not found")}}catch(O){throw o.value||(o.value=O.message||"Failed to update media item"),O}}async function I(f){try{const p=localStorage.getItem("authToken"),y=localStorage.getItem("currentUser");if(p&&y)try{return await z.deleteMediaItem(f),await g(),!0}catch(b){throw console.error("API delete failed for logged in user:",b),b}else{const b=e.value.findIndex(T=>T.id===f);if(b!==-1)return e.value.splice(b,1),l(),!0;throw new Error("Media item not found")}}catch(p){throw o.value=p.message||"Failed to delete media item",p}}async function k(f){var p,y,b;try{const T=localStorage.getItem("authToken"),O=localStorage.getItem("currentUser");if(T&&O)try{const R=await z.batchAddMediaItems(f);return await g(),R}catch(R){if(console.error("API batch add failed for logged in user:",R),((p=R.response)==null?void 0:p.status)===400&&((b=(y=R.response)==null?void 0:y.data)!=null&&b.errors)){const A=R.response.data.errors.filter(F=>F.error&&F.error.includes("existiert bereits"));if(A.length>0){const F=`${A.length} Einträge konnten nicht hinzugefügt werden, da sie bereits existieren.`;throw o.value=F,new Error(F)}}throw R}else{const R=f.map((A,F)=>({id:Date.now()+F,...A,__order:e.value.length+F}));return e.value.push(...R),l(),{success:!0,stats:{created:R.length,failed:0,errors:[]}}}}catch(T){throw o.value||(o.value=T.message||"Failed to add media items"),T}}async function B(f){try{const p=localStorage.getItem("authToken"),y=localStorage.getItem("currentUser");if(p&&y)try{return await z.batchDeleteMediaItems(f),await g(),!0}catch(b){throw console.error("API batch delete failed for logged in user:",b),b}else return e.value=e.value.filter(b=>!f.includes(b.id)),l(),!0}catch(p){throw o.value=p.message||"Failed to delete media items",p}}async function q(){try{const f=localStorage.getItem("authToken"),p=localStorage.getItem("currentUser");f&&p?await z.saveMedia(e.value):l()}catch(f){console.error("Failed to save media:",f)}}function N(){o.value=null}function Y(f){if(console.log("Processing real-time update:",f),f.type==="media_updated"&&f.items)f.items.forEach(p=>{const y=e.value.findIndex(b=>b.id===p.id);y!==-1?e.value[y]={...e.value[y],...p}:e.value.push(p)});else if(f.action==="created"||f.action==="updated"){const p=f.item,y=e.value.findIndex(b=>b.id===p.id);y!==-1?e.value[y]={...e.value[y],...p}:e.value.push(p)}else if(f.action==="deleted"){const p=e.value.findIndex(y=>y.id===f.id);p!==-1&&e.value.splice(p,1)}l()}function K(){const f=localStorage.getItem("authToken"),p=localStorage.getItem("currentUser");if(!f||!p){console.log("Skipping realtime initialization - user not authenticated");return}try{Re.addListener("media-store",Y),Re.connect()}catch(y){console.error("Failed to initialize realtime updates:",y)}}function oe(){Re.removeListener("media-store")}return{mediaData:e,currentCategory:t,searchQuery:r,activeFilters:n,loading:s,error:o,totalItems:h,categoryCounts:d,filteredMedia:c,loadMedia:g,setCategory:E,setSearchQuery:P,addFilter:u,removeFilter:w,clearFilters:m,addMediaItem:x,updateMediaItem:U,deleteMediaItem:I,batchAddMediaItems:k,batchDeleteMediaItems:B,saveMedia:q,clearError:N,initializeRealtimeUpdates:K,cleanupRealtimeUpdates:oe}});export{mn as a,z as m,gn as u};
