import{_ as K,b as D,e as a,z as Z,n as q,B as G,t as f,k as c,m as u,v as y,a as Q,r as S,i as W,c as b,C as X,u as $,o as N}from"./index-CjBXyH3Y.js";import{u as aa}from"./media-CM9D7_Re.js";import{S as ta}from"./Sidebar-BIvwtO3x.js";const ea={name:"Profile",components:{Sidebar:ta},setup(){const m=$(),t=Q(),p=aa(),e=S(null),s=W({firstName:"",lastName:"",displayName:"",email:"",bio:"",avatar:"",language:"en",timezone:"UTC",dateFormat:"MM/DD/YYYY"}),C=b(()=>p.totalItems),g=S(!1),o=S(!1),k=b(()=>t.isLoggedIn),Y=b(()=>t.isAdmin),A=b(()=>t.userName),M=()=>{g.value=!g.value},T=()=>{o.value=!o.value},x=()=>{o.value=!1},w=()=>{m.push("/")},F=()=>{m.push("/statistics")},I=()=>{m.push("/calendar")},U=()=>{m.push("/features")},h=async()=>{await t.logout(),m.push("/")},L=()=>{p.loadMedia()},O=()=>{var i,n;const l=((i=s.firstName)==null?void 0:i.charAt(0))||"U",r=((n=s.lastName)==null?void 0:n.charAt(0))||"S";return(l+r).toUpperCase()},z=()=>{var l;(l=e.value)==null||l.click()},B=l=>{const r=l.target.files[0];if(r){const i=new FileReader;i.onload=n=>{s.avatar=n.target.result},i.readAsDataURL(r)}},E=()=>{const l={profile:s,media:p.mediaData,settings:{language:s.language,timezone:s.timezone,dateFormat:s.dateFormat},exportDate:new Date().toISOString()},r=new Blob([JSON.stringify(l,null,2)],{type:"application/json"}),i=URL.createObjectURL(r),n=document.createElement("a");n.href=i,n.download=`media-library-backup-${new Date().toISOString().split("T")[0]}.json`,n.click(),URL.revokeObjectURL(i)},R=()=>{const l=document.createElement("input");l.type="file",l.accept=".json",l.onchange=r=>{const i=r.target.files[0];if(i){const n=new FileReader;n.onload=H=>{try{const d=JSON.parse(H.target.result);d.profile&&Object.assign(s,d.profile),d.media&&(p.mediaData=d.media,p.saveMedia()),d.settings&&Object.assign(s,d.settings),v()}catch(d){console.error("Failed to import data:",d)}},n.readAsText(i)}},l.click()},j=()=>{const l={profile:s,media:p.mediaData,settings:{language:s.language,timezone:s.timezone,dateFormat:s.dateFormat},backupDate:new Date().toISOString()},r=`backup_${Date.now()}`;localStorage.setItem(r,JSON.stringify(l)),alert("Backup created successfully!")},V=()=>{alert("Cache cleared successfully!")},P=()=>{confirm("Are you sure you want to reset all settings?")&&(Object.assign(s,{firstName:"",lastName:"",displayName:"",email:"",bio:"",avatar:"",language:"en",timezone:"UTC",dateFormat:"MM/DD/YYYY"}),v())},_=()=>{confirm("Are you sure you want to clear all data? This cannot be undone!")&&(localStorage.clear(),m.push("/"))},v=()=>{localStorage.setItem("profileData",JSON.stringify(s))},J=()=>{v(),alert("All changes saved successfully!")};return X(()=>{var r,i;const l=localStorage.getItem("profileData");if(l)try{const n=JSON.parse(l);Object.assign(s,n)}catch(n){console.error("Failed to load profile data:",n)}t.user&&(s.firstName=((r=t.user.name)==null?void 0:r.split(" ")[0])||"",s.lastName=((i=t.user.name)==null?void 0:i.split(" ").slice(1).join(" "))||"",s.email=t.user.email||"")}),{avatarInput:e,profileData:s,totalItems:C,sidebarCollapsed:g,mobileSidebarOpen:o,isLoggedIn:k,isAdmin:Y,userName:A,toggleSidebar:M,toggleMobileSidebar:T,closeMobileSidebar:x,navigateToLibrary:w,navigateToStatistics:F,navigateToCalendar:I,navigateToFeatures:U,logout:h,refreshStats:L,getInitials:O,changeAvatar:z,handleAvatarChange:B,exportData:E,importData:R,createBackup:j,clearCache:V,resetSettings:P,clearAllData:_,saveAllChanges:J}}},oa={class:"vue-app"},sa={class:"main-content"},la={class:"main-header"},na={class:"header-left"},ia={class:"header-right"},ra={class:"content-area"},da={class:"profile-container"},ca={class:"profile-header"},ma={class:"profile-avatar-section"},pa=["src"],ga={key:1,class:"avatar-initials"},fa={class:"profile-info-header"},ua={class:"profile-stats"},ba={class:"stat-item"},va={class:"stat-number"},Da={class:"stat-item"},ya={class:"stat-number"},Sa={class:"settings-sections"},Na={class:"settings-section"},Ca={class:"section-content"},ka={class:"form-row"},Ya={class:"form-group"},Aa={class:"form-group"},Ma={class:"form-group"},Ta={class:"form-group"},xa={class:"form-group"},wa={class:"settings-section"},Fa={class:"section-content"},Ia={class:"form-row"},Ua={class:"form-group"},ha={class:"form-group"},La={class:"form-row"},Oa={class:"form-group"},za={class:"settings-section"},Ba={class:"section-content"},Ea={class:"data-actions"},Ra={class:"settings-section danger-zone"},ja={class:"section-content"},Va={class:"danger-actions"},Pa={class:"floating-save"};function _a(m,t,p,e,s,C){const g=G("Sidebar");return N(),D("div",oa,[a("div",{class:q(["mobile-overlay",{show:e.mobileSidebarOpen}]),onClick:t[0]||(t[0]=(...o)=>e.closeMobileSidebar&&e.closeMobileSidebar(...o))},null,2),Z(g,{collapsed:e.sidebarCollapsed,"mobile-open":e.mobileSidebarOpen,"is-logged-in":e.isLoggedIn,"is-admin":e.isAdmin,"user-name":e.userName,"current-category":"profile","category-counts":{},platforms:[],genres:[],categories:[],onToggle:e.toggleSidebar,onNavigateToLibrary:e.navigateToLibrary,onNavigateToStatistics:e.navigateToStatistics,onNavigateToCalendar:e.navigateToCalendar,onNavigateToFeatures:e.navigateToFeatures,onLogout:e.logout},null,8,["collapsed","mobile-open","is-logged-in","is-admin","user-name","onToggle","onNavigateToLibrary","onNavigateToStatistics","onNavigateToCalendar","onNavigateToFeatures","onLogout"]),a("div",sa,[a("header",la,[a("div",na,[a("button",{class:"mobile-sidebar-toggle",onClick:t[1]||(t[1]=(...o)=>e.toggleMobileSidebar&&e.toggleMobileSidebar(...o))},"☰"),t[20]||(t[20]=a("h1",{class:"page-title"},"Profile Settings",-1))]),a("div",ia,[a("button",{class:"refresh-stats-btn",onClick:t[2]||(t[2]=(...o)=>e.refreshStats&&e.refreshStats(...o)),title:"Refresh statistics"},[...t[21]||(t[21]=[a("span",{class:"refresh-icon"},"🔄",-1)])])])]),a("main",ra,[a("div",da,[a("div",ca,[a("div",ma,[a("div",{class:"profile-avatar-large",onClick:t[3]||(t[3]=(...o)=>e.changeAvatar&&e.changeAvatar(...o))},[e.profileData.avatar?(N(),D("img",{key:0,src:e.profileData.avatar,alt:"Profile Picture"},null,8,pa)):(N(),D("span",ga,f(e.getInitials()),1))]),a("input",{type:"file",ref:"avatarInput",accept:"image/*",onChange:t[4]||(t[4]=(...o)=>e.handleAvatarChange&&e.handleAvatarChange(...o)),style:{display:"none"}},null,544)]),a("div",fa,[a("h2",null,f(e.profileData.displayName||e.profileData.firstName+" "+e.profileData.lastName||"User"),1),a("p",null,f(e.profileData.email||"user@example.com"),1),a("div",ua,[a("div",ba,[a("span",va,f(e.totalItems),1),t[22]||(t[22]=a("span",{class:"stat-label"},"Total Items",-1))]),a("div",Da,[a("span",ya,f(new Date().getFullYear()),1),t[23]||(t[23]=a("span",{class:"stat-label"},"Member Since",-1))])])])]),a("div",Sa,[a("div",Na,[t[29]||(t[29]=a("div",{class:"section-header"},[a("h3",null,"Personal Information"),a("p",null,"Manage your personal details and account information")],-1)),a("div",Ca,[a("div",ka,[a("div",Ya,[t[24]||(t[24]=a("label",{for:"firstName"},"First Name",-1)),c(a("input",{type:"text",id:"firstName","onUpdate:modelValue":t[5]||(t[5]=o=>e.profileData.firstName=o),placeholder:"Enter your first name"},null,512),[[u,e.profileData.firstName]])]),a("div",Aa,[t[25]||(t[25]=a("label",{for:"lastName"},"Last Name",-1)),c(a("input",{type:"text",id:"lastName","onUpdate:modelValue":t[6]||(t[6]=o=>e.profileData.lastName=o),placeholder:"Enter your last name"},null,512),[[u,e.profileData.lastName]])])]),a("div",Ma,[t[26]||(t[26]=a("label",{for:"displayName"},"Display Name",-1)),c(a("input",{type:"text",id:"displayName","onUpdate:modelValue":t[7]||(t[7]=o=>e.profileData.displayName=o),placeholder:"How others see your name"},null,512),[[u,e.profileData.displayName]])]),a("div",Ta,[t[27]||(t[27]=a("label",{for:"email"},"Email Address",-1)),c(a("input",{type:"email",id:"email","onUpdate:modelValue":t[8]||(t[8]=o=>e.profileData.email=o),placeholder:"your.email@example.com"},null,512),[[u,e.profileData.email]])]),a("div",xa,[t[28]||(t[28]=a("label",{for:"bio"},"Bio",-1)),c(a("textarea",{id:"bio","onUpdate:modelValue":t[9]||(t[9]=o=>e.profileData.bio=o),placeholder:"Tell us about yourself...",rows:"4"},null,512),[[u,e.profileData.bio]])])])]),a("div",wa,[t[37]||(t[37]=a("div",{class:"section-header"},[a("h3",null,"Preferences"),a("p",null,"Customize your application experience")],-1)),a("div",Fa,[a("div",Ia,[a("div",Ua,[t[31]||(t[31]=a("label",{for:"language"},"Language",-1)),c(a("select",{id:"language","onUpdate:modelValue":t[10]||(t[10]=o=>e.profileData.language=o)},[...t[30]||(t[30]=[a("option",{value:"en"},"English",-1),a("option",{value:"de"},"Deutsch",-1),a("option",{value:"fr"},"Français",-1),a("option",{value:"es"},"Español",-1)])],512),[[y,e.profileData.language]])]),a("div",ha,[t[33]||(t[33]=a("label",{for:"timezone"},"Timezone",-1)),c(a("select",{id:"timezone","onUpdate:modelValue":t[11]||(t[11]=o=>e.profileData.timezone=o)},[...t[32]||(t[32]=[a("option",{value:"UTC"},"UTC",-1),a("option",{value:"Europe/Berlin"},"Europe/Berlin",-1),a("option",{value:"America/New_York"},"America/New_York",-1),a("option",{value:"America/Los_Angeles"},"America/Los_Angeles",-1)])],512),[[y,e.profileData.timezone]])])]),a("div",La,[a("div",Oa,[t[35]||(t[35]=a("label",{for:"dateFormat"},"Date Format",-1)),c(a("select",{id:"dateFormat","onUpdate:modelValue":t[12]||(t[12]=o=>e.profileData.dateFormat=o)},[...t[34]||(t[34]=[a("option",{value:"MM/DD/YYYY"},"MM/DD/YYYY",-1),a("option",{value:"DD/MM/YYYY"},"DD/MM/YYYY",-1),a("option",{value:"YYYY-MM-DD"},"YYYY-MM-DD",-1)])],512),[[y,e.profileData.dateFormat]])]),t[36]||(t[36]=a("div",{class:"form-group"},null,-1))])])]),a("div",za,[t[42]||(t[42]=a("div",{class:"section-header"},[a("h3",null,"Data Management"),a("p",null,"Manage your data and account")],-1)),a("div",Ba,[a("div",Ea,[a("button",{class:"data-btn export-btn",onClick:t[13]||(t[13]=(...o)=>e.exportData&&e.exportData(...o))},[...t[38]||(t[38]=[a("span",{class:"btn-icon"},"📦",-1),a("span",{class:"btn-text"},"Export All Data",-1),a("span",{class:"btn-description"},"Download your complete media library",-1)])]),a("button",{class:"data-btn import-btn",onClick:t[14]||(t[14]=(...o)=>e.importData&&e.importData(...o))},[...t[39]||(t[39]=[a("span",{class:"btn-icon"},"📥",-1),a("span",{class:"btn-text"},"Import Data",-1),a("span",{class:"btn-description"},"Import data from a backup file",-1)])]),a("button",{class:"data-btn backup-btn",onClick:t[15]||(t[15]=(...o)=>e.createBackup&&e.createBackup(...o))},[...t[40]||(t[40]=[a("span",{class:"btn-icon"},"💾",-1),a("span",{class:"btn-text"},"Create Backup",-1),a("span",{class:"btn-description"},"Create a local backup of your data",-1)])]),a("button",{class:"data-btn cache-btn",onClick:t[16]||(t[16]=(...o)=>e.clearCache&&e.clearCache(...o))},[...t[41]||(t[41]=[a("span",{class:"btn-icon"},"🗑️",-1),a("span",{class:"btn-text"},"Clear Cache",-1),a("span",{class:"btn-description"},"Clear temporary files and cache",-1)])])])])]),a("div",Ra,[t[45]||(t[45]=a("div",{class:"section-header"},[a("h3",null,"Danger Zone"),a("p",null,"Irreversible and destructive actions")],-1)),a("div",ja,[a("div",Va,[a("button",{class:"danger-btn reset-btn",onClick:t[17]||(t[17]=(...o)=>e.resetSettings&&e.resetSettings(...o))},[...t[43]||(t[43]=[a("span",{class:"btn-icon"},"🔄",-1),a("span",{class:"btn-text"},"Reset All Settings",-1),a("span",{class:"btn-description"},"Reset all settings to default values",-1)])]),a("button",{class:"danger-btn clear-btn",onClick:t[18]||(t[18]=(...o)=>e.clearAllData&&e.clearAllData(...o))},[...t[44]||(t[44]=[a("span",{class:"btn-icon"},"🗑️",-1),a("span",{class:"btn-text"},"Clear All Data",-1),a("span",{class:"btn-description"},"Permanently delete all your data",-1)])])])])])])])])]),a("div",Pa,[a("button",{class:"save-all-btn",onClick:t[19]||(t[19]=(...o)=>e.saveAllChanges&&e.saveAllChanges(...o))}," Save All Changes ")])])}const Za=K(ea,[["render",_a],["__scopeId","data-v-7540e8dc"]]);export{Za as default};
