import{_ as w,a as v,i as L,r as m,b as g,e,j as c,f as y,k as i,m as d,t as f,o as u,c as G}from"./index-D3koD6AM.js";const M={name:"LoginModal",emits:["close","success"],setup(p,{emit:s}){const t=v(),o=L({email:"",password:""}),n=m(!1),r=m("");return{form:o,loading:n,error:r,handleLogin:async()=>{var b;console.log("ðŸ” LOGIN DEBUG: Starting login process"),console.log("ðŸ” LOGIN DEBUG: Environment check:",{isDev:!1,mode:"production",viteApiUrl:"https://teabubble.attrebi.ch",currentUrl:window.location.href,userAgent:navigator.userAgent}),n.value=!0,r.value="",console.log("ðŸ” LOGIN DEBUG: Form data:",{email:o.email,passwordLength:o.password.length,timestamp:new Date().toISOString()});try{console.log("ðŸ” LOGIN DEBUG: Calling authStore.login...");const a=await t.login(o.email,o.password);console.log("ðŸ” LOGIN DEBUG: Login result:",{success:a.success,hasUser:!!a.user,hasToken:!!a.token,error:a.error}),a.success?(console.log("ðŸ” LOGIN DEBUG: Login successful, emitting success event"),s("success",a)):(console.log("ðŸ” LOGIN DEBUG: Login failed, setting error:",a.error),r.value=a.error)}catch(a){console.log("ðŸ” LOGIN DEBUG: Login exception caught:",{message:a.message,name:a.name,code:a.code,stack:a.stack,response:(b=a.response)==null?void 0:b.data}),r.value=a.message||"Login failed"}finally{console.log("ðŸ” LOGIN DEBUG: Login process completed, setting loading to false"),n.value=!1}},closeModal:()=>{s("close")}}}},U={class:"form-group"},k=["disabled"],_={class:"form-group"},D=["disabled"],E={key:0,class:"error-message"},B={class:"modal-buttons"},I=["disabled"],N=["disabled"];function h(p,s,t,o,n,r){return u(),g("div",{class:"modal",onClick:s[5]||(s[5]=(...l)=>o.closeModal&&o.closeModal(...l))},[e("div",{class:"modal-content auth-modal",onClick:s[4]||(s[4]=c(()=>{},["stop"]))},[s[8]||(s[8]=e("h2",null,"Login",-1)),e("form",{onSubmit:s[3]||(s[3]=c((...l)=>o.handleLogin&&o.handleLogin(...l),["prevent"]))},[e("div",U,[s[6]||(s[6]=e("label",{for:"email"},"Email:",-1)),i(e("input",{type:"email",id:"email","onUpdate:modelValue":s[0]||(s[0]=l=>o.form.email=l),required:"",disabled:o.loading},null,8,k),[[d,o.form.email]])]),e("div",_,[s[7]||(s[7]=e("label",{for:"password"},"Password:",-1)),i(e("input",{type:"password",id:"password","onUpdate:modelValue":s[1]||(s[1]=l=>o.form.password=l),required:"",disabled:o.loading},null,8,D),[[d,o.form.password]])]),o.error?(u(),g("div",E,f(o.error),1)):y("",!0),e("div",B,[e("button",{type:"submit",disabled:o.loading},f(o.loading?"Logging in...":"Login"),9,I),e("button",{type:"button",onClick:s[2]||(s[2]=(...l)=>o.closeModal&&o.closeModal(...l)),disabled:o.loading}," Cancel ",8,N)])],32)])])}const Q=w(M,[["render",h],["__scopeId","data-v-97221012"]]),R={name:"RegisterModal",emits:["close","success"],setup(p,{emit:s}){const t=v(),o=L({name:"",email:"",password:"",passwordConfirm:""}),n=m(!1),r=m(""),l=G(()=>o.name&&o.email&&o.password&&o.passwordConfirm&&o.password===o.passwordConfirm&&o.password.length>=8);return{form:o,loading:n,error:r,isFormValid:l,handleRegister:async()=>{if(!l.value){r.value="Please fill in all fields and ensure passwords match";return}n.value=!0,r.value="";try{const a=await t.register(o.name,o.email,o.password,o.passwordConfirm);a.success?s("success"):r.value=a.error}catch(a){r.value=a.message||"Registration failed"}finally{n.value=!1}},closeModal:()=>{s("close")}}}},O={class:"form-group"},S=["disabled"],V={class:"form-group"},x=["disabled"],q={class:"form-group"},A=["disabled"],P={class:"form-group"},F=["disabled"],T={key:0,class:"error-message"},j={class:"modal-buttons"},z=["disabled"],H=["disabled"];function J(p,s,t,o,n,r){return u(),g("div",{class:"modal",onClick:s[7]||(s[7]=(...l)=>o.closeModal&&o.closeModal(...l))},[e("div",{class:"modal-content auth-modal",onClick:s[6]||(s[6]=c(()=>{},["stop"]))},[s[12]||(s[12]=e("h2",null,"Register",-1)),e("form",{onSubmit:s[5]||(s[5]=c((...l)=>o.handleRegister&&o.handleRegister(...l),["prevent"]))},[e("div",O,[s[8]||(s[8]=e("label",{for:"name"},"Name:",-1)),i(e("input",{type:"text",id:"name","onUpdate:modelValue":s[0]||(s[0]=l=>o.form.name=l),required:"",disabled:o.loading},null,8,S),[[d,o.form.name]])]),e("div",V,[s[9]||(s[9]=e("label",{for:"email"},"Email:",-1)),i(e("input",{type:"email",id:"email","onUpdate:modelValue":s[1]||(s[1]=l=>o.form.email=l),required:"",disabled:o.loading},null,8,x),[[d,o.form.email]])]),e("div",q,[s[10]||(s[10]=e("label",{for:"password"},"Password:",-1)),i(e("input",{type:"password",id:"password","onUpdate:modelValue":s[2]||(s[2]=l=>o.form.password=l),required:"",minlength:"8",disabled:o.loading},null,8,A),[[d,o.form.password]])]),e("div",P,[s[11]||(s[11]=e("label",{for:"passwordConfirm"},"Confirm Password:",-1)),i(e("input",{type:"password",id:"passwordConfirm","onUpdate:modelValue":s[3]||(s[3]=l=>o.form.passwordConfirm=l),required:"",minlength:"8",disabled:o.loading},null,8,F),[[d,o.form.passwordConfirm]])]),o.error?(u(),g("div",T,f(o.error),1)):y("",!0),e("div",j,[e("button",{type:"submit",disabled:o.loading||!o.isFormValid},f(o.loading?"Registering...":"Register"),9,z),e("button",{type:"button",onClick:s[4]||(s[4]=(...l)=>o.closeModal&&o.closeModal(...l)),disabled:o.loading}," Cancel ",8,H)])],32)])])}const W=w(R,[["render",J],["__scopeId","data-v-d5de55ea"]]);export{Q as L,W as R};
