import{_ as T,c as r,a as o,b as y,t as u,n as j,w as A,o as a,r as O,d as S,e as b,v as h,f as _,g as Se,h as B,F as P,i as D,j as Ce,k as z,l as Me,m as E,p as Ie,q as xe,s as Ae,u as Le}from"./index-CIlU58Bg.js";import{u as q}from"./auth-zMMZS57f.js";import{m as Te,u as Re}from"./media-B6mVtcKx.js";const Ue={name:"MediaItem",props:{item:{type:Object,required:!0}},emits:["edit","delete"],computed:{showWatchlistTag(){return this.item.category==="watchlist"||this.item.isNew===!0}},methods:{getImageUrl(g){return g.startsWith("http")||g.startsWith("/")?g:`/storage/${g}`},handleImageError(g){var e;g.target.style.display="none",(e=g.target.nextElementSibling)==null||e.classList.add("show")},formatDate(g){return g?new Date(g).toLocaleDateString():""},showDetails(){console.log("Show details for:",this.item.title)},editItem(){this.$emit("edit",this.item)},deleteItem(){this.$emit("delete",this.item)},getTypeTagText(){var g,e,n;if(this.item.watchlistType)return this.item.watchlistType.charAt(0).toUpperCase()+this.item.watchlistType.slice(1);if(this.item.genre){const t=this.item.genre.toLowerCase();if(t.includes("game")||t.includes("gaming")||(g=this.item.platforms)!=null&&g.toLowerCase().includes("steam")||(e=this.item.platforms)!=null&&e.toLowerCase().includes("ps")||(n=this.item.platforms)!=null&&n.toLowerCase().includes("xbox"))return"Game";if(t.includes("series")||t.includes("tv")||t.includes("episode")||this.item.isAiring)return"Series";if(t.includes("movie")||t.includes("film")||t.includes("cinema"))return"Movie"}if(this.item.platforms){const t=this.item.platforms.toLowerCase();if(t.includes("steam")||t.includes("ps")||t.includes("xbox")||t.includes("nintendo")||t.includes("pc"))return"Game";if(t.includes("netflix")||t.includes("hulu")||t.includes("disney")||t.includes("hbo"))return"Series";if(t.includes("cinema")||t.includes("theater"))return"Movie"}return"Media"},getTypeTagClass(){return`type-${this.getTypeTagText().toLowerCase()}`}}},Ve={class:"media-image"},Ee=["src","alt"],Pe={key:1,class:"no-image"},De={class:"media-info"},Fe={class:"media-title"},Ne={class:"media-meta"},ze={key:0,class:"media-release"},Be={key:1,class:"media-rating"},je={key:0,class:"media-platforms"},Ge={key:1,class:"media-genre"},Oe={key:2,class:"media-airing"},qe={key:0},We={key:3,class:"watchlist-type-tag"},Qe={class:"media-actions"};function Je(g,e,n,t,f,m){return a(),r("div",{class:"media-item",onClick:e[3]||(e[3]=(...s)=>m.showDetails&&m.showDetails(...s))},[o("div",Ve,[n.item.path?(a(),r("img",{key:0,src:m.getImageUrl(n.item.path),alt:n.item.title,onError:e[0]||(e[0]=(...s)=>m.handleImageError&&m.handleImageError(...s))},null,40,Ee)):(a(),r("div",Pe,[...e[4]||(e[4]=[o("span",{class:"no-image-icon"},"📁",-1)])]))]),o("div",De,[o("h3",Fe,u(n.item.title),1),o("div",Ne,[n.item.release?(a(),r("span",ze,u(m.formatDate(n.item.release)),1)):y("",!0),n.item.rating?(a(),r("span",Be,u("★".repeat(Math.max(0,Math.min(5,Math.floor(n.item.rating)))))+u("☆".repeat(Math.max(0,5-Math.max(0,Math.min(5,Math.floor(n.item.rating)))))),1)):y("",!0)]),n.item.platforms?(a(),r("div",je,u(n.item.platforms),1)):y("",!0),n.item.genre?(a(),r("div",Ge,u(n.item.genre),1)):y("",!0),n.item.isAiring?(a(),r("div",Oe,[e[5]||(e[5]=o("span",{class:"airing-badge"},"Airing",-1)),n.item.nextSeason?(a(),r("span",qe,"S"+u(n.item.nextSeason),1)):y("",!0)])):y("",!0),m.showWatchlistTag?(a(),r("div",We,[o("span",{class:j(["type-tag",m.getTypeTagClass()])},u(m.getTypeTagText()),3)])):y("",!0)]),o("div",Qe,[o("button",{class:"action-btn edit-btn",onClick:e[1]||(e[1]=A((...s)=>m.editItem&&m.editItem(...s),["stop"])),title:"Edit"}," ✏️ "),o("button",{class:"action-btn delete-btn",onClick:e[2]||(e[2]=A((...s)=>m.deleteItem&&m.deleteItem(...s),["stop"])),title:"Delete"}," 🗑️ ")])])}const Ze=T(Ue,[["render",Je],["__scopeId","data-v-da58e27d"]]),Ke={name:"LoginModal",emits:["close","success"],setup(g,{emit:e}){const n=q(),t=O({email:"",password:""}),f=S(!1),m=S("");return{form:t,loading:f,error:m,handleLogin:async()=>{f.value=!0,m.value="";try{const k=await n.login(t.email,t.password);k.success?e("success"):m.value=k.error}catch(k){m.value=k.message||"Login failed"}finally{f.value=!1}},closeModal:()=>{e("close")}}}},Xe={class:"form-group"},He=["disabled"],Ye={class:"form-group"},$e=["disabled"],et={key:0,class:"error-message"},tt={class:"modal-buttons"},ot=["disabled"],st=["disabled"];function it(g,e,n,t,f,m){return a(),r("div",{class:"modal",onClick:e[5]||(e[5]=(...s)=>t.closeModal&&t.closeModal(...s))},[o("div",{class:"modal-content auth-modal",onClick:e[4]||(e[4]=A(()=>{},["stop"]))},[e[8]||(e[8]=o("h2",null,"Login",-1)),o("form",{onSubmit:e[3]||(e[3]=A((...s)=>t.handleLogin&&t.handleLogin(...s),["prevent"]))},[o("div",Xe,[e[6]||(e[6]=o("label",{for:"email"},"Email:",-1)),b(o("input",{type:"email",id:"email","onUpdate:modelValue":e[0]||(e[0]=s=>t.form.email=s),required:"",disabled:t.loading},null,8,He),[[h,t.form.email]])]),o("div",Ye,[e[7]||(e[7]=o("label",{for:"password"},"Password:",-1)),b(o("input",{type:"password",id:"password","onUpdate:modelValue":e[1]||(e[1]=s=>t.form.password=s),required:"",disabled:t.loading},null,8,$e),[[h,t.form.password]])]),t.error?(a(),r("div",et,u(t.error),1)):y("",!0),o("div",tt,[o("button",{type:"submit",disabled:t.loading},u(t.loading?"Logging in...":"Login"),9,ot),o("button",{type:"button",onClick:e[2]||(e[2]=(...s)=>t.closeModal&&t.closeModal(...s)),disabled:t.loading}," Cancel ",8,st)])],32)])])}const nt=T(Ke,[["render",it],["__scopeId","data-v-46772b29"]]),at={name:"RegisterModal",emits:["close","success"],setup(g,{emit:e}){const n=q(),t=O({name:"",email:"",password:"",passwordConfirm:""}),f=S(!1),m=S(""),s=_(()=>t.name&&t.email&&t.password&&t.passwordConfirm&&t.password===t.passwordConfirm&&t.password.length>=8);return{form:t,loading:f,error:m,isFormValid:s,handleRegister:async()=>{if(!s.value){m.value="Please fill in all fields and ensure passwords match";return}f.value=!0,m.value="";try{const x=await n.register(t.name,t.email,t.password,t.passwordConfirm);x.success?e("success"):m.value=x.error}catch(x){m.value=x.message||"Registration failed"}finally{f.value=!1}},closeModal:()=>{e("close")}}}},lt={class:"form-group"},rt=["disabled"],dt={class:"form-group"},mt=["disabled"],ct={class:"form-group"},ut=["disabled"],gt={class:"form-group"},ft=["disabled"],vt={key:0,class:"error-message"},pt={class:"modal-buttons"},yt=["disabled"],bt=["disabled"];function ht(g,e,n,t,f,m){return a(),r("div",{class:"modal",onClick:e[7]||(e[7]=(...s)=>t.closeModal&&t.closeModal(...s))},[o("div",{class:"modal-content auth-modal",onClick:e[6]||(e[6]=A(()=>{},["stop"]))},[e[12]||(e[12]=o("h2",null,"Register",-1)),o("form",{onSubmit:e[5]||(e[5]=A((...s)=>t.handleRegister&&t.handleRegister(...s),["prevent"]))},[o("div",lt,[e[8]||(e[8]=o("label",{for:"name"},"Name:",-1)),b(o("input",{type:"text",id:"name","onUpdate:modelValue":e[0]||(e[0]=s=>t.form.name=s),required:"",disabled:t.loading},null,8,rt),[[h,t.form.name]])]),o("div",dt,[e[9]||(e[9]=o("label",{for:"email"},"Email:",-1)),b(o("input",{type:"email",id:"email","onUpdate:modelValue":e[1]||(e[1]=s=>t.form.email=s),required:"",disabled:t.loading},null,8,mt),[[h,t.form.email]])]),o("div",ct,[e[10]||(e[10]=o("label",{for:"password"},"Password:",-1)),b(o("input",{type:"password",id:"password","onUpdate:modelValue":e[2]||(e[2]=s=>t.form.password=s),required:"",minlength:"8",disabled:t.loading},null,8,ut),[[h,t.form.password]])]),o("div",gt,[e[11]||(e[11]=o("label",{for:"passwordConfirm"},"Confirm Password:",-1)),b(o("input",{type:"password",id:"passwordConfirm","onUpdate:modelValue":e[3]||(e[3]=s=>t.form.passwordConfirm=s),required:"",minlength:"8",disabled:t.loading},null,8,ft),[[h,t.form.passwordConfirm]])]),t.error?(a(),r("div",vt,u(t.error),1)):y("",!0),o("div",pt,[o("button",{type:"submit",disabled:t.loading||!t.isFormValid},u(t.loading?"Registering...":"Register"),9,yt),o("button",{type:"button",onClick:e[4]||(e[4]=(...s)=>t.closeModal&&t.closeModal(...s)),disabled:t.loading}," Cancel ",8,bt)])],32)])])}const wt=T(at,[["render",ht],["__scopeId","data-v-d5de55ea"]]),kt={name:"EditModal",props:{item:{type:Object,default:null}},emits:["close","save"],setup(g,{emit:e}){const n=S(!1),t=S(""),f=S([]),m=S(null),s=O({category:"watchlist",title:"",release:"",rating:"",count:"",platforms:"",genre:"",link:"",path:"",discovered:"",spielzeit:"",isAiring:!1,nextSeason:"",nextSeasonRelease:"",imageUrl:"",watchlistType:""}),C=_(()=>!!g.item),k=_(()=>s.category==="game"),x=_(()=>s.category==="series"),R=_(()=>s.category==="watchlist");return Se(()=>g.item,l=>{l?Object.keys(s).forEach(M=>{s[M]=l[M]||""}):Object.keys(s).forEach(M=>{s[M]=M==="category"?"watchlist":""})},{immediate:!0}),{form:s,loading:n,error:t,apiResults:f,isEditing:C,isGame:k,isSeries:x,isWatchlist:R,handleSave:async()=>{if(!s.title){t.value="Title is required";return}if(s.category==="watchlist"&&!s.watchlistType){t.value="Please select a type for watchlist items";return}n.value=!0,t.value="";try{const l={...s};Object.keys(l).forEach(M=>{l[M]===""&&M!=="watchlistType"&&(l[M]=null)}),l.rating&&(l.rating=parseFloat(l.rating)),l.count&&(l.count=parseInt(l.count)),l.spielzeit&&(l.spielzeit=parseInt(l.spielzeit)),l.nextSeason&&(l.nextSeason=parseInt(l.nextSeason)),e("save",l)}catch(l){t.value=l.message||"Failed to save item"}finally{n.value=!1}},closeModal:()=>{e("close")},searchApi:async()=>{if(s.category==="watchlist"){f.value=[];return}if(m.value&&clearTimeout(m.value),!s.title||s.title.length<3){f.value=[];return}m.value=setTimeout(async()=>{try{const l=await Te.fetchApiData(s.title,s.category);l&&l.success?f.value=[l]:f.value=[{title:`"${s.title}" - API nicht verfügbar`,release:"",genre:"Bitte manuell ausfüllen",isPlaceholder:!0}]}catch(l){console.error("API search failed:",l),f.value=[{title:`"${s.title}" - API nicht verfügbar`,release:"",genre:"Bitte manuell ausfüllen",isPlaceholder:!0}]}},500)},selectApiResult:l=>{if(l.isPlaceholder){f.value=[];return}s.title=l.title,l.release&&(s.release=l.release),l.platforms&&(s.platforms=l.platforms),l.genre&&(s.genre=l.genre),l.link&&(s.link=l.link),l.path&&(s.path=l.path),l.imageUrl&&(s.imageUrl=l.imageUrl),f.value=[]},formatDate:l=>l?new Date(l).toLocaleDateString():""}}},_t={class:"form-row"},St={class:"form-group"},Ct={class:"form-row"},Mt={class:"form-group"},It={class:"search-container"},xt=["placeholder","disabled"],At={key:0,class:"watchlist-hint"},Lt={key:1,class:"search-results"},Tt=["onClick"],Rt={class:"result-title"},Ut={class:"result-meta"},Vt={key:0},Et={key:1},Pt={class:"form-row"},Dt={class:"form-group"},Ft={class:"form-group"},Nt={class:"form-row"},zt={class:"form-group"},Bt={class:"form-group"},jt={class:"form-row"},Gt={class:"form-group"},Ot={class:"form-group"},qt={key:0,class:"form-row"},Wt={class:"form-group"},Qt={key:0,class:"field-error"},Jt={class:"form-row"},Zt={class:"form-group"},Kt={class:"form-group"},Xt={key:1,class:"form-row"},Ht={class:"form-group"},Yt={key:2,class:"form-row"},$t={class:"form-group"},eo={key:0,class:"form-group"},to={key:3,class:"form-row"},oo={class:"form-group"},so={class:"form-row"},io={class:"form-group"},no={key:4,class:"error-message"},ao={class:"modal-buttons"},lo=["disabled"],ro=["disabled"];function mo(g,e,n,t,f,m){return a(),r("div",{class:"modal",onClick:e[20]||(e[20]=(...s)=>t.closeModal&&t.closeModal(...s))},[o("div",{class:"modal-content",onClick:e[19]||(e[19]=A(()=>{},["stop"]))},[o("h2",null,u(t.isEditing?"Edit Item":"Add Item"),1),o("form",{onSubmit:e[18]||(e[18]=A((...s)=>t.handleSave&&t.handleSave(...s),["prevent"]))},[o("div",_t,[o("div",St,[e[22]||(e[22]=o("label",{for:"category"},"Category:",-1)),b(o("select",{id:"category","onUpdate:modelValue":e[0]||(e[0]=s=>t.form.category=s),required:""},[...e[21]||(e[21]=[o("option",{value:"watchlist"},"Watchlist",-1),o("option",{value:"game"},"Game",-1),o("option",{value:"series"},"Series",-1),o("option",{value:"movie"},"Movie",-1)])],512),[[B,t.form.category]])])]),o("div",Ct,[o("div",Mt,[e[23]||(e[23]=o("label",{for:"title"},"Title:",-1)),o("div",It,[b(o("input",{type:"text",id:"title","onUpdate:modelValue":e[1]||(e[1]=s=>t.form.title=s),onInput:e[2]||(e[2]=(...s)=>t.searchApi&&t.searchApi(...s)),required:"",placeholder:t.isWatchlist?"Manuell eingeben (keine API-Suche)":"Enter title",disabled:t.loading},null,40,xt),[[h,t.form.title]]),t.isWatchlist?(a(),r("div",At," 📋 Watchlist: Bitte alle Felder manuell ausfüllen ")):y("",!0),t.apiResults.length>0?(a(),r("div",Lt,[(a(!0),r(P,null,D(t.apiResults,s=>(a(),r("div",{key:s.title,class:"search-result-item",onClick:C=>t.selectApiResult(s)},[o("div",Rt,u(s.title),1),o("div",Ut,[s.release?(a(),r("span",Vt,u(t.formatDate(s.release)),1)):y("",!0),s.genre?(a(),r("span",Et,u(s.genre),1)):y("",!0)])],8,Tt))),128))])):y("",!0)])])]),o("div",Pt,[o("div",Dt,[e[24]||(e[24]=o("label",{for:"release"},"Release:",-1)),b(o("input",{type:"date",id:"release","onUpdate:modelValue":e[3]||(e[3]=s=>t.form.release=s)},null,512),[[h,t.form.release]])]),o("div",Ft,[e[25]||(e[25]=o("label",{for:"rating"},"Rating:",-1)),b(o("input",{type:"number",id:"rating","onUpdate:modelValue":e[4]||(e[4]=s=>t.form.rating=s),step:"0.1",min:"0",max:"10",placeholder:"0-10"},null,512),[[h,t.form.rating]])])]),o("div",Nt,[o("div",zt,[e[26]||(e[26]=o("label",{for:"views"},"Views:",-1)),b(o("input",{type:"number",id:"views","onUpdate:modelValue":e[5]||(e[5]=s=>t.form.count=s),min:"0",placeholder:"0"},null,512),[[h,t.form.count]])]),o("div",Bt,[e[27]||(e[27]=o("label",{for:"discovered"},"Discovered:",-1)),b(o("input",{type:"date",id:"discovered","onUpdate:modelValue":e[6]||(e[6]=s=>t.form.discovered=s)},null,512),[[h,t.form.discovered]])])]),o("div",jt,[o("div",Gt,[e[28]||(e[28]=o("label",{for:"platforms"},"Platforms:",-1)),b(o("input",{type:"text",id:"platforms","onUpdate:modelValue":e[7]||(e[7]=s=>t.form.platforms=s),placeholder:"PC, PS5, Xbox"},null,512),[[h,t.form.platforms]])]),o("div",Ot,[e[29]||(e[29]=o("label",{for:"genre"},"Genre:",-1)),b(o("input",{type:"text",id:"genre","onUpdate:modelValue":e[8]||(e[8]=s=>t.form.genre=s),placeholder:"Action, Adventure, RPG"},null,512),[[h,t.form.genre]])])]),t.form.category==="watchlist"?(a(),r("div",qt,[o("div",Wt,[e[31]||(e[31]=o("label",{for:"watchlistType"},[Ce("Type: "),o("span",{class:"required"},"*")],-1)),b(o("select",{id:"watchlistType","onUpdate:modelValue":e[9]||(e[9]=s=>t.form.watchlistType=s)},[...e[30]||(e[30]=[o("option",{value:""},"Select Type",-1),o("option",{value:"game"},"Game",-1),o("option",{value:"series"},"Series",-1),o("option",{value:"movie"},"Movie",-1)])],512),[[B,t.form.watchlistType]]),t.form.category==="watchlist"&&!t.form.watchlistType?(a(),r("div",Qt," Please select a type for watchlist items ")):y("",!0)])])):y("",!0),o("div",Jt,[o("div",Zt,[e[32]||(e[32]=o("label",{for:"link"},"Link:",-1)),b(o("input",{type:"url",id:"link","onUpdate:modelValue":e[10]||(e[10]=s=>t.form.link=s),placeholder:"https://..."},null,512),[[h,t.form.link]])]),o("div",Kt,[e[33]||(e[33]=o("label",{for:"path"},"Image Path:",-1)),b(o("input",{type:"text",id:"path","onUpdate:modelValue":e[11]||(e[11]=s=>t.form.path=s),placeholder:"images/movies/filename.jpg"},null,512),[[h,t.form.path]])])]),t.isGame?(a(),r("div",Xt,[o("div",Ht,[e[34]||(e[34]=o("label",{for:"playtime"},"Playtime (Minutes):",-1)),b(o("input",{type:"number",id:"playtime","onUpdate:modelValue":e[12]||(e[12]=s=>t.form.spielzeit=s),min:"0",placeholder:"0"},null,512),[[h,t.form.spielzeit]])])])):y("",!0),t.isSeries?(a(),r("div",Yt,[o("div",$t,[e[36]||(e[36]=o("label",{for:"isAiring"},"Status:",-1)),b(o("select",{id:"isAiring","onUpdate:modelValue":e[13]||(e[13]=s=>t.form.isAiring=s)},[...e[35]||(e[35]=[o("option",{value:!1},"Finished",-1),o("option",{value:!0},"Airing",-1)])],512),[[B,t.form.isAiring]])]),t.form.isAiring?(a(),r("div",eo,[e[37]||(e[37]=o("label",{for:"nextSeason"},"Next Season:",-1)),b(o("input",{type:"number",id:"nextSeason","onUpdate:modelValue":e[14]||(e[14]=s=>t.form.nextSeason=s),min:"1",placeholder:"1"},null,512),[[h,t.form.nextSeason]])])):y("",!0)])):y("",!0),t.form.isAiring?(a(),r("div",to,[o("div",oo,[e[38]||(e[38]=o("label",{for:"nextSeasonRelease"},"Next Season Release:",-1)),b(o("input",{type:"date",id:"nextSeasonRelease","onUpdate:modelValue":e[15]||(e[15]=s=>t.form.nextSeasonRelease=s)},null,512),[[h,t.form.nextSeasonRelease]])])])):y("",!0),o("div",so,[o("div",io,[e[39]||(e[39]=o("label",{for:"imageUrl"},"Image URL:",-1)),b(o("input",{type:"url",id:"imageUrl","onUpdate:modelValue":e[16]||(e[16]=s=>t.form.imageUrl=s),placeholder:"https://..."},null,512),[[h,t.form.imageUrl]])])]),t.error?(a(),r("div",no,u(t.error),1)):y("",!0),o("div",ao,[o("button",{type:"submit",disabled:t.loading},u(t.loading?"Saving...":"Save"),9,lo),o("button",{type:"button",onClick:e[17]||(e[17]=(...s)=>t.closeModal&&t.closeModal(...s)),disabled:t.loading}," Cancel ",8,ro)])],32)])])}const co=T(kt,[["render",mo],["__scopeId","data-v-d9f50120"]]),uo={name:"LoadingSpinner",props:{loading:{type:Boolean,default:!0},message:{type:String,default:"Loading..."}}},go={key:0,class:"loading-spinner"},fo={key:0};function vo(g,e,n,t,f,m){return n.loading?(a(),r("div",go,[e[0]||(e[0]=o("div",{class:"spinner"},null,-1)),n.message?(a(),r("p",fo,u(n.message),1)):y("",!0)])):y("",!0)}const po=T(uo,[["render",vo],["__scopeId","data-v-b6e4a334"]]),yo={name:"VersionInfo",data(){return{version:"1.0.0"}}},bo={class:"version-info"},ho={class:"version-label"};function wo(g,e,n,t,f,m){return a(),r("div",bo,[o("span",ho,"Build #"+u(f.version),1)])}const ko=T(yo,[["render",wo],["__scopeId","data-v-2d54e3c7"]]),_o={name:"MediaLibrary",components:{MediaItem:Ze,LoginModal:nt,RegisterModal:wt,EditModal:co,LoadingSpinner:po,VersionInfo:ko},setup(){const g=Le(),e=q(),n=Re(),t=S(!1),f=S(!1),m=S(!1),s=S(!1),C=S(!1),k=S(null),x=S(8),R=S("order_asc"),F=[{key:"watchlist",name:"Watchlist",icon:"📋"},{key:"game",name:"Games",icon:"🎮"},{key:"series",name:"Series",icon:"📺"},{key:"movie",name:"Movies",icon:"🎬"}],i=_(()=>e.isLoggedIn),L=_(()=>e.userName),U=_(()=>n.currentCategory),W=_({get:()=>n.searchQuery,set:d=>n.setSearchQuery(d)}),l=_(()=>n.categoryCounts),M=_(()=>n.loading),H=_(()=>n.error),Y=_(()=>{const d=[...n.filteredMedia],[c,w]=R.value.split("_");return d.sort((v,p)=>{let I=v[c],N=p[c];return c==="order"&&(I=v.__order||0,N=p.__order||0),typeof I=="string"&&(I=I.toLowerCase(),N=N.toLowerCase()),w==="asc"?I>N?1:-1:I<N?1:-1})}),$=_(()=>Y.value),ee=_(()=>{const d=new Set;return n.mediaData.forEach(c=>{c.platforms&&c.platforms.split(",").forEach(w=>d.add(w.trim()))}),Array.from(d).sort()}),te=_(()=>{const d=new Set;return n.mediaData.forEach(c=>{c.genre&&c.genre.split(",").forEach(w=>d.add(w.trim()))}),Array.from(d).sort()}),oe=()=>{t.value=!t.value},se=()=>{},ie=d=>{n.setCategory(d)},ne=()=>{n.setSearchQuery("")},ae=()=>{g.push("/statistics")},le=()=>{g.push("/profile")},re=(d,c)=>{c?n.addFilter({type:"platform",value:d}):n.removeFilter({type:"platform",value:d})},de=(d,c)=>{c?n.addFilter({type:"genre",value:d}):n.removeFilter({type:"genre",value:d})},me=d=>{k.value=d,s.value=!0},ce=async d=>{confirm("Are you sure you want to delete this item?")&&await n.deleteMediaItem(d.id)},ue=()=>{f.value=!1,m.value=!0},ge=()=>{f.value=!1,V()},fe=()=>{m.value=!1,V()},Q=()=>{s.value=!1,k.value=null},ve=async d=>{k.value?await n.updateMediaItem(k.value.id,d):await n.addMediaItem(d),Q()},pe=async()=>{await e.logout(),V()},V=async()=>{await n.loadMedia()},ye=()=>{C.value=!C.value},be=()=>{if(C.value=!1,!i.value){alert("Bitte loggen Sie sich ein, um neue Items hinzuzufügen.");return}k.value=null,s.value=!0},he=()=>{if(C.value=!1,!i.value){alert("Bitte loggen Sie sich ein, um diese Funktion zu nutzen.");return}alert("Bulk Add feature coming soon!")},we=()=>{if(C.value=!1,!i.value){alert("Bitte loggen Sie sich ein, um diese Funktion zu nutzen.");return}alert("API Import feature coming soon!")},ke=()=>{if(C.value=!1,!i.value){alert("Bitte loggen Sie sich ein, um diese Funktion zu nutzen.");return}J()},J=()=>{const d=n.mediaData;if(d.length===0){alert("Keine Media Items zum Exportieren gefunden.");return}const c=prompt(`Export Format wählen:
1 = CSV
2 = JSON
3 = Beide

Geben Sie die Nummer ein:`,"1");if(!c||!["1","2","3"].includes(c))return;const w=new Date().toISOString().split("T")[0];(c==="1"||c==="3")&&Z(d,w),(c==="2"||c==="3")&&K(d,w),alert(`Collection mit ${d.length} Items wurde erfolgreich exportiert!`)},Z=(d,c)=>{const v=[["Titel","Kategorie","Release","Rating","Platforms","Genre","Spielzeit","Status","Beschreibung"].join(","),...d.map(p=>[`"${(p.title||"").replace(/"/g,'""')}"`,`"${(p.category||p.category_name||"Unbekannt").replace(/"/g,'""')}"`,`"${p.release||""}"`,`"${p.rating||""}"`,`"${(p.platforms||"").replace(/"/g,'""')}"`,`"${(p.genre||"").replace(/"/g,'""')}"`,`"${p.spielzeit||""}"`,`"${p.isAiring?"Airing":"Abgeschlossen"}"`,`"${(p.description||"").replace(/"/g,'""')}"`].join(","))].join(`
`);G(v,`media_collection_${c}.csv`,"text/csv;charset=utf-8;")},K=(d,c)=>{const w={exportDate:new Date().toISOString(),totalItems:d.length,categories:[...new Set(d.map(v=>v.category||v.category_name||"Unbekannt"))],items:d.map(v=>({id:v.id,title:v.title||"",category:v.category||v.category_name||"Unbekannt",release:v.release||"",rating:v.rating||null,platforms:v.platforms||"",genre:v.genre||"",spielzeit:v.spielzeit||null,status:v.isAiring?"Airing":"Abgeschlossen",description:v.description||"",isNew:v.isNew||!1,nextSeason:v.nextSeason||null,discovered:v.discovered||null}))};G(JSON.stringify(w,null,2),`media_collection_${c}.json`,"application/json;charset=utf-8;")},G=(d,c,w)=>{const v=new Blob([d],{type:w}),p=document.createElement("a"),I=URL.createObjectURL(v);p.setAttribute("href",I),p.setAttribute("download",c),p.style.visibility="hidden",document.body.appendChild(p),p.click(),document.body.removeChild(p),URL.revokeObjectURL(I)},X=d=>{const c=F.find(w=>w.key===d);return c?c.name:d},_e=async()=>{const d=X(U.value),c=l.value[U.value]||0;if(c===0){alert("No items to delete in this category.");return}const w=`Are you sure you want to delete ALL ${c} items in "${d}"?

This action cannot be undone!`;if(confirm(w))try{const v=n.mediaData.filter(p=>U.value==="watchlist"?p.category==="watchlist"||p.isNew===!0:p.category===U.value);for(const p of v)try{await n.deleteMediaItem(p.id)}catch(I){console.error("Error deleting item:",p.title,I)}await V(),alert(`Successfully deleted ${c} items from "${d}"`)}catch(v){console.error("Error deleting items:",v),alert("Error occurred while deleting items. Please try again.")}};return Ae(async()=>{await e.initializeAuth(),await V()}),{sidebarCollapsed:t,showLoginModal:f,showRegisterModal:m,showEditModal:s,showFloatingMenu:C,editingItem:k,gridColumns:x,sortBy:R,categories:F,isLoggedIn:i,userName:L,currentCategory:U,searchQuery:W,categoryCounts:l,loading:M,error:H,paginatedMedia:$,platforms:ee,genres:te,toggleSidebar:oe,toggleMobileSidebar:se,setCategory:ie,clearSearch:ne,navigateToStatistics:ae,navigateToProfile:le,togglePlatformFilter:re,toggleGenreFilter:de,editItem:me,deleteItem:ce,switchToRegister:ue,handleLoginSuccess:ge,handleRegisterSuccess:fe,closeEditModal:Q,handleSaveItem:ve,logout:pe,loadMedia:V,toggleFloatingMenu:ye,addNewItem:be,bulkAddItems:he,importFromAPI:we,createCollection:ke,exportMediaCollection:J,exportAsCSV:Z,exportAsJSON:K,downloadFile:G,deleteAllInCategory:_e,getCategoryDisplayName:X}}},So={class:"vue-app"},Co={class:"sidebar-content"},Mo={class:"sidebar-section"},Io={class:"sidebar-nav"},xo=["onClick"],Ao={class:"nav-icon"},Lo={class:"nav-text"},To={class:"nav-count"},Ro={key:0,class:"sidebar-section"},Uo={class:"filter-section"},Vo={class:"filter-group"},Eo={class:"filter-checkboxes"},Po=["value","onChange"],Do={class:"option-text"},Fo={class:"filter-group"},No={class:"filter-checkboxes"},zo=["value","onChange"],Bo={class:"option-text"},jo={class:"sidebar-section"},Go={key:0,class:"auth-buttons"},Oo={key:1,class:"user-info"},qo={class:"user-profile"},Wo={class:"profile-details"},Qo={class:"user-name"},Jo={class:"main-content"},Zo={class:"main-header"},Ko={class:"header-left"},Xo={class:"header-center"},Ho={class:"search-container"},Yo={class:"header-right"},$o={class:"grid-count-container"},es=["value"],ts={class:"sort-container"},os={class:"content-area"},ss={key:1,class:"error"},is={class:"floating-actions"},ns={class:"menu-text"},as={class:"item-count-badge"};function ls(g,e,n,t,f,m){const s=E("VersionInfo"),C=E("LoadingSpinner"),k=E("MediaItem"),x=E("LoginModal"),R=E("RegisterModal"),F=E("EditModal");return a(),r("div",So,[o("aside",{id:"sidebar",class:j(["sidebar",{collapsed:t.sidebarCollapsed}])},[o("div",{class:"sidebar-header",onClick:e[0]||(e[0]=(...i)=>t.toggleSidebar&&t.toggleSidebar(...i))},[...e[20]||(e[20]=[o("h2",null,"Media Library",-1),o("button",{class:"sidebar-toggle"},"☰",-1)])]),o("div",Co,[o("div",Mo,[e[22]||(e[22]=o("h3",null,"Browse",-1)),o("nav",Io,[(a(!0),r(P,null,D(t.categories,i=>(a(),r("button",{key:i.key,class:j(["nav-btn",{active:t.currentCategory===i.key}]),onClick:L=>t.setCategory(i.key)},[o("span",Ao,u(i.icon),1),o("span",Lo,u(i.name),1),o("span",To,u(t.categoryCounts[i.key]||0),1)],10,xo))),128)),o("button",{class:"nav-btn",onClick:e[1]||(e[1]=(...i)=>t.navigateToStatistics&&t.navigateToStatistics(...i))},[...e[21]||(e[21]=[o("span",{class:"nav-icon"},"📊",-1),o("span",{class:"nav-text"},"Statistics",-1)])])])]),t.isLoggedIn?(a(),r("div",Ro,[e[27]||(e[27]=o("h3",null,"Filters",-1)),o("div",Uo,[o("div",Vo,[e[24]||(e[24]=o("h4",null,"Platforms",-1)),o("div",Eo,[(a(!0),r(P,null,D(t.platforms,i=>(a(),r("label",{key:i,class:"filter-option"},[o("input",{type:"checkbox",value:i,onChange:L=>t.togglePlatformFilter(i,L.target.checked)},null,40,Po),e[23]||(e[23]=o("span",{class:"checkmark"},null,-1)),o("span",Do,u(i),1)]))),128))])]),o("div",Fo,[e[26]||(e[26]=o("h4",null,"Genres",-1)),o("div",No,[(a(!0),r(P,null,D(t.genres,i=>(a(),r("label",{key:i,class:"filter-option"},[o("input",{type:"checkbox",value:i,onChange:L=>t.toggleGenreFilter(i,L.target.checked)},null,40,zo),e[25]||(e[25]=o("span",{class:"checkmark"},null,-1)),o("span",Bo,u(i),1)]))),128))])])])])):y("",!0),o("div",jo,[e[29]||(e[29]=o("h3",null,"Account",-1)),t.isLoggedIn?(a(),r("div",Oo,[o("div",qo,[e[28]||(e[28]=o("div",{class:"profile-avatar"},[o("span",{class:"avatar-text"},"👤")],-1)),o("div",Wo,[o("span",Qo,u(t.userName),1)]),o("button",{class:"account-btn",onClick:e[4]||(e[4]=(...i)=>t.navigateToProfile&&t.navigateToProfile(...i))},"⚙️")]),o("button",{class:"auth-btn",onClick:e[5]||(e[5]=(...i)=>t.logout&&t.logout(...i))},"Logout")])):(a(),r("div",Go,[o("button",{class:"auth-btn",onClick:e[2]||(e[2]=i=>t.showLoginModal=!0)},"Login"),o("button",{class:"auth-btn",onClick:e[3]||(e[3]=i=>t.showRegisterModal=!0)},"Register")]))])]),Me(s)],2),o("div",Jo,[o("header",Zo,[o("div",Ko,[o("button",{class:"mobile-sidebar-toggle",onClick:e[6]||(e[6]=(...i)=>t.toggleMobileSidebar&&t.toggleMobileSidebar(...i))},"☰")]),o("div",Xo,[o("div",Ho,[b(o("input",{type:"text","onUpdate:modelValue":e[7]||(e[7]=i=>t.searchQuery=i),placeholder:"Search..."},null,512),[[h,t.searchQuery]]),o("button",{class:"search-clear",onClick:e[8]||(e[8]=(...i)=>t.clearSearch&&t.clearSearch(...i))},"×")])]),o("div",Yo,[o("div",$o,[e[30]||(e[30]=o("label",null,"Columns:",-1)),b(o("select",{"onUpdate:modelValue":e[9]||(e[9]=i=>t.gridColumns=i)},[(a(),r(P,null,D(12,i=>o("option",{key:i,value:i},u(i),9,es)),64))],512),[[B,t.gridColumns]])]),o("div",ts,[b(o("select",{"onUpdate:modelValue":e[10]||(e[10]=i=>t.sortBy=i)},[...e[31]||(e[31]=[Ie('<option value="order_asc" data-v-a78a7416>Original order ↑</option><option value="order_desc" data-v-a78a7416>Original order ↓</option><option value="title_asc" data-v-a78a7416>Title A-Z</option><option value="title_desc" data-v-a78a7416>Title Z-A</option><option value="release_asc" data-v-a78a7416>Release ↑</option><option value="release_desc" data-v-a78a7416>Release ↓</option><option value="rating_asc" data-v-a78a7416>Rating ↑</option><option value="rating_desc" data-v-a78a7416>Rating ↓</option>',8)])],512),[[B,t.sortBy]])])])]),o("main",os,[t.loading?(a(),z(C,{key:0,message:"Loading media data..."})):t.error?(a(),r("div",ss,[o("p",null,u(t.error),1),o("button",{onClick:e[11]||(e[11]=(...i)=>t.loadMedia&&t.loadMedia(...i))},"Retry")])):(a(),r("div",{key:2,class:"grid",style:xe({gridTemplateColumns:`repeat(${t.gridColumns}, 1fr)`})},[(a(!0),r(P,null,D(t.paginatedMedia,i=>(a(),z(k,{key:i.id,item:i,onEdit:t.editItem,onDelete:t.deleteItem},null,8,["item","onEdit","onDelete"]))),128))],4))])]),t.showLoginModal?(a(),z(x,{key:0,onClose:e[12]||(e[12]=i=>t.showLoginModal=!1),onSuccess:t.handleLoginSuccess,onSwitchToRegister:t.switchToRegister},null,8,["onSuccess","onSwitchToRegister"])):y("",!0),t.showRegisterModal?(a(),z(R,{key:1,onClose:e[13]||(e[13]=i=>t.showRegisterModal=!1),onSuccess:t.handleRegisterSuccess},null,8,["onSuccess"])):y("",!0),t.showEditModal?(a(),z(F,{key:2,item:t.editingItem,onClose:t.closeEditModal,onSave:t.handleSaveItem},null,8,["item","onClose","onSave"])):y("",!0),o("div",is,[o("div",{class:j(["floating-menu",{show:t.showFloatingMenu}])},[o("button",{class:"floating-menu-item",onClick:e[14]||(e[14]=(...i)=>t.addNewItem&&t.addNewItem(...i))},[...e[32]||(e[32]=[o("span",{class:"menu-icon"},"➕",-1),o("span",{class:"menu-text"},"Add Item",-1)])]),o("button",{class:"floating-menu-item",onClick:e[15]||(e[15]=(...i)=>t.bulkAddItems&&t.bulkAddItems(...i))},[...e[33]||(e[33]=[o("span",{class:"menu-icon"},"📦",-1),o("span",{class:"menu-text"},"Bulk Add",-1)])]),o("button",{class:"floating-menu-item",onClick:e[16]||(e[16]=(...i)=>t.importFromAPI&&t.importFromAPI(...i))},[...e[34]||(e[34]=[o("span",{class:"menu-icon"},"🌐",-1),o("span",{class:"menu-text"},"Import from API",-1)])]),o("button",{class:"floating-menu-item",onClick:e[17]||(e[17]=(...i)=>t.createCollection&&t.createCollection(...i))},[...e[35]||(e[35]=[o("span",{class:"menu-icon"},"📚",-1),o("span",{class:"menu-text"},"Create Collection",-1)])]),t.isLoggedIn&&t.currentCategory!=="all"&&t.categoryCounts[t.currentCategory]>0?(a(),r("button",{key:0,class:"floating-menu-item delete-all-item",onClick:e[18]||(e[18]=(...i)=>t.deleteAllInCategory&&t.deleteAllInCategory(...i))},[e[36]||(e[36]=o("span",{class:"menu-icon"},"🗑️",-1)),o("span",ns,"Delete All "+u(t.getCategoryDisplayName(t.currentCategory)),1),o("span",as,"("+u(t.categoryCounts[t.currentCategory]||0)+")",1)])):y("",!0)],2),o("button",{class:"floating-add-btn",onClick:e[19]||(e[19]=(...i)=>t.toggleFloatingMenu&&t.toggleFloatingMenu(...i))},u(t.showFloatingMenu?"✕":"+"),1)])])}const cs=T(_o,[["render",ls],["__scopeId","data-v-a78a7416"]]);export{cs as default};
